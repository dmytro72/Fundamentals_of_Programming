<!DOCTYPE html>
<!-- saved from url=(0038)https://py.mit.edu/spring22/labs/lab00 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP 2022.2.0.dev19.  miau. -->

<title>Lab 0: Audio Processing | 6.009 Spring 2022</title>
<link href="./Lab 0_ Audio Processing_files/logo.gif" rel="icon" type="image/gif">
<!-- include catsoop base css -->
<link href="./Lab 0_ Audio Processing_files/base.css" rel="stylesheet" type="text/css">
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    window.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu){
       menu.children[1].checked = false;
    }
    // @license-end
    </script>
<!-- load in katex and CAT-SOOP-specific math rendering  -->
<script src="./Lab 0_ Audio Processing_files/katex.min.js.staÅ¾enÃ½ soubor" type="text/javascript"></script>
<link href="./Lab 0_ Audio Processing_files/katex.min.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.katex_macros = {};
    catsoop.render_math = function (elt) {
        var tex = elt.innerText; // TeX Source
        var display = elt.classList.contains('cs_displaymath');
        try {
            katex.render(tex, elt, {displayMode: display, macros: catsoop.katex_macros});
        }catch(e) {
            console.log(e);
            elt.innerHTML = "<font color='red'><b>Could not parse math:</b> <tt>" + tex + "</tt></font>";
        }
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function (elt){
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while(mathelts.length > 0){
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
          catsoop.render_all_math(document);
    });
    // @license-end
    </script>
<!-- load in diagram stuff -->
<script src="./Lab 0_ Audio Processing_files/cs_diagrams.js.staÅ¾enÃ½ soubor" type="text/javascript"></script>
<script type="text/javascript">
        catsoop.diagram_sources = {};
    </script>
<!-- Syntax Highlighting -->
<script src="./Lab 0_ Audio Processing_files/highlight.min.js.staÅ¾enÃ½ soubor" type="text/javascript"></script>
<script src="./Lab 0_ Audio Processing_files/highlightjs-line-numbers.js.staÅ¾enÃ½ soubor" type="text/javascript"></script><style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    hljs.initHighlightingOnLoad();
    window.addEventListener('DOMContentLoaded', function(){
        document.querySelectorAll('.hl code').forEach((block) => {
            hljs.highlightBlock(block);
        });
        document.querySelectorAll('code.highlight-lines').forEach(function(b){
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0){
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
        });
    });
    // @license-end
    </script>
<style>
      :root {
        --cs-base-bg-color: #039bba;
        --cs-light-bg-color: #62d5ed;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<style>
.cs_top_menu_item {
  font-size: 0.88rem;
}
div.dropdown {
  -moz-transform: translateY(-1px);
}
</style>
<script src="./Lab 0_ Audio Processing_files/cs_ajax.js.staÅ¾enÃ½ soubor" type="text/javascript"></script>
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body style="margin: 0px;">
<header id="cs_header">
<div class="nav-container">
<div class="cs_header_text"><a href="https://py.mit.edu/spring22"><img src="./Lab 0_ Audio Processing_files/logo.gif">&nbsp;6.009</a></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_84494260bb2b4bc1ef74fe697ea810e0">Information<span class="downarrow">â–¼</span></label>
<input checked="false" class="dropdown-checkbox" id="cs_menu_84494260bb2b4bc1ef74fe697ea810e0" type="checkbox">
<div class="dropdown-content">
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/basics">Basic Information</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/help">Getting Help</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/grading">Grading Policies</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/academic_integrity">Academic Integrity</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/infrastructure">Infrastructure</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/notes">Course Notes</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/staff">Staff List</a></div></div>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/queue/">Help Queue</a>
<a class="cs_top_menu_item" href="https://discourse6009.mit.edu/">Forum</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/progress">Progress</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/labs/lab00?loginaction=login">Log In</a><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">â˜°</a>
</div>
</header>
<div class="cs_navigation cs_top_navigation" id="cs_top_navigation"><span class="line"><a href="https://py.mit.edu/spring22">Home</a></span> <span class="cs_nav_separator">/</span> <span class="line"><a href="https://py.mit.edu/spring22/labs/lab00">Lab 0: Audio Processing</a></span></div>
<main class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<div class="cs_page_body">
<center><h1 class="cs_content_header">Lab 0: Audio Processing</h1></center>
<div class="response" id="catsoop_login_box">
<b><center>You are not logged in.</center></b><br>
If you are a current student, please <a href="https://py.mit.edu/spring22/labs/lab00?loginaction=login">Log
In</a> for full access to the web site.<br>Note that this link will take you to
an external site (<tt>https://shimmer.mit.edu</tt>) to authenticate, and then you will be redirected
back to this page.
</div>
<h2>Table of Contents</h2><ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_infrastructure">1) Infrastructure</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_the_command_line">1.1) The Command Line</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_necessary_software">1.2) Necessary Software</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_running_tests">1.3) Running Tests</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_submitting_code">1.4) Submitting Code</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_checkoff">1.5) Checkoff</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_preparation">2) Preparation</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_lab_introduction">3) Lab Introduction</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_representing_sound">4) Representing Sound</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_python_representation">4.1) Python Representation</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_manipulations">5) Manipulations</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_backwards_audio">5.1) Backwards Audio</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_mixing_audio">5.2) Mixing Audio</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_convolutional_filters">5.3) Convolutional Filters</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_echo">5.4) Echo</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_stereo_effects">6) Stereo Effects</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_pan">6.1) Pan</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_removing_vocals_from_music">6.2) Removing Vocals from Music</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab00#_code_submission">7) Code Submission</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_checkoff_2">8) Checkoff</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_what_comes_next">9) What Comes Next?</a></li><li><a href="https://py.mit.edu/spring22/labs/lab00#_optional_additional_extensions">10) (Optional) Additional Extensions</a></li></ul>
<p>Welcome to 6.009!  As this is our first lab, part of the time will be spent
helping you familiarize yourself with the structure of a 6.009 lab and with the
associated infrastructure.  For that reason, and because of a
slightly-compressed timetable compared to a normal lab, this lab is a bit
smaller in terms of scope and scale than a typical lab.</p>
<a class="anchor" name="catsoop_section_1"></a><a class="anchor" name="_infrastructure"></a><h2 class="cs_section_title">1) Infrastructure<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_infrastructure">Â§</a></h2>
<p><a class="anchor" name="catsoop_section_1_1"></a><a class="anchor" name="_the_command_line"></a></p><h3 class="cs_section_title">1.1) The Command Line<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_the_command_line">Â§</a></h3><p></p>
<p>Throughout 6.009, our instructions for labs will often refer to using your
computer's <em>command line</em> (or "<em>shell</em>" or "<em>terminal</em>") to run programs.  We
don't expect you to be familiar with using the command line, and we'll try our
best to explain exactly what needs to be done when you do need to use the
command line.  However, you may find it helpful to familiarize yourself with
some <a href="https://py.mit.edu/spring22/notes/command_line">command-line basics</a> before continuing on.</p>
<p>Although learning to use the command line is well worth the effort in the long
run, it can be daunting when you're first getting started, so don't worry if
things don't come naturally at first.  Of course, feel free to ask at office
hours (or via the forum) if you need help!</p>
<p><a class="anchor" name="catsoop_section_1_2"></a><a class="anchor" name="_necessary_software"></a></p><h3 class="cs_section_title">1.2) Necessary Software<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_necessary_software">Â§</a></h3><p></p>
<p>Completing and submitting 6.009 assignments will require you to have a few
pieces of software installed on your machine.  Please follow our instructions
for <a href="https://py.mit.edu/spring22/info/infrastructure">getting set up for 6.009</a> on your operating
system of choice before proceeding.</p>
<p><a class="anchor" name="catsoop_section_1_3"></a><a class="anchor" name="_running_tests"></a></p><h3 class="cs_section_title">1.3) Running Tests<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_running_tests">Â§</a></h3><p></p>
<p>For all of our labs, we will include a file called <code>test.py</code>; when you run this
file (either from the command line or from some other environment), it uses
<code>pytest</code> to run your code through several test cases and shows you the results.</p>
<p>Running <code>pytest test.py</code> will run all of the test cases in the file, but you
can modify the behavior (including running only a subset of the test cases)
as described in <a href="https://py.mit.edu/spring22/notes/command_line#_running_pytest">this section (about <code>pytest</code>) in the notes about the command line</a>.</p>
<p>Note that some of the smaller tests might be useful not only for testing but
also for help with understanding the specification for a given piece of code.</p>
<p><a class="anchor" name="catsoop_section_1_4"></a><a class="anchor" name="_submitting_code"></a></p><h3 class="cs_section_title">1.4) Submitting Code<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_submitting_code">Â§</a></h3><p></p>
<p>As mentioned above, we will distribute a suite of tests with each lab, and you
can use this file to test your code for correctness as often as you like.</p>
<p>Once your code passes these test cases on your machine, you should submit your
code to the server to be checked, using the <code>submit-009-lab</code> script.  More
detailed instructions for submitting your code are available father down this
page.</p>
<p><a class="anchor" name="catsoop_section_1_5"></a><a class="anchor" name="_checkoff"></a></p><h3 class="cs_section_title">1.5) Checkoff<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_checkoff">Â§</a></h3><p></p>
<p>In order to receive credit for a lab, you must also complete the associated
"checkoff," which is a brief conversation with a staff member about your code.
At the checkoff, we will ask some questions about your code and also provide
some feedback on <a href="https://py.mit.edu/spring22/notes/style">style</a>.  The checkoff can also be a good
opportunity to learn new Python tricks and alternative ways of approaching the
lab!</p>
<p>Note that checkoffs will become available only after the associated lab has
come due.  The checkoffs themselves generally come due at 10pm on the Wednesday
after the code submission came due.</p>
<p>Once you are ready (and the checkoff is available), come to any open lab time
and use the <a href="https://py.mit.edu/spring22/queue">help queue</a> to request a checkoff.</p>
<p>Note that your checkoff will be based on the most recent code you have
submitted, so if you make stylistic changes, etc., it is worth resubmitting
your updated code so that we can discuss it during the checkoff.  Per the
lateness policy, submitting style changes after the deadline does not incur any
lateness penalty, so long as all previous test cases continue to pass.</p>
<a class="anchor" name="catsoop_section_2"></a><a class="anchor" name="_preparation"></a><h2 class="cs_section_title">2) Preparation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_preparation">Â§</a></h2>
<p>This lab assumes that you have Python 3.6 or newer (3.10 recommended) installed
on your machine, as well as <code>pytest</code>.</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="lab00.zip" href="https://py.mit.edu/spring22/lab_distribution.zip?path=%5B%22spring22%22%2C+%22labs%22%2C+%22lab00%22%5D"><tt>lab00.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit at the
end of this lab.  Importantly, <strong>you should not add any imports to the file</strong>.</p>
<p>You can also see and participate in online discussion about this lab in the <a href="https://discourse6009.mit.edu/c/labs" target="_blank">"Labs"
Category</a> in the forum.</p>
<p>This lab is worth a total of 4 points.  Your score for the lab is based on:</p>
<ul>
<li>answering the questions on this page (1 point),</li>
<li>passing the tests in <code>test.py</code> (2 points), and</li>
<li>a brief "checkoff" conversation with a staff member to discuss your code (1 point).</li>
</ul>
<p><strong>All of the questions on this page, including your code submission, are due at
5pm on Friday, 4 February.  Checkoffs are due at 10 p.m. on Wednesday, 9
February.</strong></p>
<a class="anchor" name="catsoop_section_3"></a><a class="anchor" name="_lab_introduction"></a><h2 class="cs_section_title">3) Lab Introduction<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_lab_introduction">Â§</a></h2>
<p>In this lab, we will be manipulating audio files to produce some neat effects.
This week's distribution contains not only a template file that you should use
for developing your code (<code>lab.py</code>) but also several audio files in the
<code>sounds</code> directory, with names ending with <code>.wav</code> (you can try opening these
files in an audio program to hear their contents).</p>
<p>Over the course of this lab, we will refresh ourselves on some important
features and structures within Python, and we will also familiarize ourselves
with interactions with files on disk (and create some really neat sound effects
as well).</p>
<a class="anchor" name="catsoop_section_4"></a><a class="anchor" name="_representing_sound"></a><h2 class="cs_section_title">4) Representing Sound<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_representing_sound">Â§</a></h2>
<p>In physics, when we talk about a sound, we are talking about waves of air
pressure.  When a sound is generated, a sound wave consisting of alternating
areas of relatively high pressure ("compressions") and relatively low air
pressure ("rarefactions") moves through the air.</p>
<p>When we use a microphone to capture a sound digitally, we do so by making
periodic measurements of an electrical signal proportional to
this air pressure.  Each individual measurement (often called a "sample")
corresponds to the air pressure at a single moment in time; by taking repeated
measurements at a constant rate (the "sampling rate," usually measured in terms
of the number of samples captured per second), these measurements together form
a representation of the sound by approximating how the air pressure was
changing over time.</p>
<p>When a speaker plays back that sound, it does so by converting these
measurements back into waves of alternating air pressure (by moving a diaphragm
proportionally to those captured measurements).  In order to faithfully
represent a sound, we need to know two things: both the sampling rate and the
samples that were actually captured.</p>
<p>For sounds recorded in <em>mono</em>, each sample is a positive or negative number
corresponding to the air pressure at a point in time.  For sounds recorded in
<em>stereo</em>, each sample can be thought of as consisting of two values: one for
the left speaker and one for the right.</p>
<p><a class="anchor" name="catsoop_section_4_1"></a><a class="anchor" name="_python_representation"></a></p><h3 class="cs_section_title">4.1) Python Representation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_python_representation">Â§</a></h3><p></p>
<p>We will be working
with files stored in the <a href="https://en.wikipedia.org/wiki/WAV">WAV</a> format.
However, you won't need to understand that format in detail, as we have
provided some "helper functions" in <code>lab.py</code> to load the information from those
files into a Pythonic format, as well as to take sounds in that Pythonic
representation and save them as WAV files.</p>
<p>Our Pythonic representation of a <em>mono</em> sound (which we will use for the bulk
of this lab) will consist of a dictionary with two key/value pairs:</p>
<ul>
<li><code>'rate'</code>: the sampling rate (as an <code>int</code>), in units of samples per second</li>
<li><code>'samples'</code>: a list containing samples, where each sample is a <code>float</code></li>
</ul>
<p>For example, the following is a valid sound:</p>
<pre><code class="language-py hljs python">s = {
    <span class="hljs-string">'rate'</span>: <span class="hljs-number">8000</span>,
    <span class="hljs-string">'samples'</span>: [<span class="hljs-number">1.00</span>, <span class="hljs-number">0.91</span>, <span class="hljs-number">0.67</span>, <span class="hljs-number">0.31</span>, <span class="hljs-number">-0.10</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.81</span>, <span class="hljs-number">-0.98</span>, <span class="hljs-number">-0.98</span>, <span class="hljs-number">-0.81</span>],
}
</code></pre>
<a class="anchor" name="catsoop_section_5"></a><a class="anchor" name="_manipulations"></a><h2 class="cs_section_title">5) Manipulations<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_manipulations">Â§</a></h2>
<p>In this lab, we will examine the effects of various kinds of manipulations of
audio represented in this form.</p>
<p><a class="anchor" name="catsoop_section_5_1"></a><a class="anchor" name="_backwards_audio"></a></p><h3 class="cs_section_title">5.1) Backwards Audio<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_backwards_audio">Â§</a></h3><p></p>
<p>We'll implement our first manipulation via a function called <code>backwards</code>.  This
function should take a mono sound (using the representation described above, as
a dictionary) as its input, and it should return a <em>new</em> mono sound that is the
reversed version of the original (but without modifying the object representing
the original sound!).</p>
<p>Reversing real-world sounds can create some neat effects.  For example,
consider the following sound (a crash cymbal):</p>
<center>
<audio controls="">
<source src="/sounds/crash.wav">
</audio>
</center>
<p>When reversed, it sounds like this:</p>
<center>
<audio controls="">
<source src="/sounds/crash_reversed.wav">
</audio>
</center>
<p>When we talk about reversing a sound in this way, we are really just talking
about reversing the order of its samples (in both the left and right channels)
but keeping the sampling rate the same.</p>
<p>Go ahead and implement the <code>backwards</code> function in your <code>lab.py</code> file.  After
doing so, your code should pass the first four test cases in <code>test.py</code>.</p>
<p>It can also be fun to play around with these things a little bit.  For example,
<code>mystery.wav</code> is a recording of Adam speaking nonsense.  Let's try using our
new function to produce a modified version of that file.</p>
<p>Note that we have provided some example code in the <code>if __name__ == '__main__'</code>
section of the file, which demonstrates how to use the <code>load_wav</code> and
<code>write_wav</code> functions.  This is a good place to put code for generating files,
or other quick tests.</p>
<p>Try using some similar code to create a reversed version of <code>mystery.wav</code> by:
loading <code>mystery.wav</code>, calling <code>backwards</code> on it to produce a new sound, and
saving that sound with a different filename (ending with <code>.wav</code>).  If you
listen to that new file, you might be able to interpret the secret message!
<img alt="ðŸ" aria-label="snake" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTExLjg0IDcuNjM0Yy0uNzE5IDAtMi4yOTUgMi4yNDMtMy41NjcgMS4wMjktLjQ0LS40MTkgMS44MTgtMS4yNzggMS43MjctMi4wMTctLjA3NS0uNjA3LTIuODQyLTEuNTItMS44NzUtMi4wOTkuOTY3LS41NzggMi40MTguODQxIDMuNTEzLjg2NiAyLjM4Mi4wNTUgNC4yMTItLjg1MyA0LjIzOC0uODY2LjU0MS0uMjc0IDEuMTk1LS4wNTIgMS40NjQuNDk2LjI3LjU0Ny4wNTEgMS4yMTMtLjQ4OCAxLjQ4Ni0uMTMxLjA2Ni0yLjIyNSAxLjEwNS01LjAxMiAxLjEwNXoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMjcuODE4IDM2Yy0zLjk2NyAwLTguMTgyLTIuOTEyLTguMTgyLTguMzA4IDAtMS4zNzQtLjg5LTEuNjYxLTEuNjM3LTEuNjYxLS43NDYgMC0xLjYzNi4yODctMS42MzYgMS42NjEgMCA1LjM5Ni00LjIxNiA4LjMwOC04LjE4MiA4LjMwOFMwIDMzLjIzIDAgMjcuNjkyQzAgMTQuNCAxNC4xODIgMTIuNTY1IDE0LjE4MiAxNC40YzAgMS44MzUtNy42MzYtMS4xMDctNy42MzYgMTIuMTg1IDAgMi4yMTUuODkgMi43NjkgMS42MzYgMi43NjkuNzQ3IDAgMS42MzctLjI4NyAxLjYzNy0xLjY2MSAwLTUuMzk1IDQuMjE1LTguMzA4IDguMTgyLTguMzA4IDMuOTY2IDAgOC4xODIgMi45MTIgOC4xODIgOC4zMDggMCAxLjM3NC44OSAxLjY2MSAxLjYzNyAxLjY2MXMxLjYzNi0uMjg3IDEuNjM2LTEuNjYxVjExLjA3N2MwLTMuODU1LTMuNDE3LTQuNDMxLTUuNDU0LTQuNDMxIDAgMC0zLjI3MiAxLjEwOC02LjU0NSAxLjEwOHMtNC4zNjQtMi41OTYtNC4zNjQtNC40MzFDMTMuMDkxIDEuNDg4IDE3LjQ1NSAwIDI0IDBjNi41NDYgMCAxMiA0LjQ1MSAxMiAxMS4wNzd2MTYuNjE1QzM2IDMzLjA4OCAzMS43ODQgMzYgMjcuODE4IDM2eiIvPjxjaXJjbGUgZmlsbD0iIzI5MkYzMyIgY3g9IjE5IiBjeT0iMyIgcj0iMSIvPjwvc3ZnPg==" title="snake"> <img alt="ðŸ™‚" aria-label="slight_smile" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTgiIGN5PSIxOCIgcj0iMTgiLz48cGF0aCBmaWxsPSIjNjY0NTAwIiBkPSJNMTAuNTE1IDIzLjYyMUMxMC41NiAyMy44IDExLjY4MyAyOCAxOCAyOGM2LjMxOCAwIDcuNDQtNC4yIDcuNDg1LTQuMzc5LjA1NS0uMjE3LS4wNDMtLjQ0Mi0uMjM3LS41NTQtLjE5NS0uMTExLS40MzktLjA3OC0uNi4wNzdDMjQuNjI5IDIzLjE2MyAyMi42OTQgMjUgMTggMjVzLTYuNjMtMS44MzctNi42NDgtMS44NTVDMTEuMjU2IDIzLjA1IDExLjEyOCAyMyAxMSAyM2MtLjA4NCAwLS4xNjkuMDIxLS4yNDYuMDY0LS4xOTYuMTEyLS4yOTQuMzM5LS4yMzkuNTU3eiIvPjxlbGxpcHNlIGZpbGw9IiM2NjQ1MDAiIGN4PSIxMiIgY3k9IjEzLjUiIHJ4PSIyLjUiIHJ5PSIzLjUiLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMjQiIGN5PSIxMy41IiByeD0iMi41IiByeT0iMy41Ii8+PC9zdmc+" title="slight_smile"></p>
<p>Once you have that file, upload it in the box below to be checked for correctness:</p>
<p>
<!--START question reverse_example -->
</p><div class="question question-fileupload" id="cs_qdiv_reverse_example" style="position: static">
<div id="reverse_example_rendered_question">
Reversed <code>mystery.wav</code>:<br><input id="reverse_example" name="reverse_example" style="display: none" type="file"><button class="btn btn-catsoop" id="reverse_example_select_button">Select File</button>&nbsp;<tt><span id="reverse_example_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('reverse_example_select_button').addEventListener('click', function (){
    document.getElementById("reverse_example").click();
});
document.getElementById('reverse_example').onchange = function (){
    document.getElementById('reverse_example_selected_file').innerText = document.getElementById('reverse_example').value;
};
dnd_reverse_example = document.getElementById('cs_qdiv_reverse_example');
dnd_reverse_example.ondragover = dnd_reverse_example.ondragenter = function(e){e.preventDefault();};
dnd_reverse_example.ondrop = function(e){
    document.getElementById("reverse_example").files = e.dataTransfer.files;
    document.getElementById('reverse_example').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="reverse_example_buttons"></span>
<span id="reverse_example_loading_wrapper">
<span id="reverse_example_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="reverse_example_score_display"></span>
<div class="nsubmits_left" id="reverse_example_nsubmits_left"></div></div>
<div id="reverse_example_solution_container">
<div id="reverse_example_solution">
</div>
<div id="reverse_example_solution_explanation">
</div>
</div>
<div id="reverse_example_message"></div>
</div>
<!--END question reverse_example -->
<p></p>
<p><a class="anchor" name="catsoop_section_5_2"></a><a class="anchor" name="_mixing_audio"></a></p><h3 class="cs_section_title">5.2) Mixing Audio<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_mixing_audio">Â§</a></h3><p></p>
<p>Next, we'll look at <em>mixing</em> two sounds together to create a new sound.  We'll
implement this behavior as a function called <code>mix</code>.  <code>mix</code> should take three
inputs: two sounds (in our dictionary representation) and a "mixing parameter"
<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span></span> (a <code>float</code> such that <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â‰¤</mo><mi>p</mi><mo>â‰¤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \leq p \leq 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.78041em; vertical-align: -0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83041em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>).</p>
<p>The resulting sound should take <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span></span> times the samples in the first sound and
<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">1-p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span></span> times the samples in the second sound, and add them together to
produce a new sound.</p>
<p>The two input sounds should have the same sampling rate.  If you are provided
with sounds of two different sampling rates, you should return <code>None</code> instead
of returning a sound.</p>
<p>However, despite having the same sampling rate, the input sounds might have
different durations.  The length of the resulting sound should be the <em>minimum</em>
of the lengths of the two input sounds, so that we are guaranteed a result
where we can always hear both sounds (it would be jarring if one of the sounds
cut off in the middle).</p>
<p>For example, consider the following two sounds:</p>
<center>
<audio controls="">
<source src="/sounds/chord.wav">
</audio>
</center>
<center>
<audio controls="">
<source src="/sounds/meow.wav">
</audio>
</center>
<p>Mixing them together with a mixing parameter <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mn>0.7</mn></mrow><annotation encoding="application/x-tex">p=0.7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0.7</span></span></span></span></span>, we hear the sound of a
frustrated cat whose human is paying too much attention to a guitar and not
enough to the cat....</p>
<center>
<audio controls="">
<source src="/sounds/chord_meow.wav">
</audio>
</center>
<p>Go ahead and implement <code>mix</code> in <code>lab.py</code>.  As with the function above, <code>mix</code>
should produce a new Python object representing the new sound, and it should
not modify either of the sounds that are passed to it.  After having
implemented <code>mix</code>, you should pass the first 8 test cases in <code>test.py</code>.</p>
<p>As one example of a neat result, try mixing together <code>synth.wav</code> and
<code>water.wav</code> with a mixing parameter of <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mn>0.2</mn></mrow><annotation encoding="application/x-tex">p=0.2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0.2</span></span></span></span></span>.  Give this one a listen, and
you should hear a sound mimicking what you would hear listening to some weird
new-age music while standing next to a stream....</p>
<p>Once you have that file, upload it below to be checked for correctness.</p>
<p>
<!--START question mix_example -->
</p><div class="question question-fileupload" id="cs_qdiv_mix_example" style="position: static">
<div id="mix_example_rendered_question">
Mixed synth and water:<br><input id="mix_example" name="mix_example" style="display: none" type="file"><button class="btn btn-catsoop" id="mix_example_select_button">Select File</button>&nbsp;<tt><span id="mix_example_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('mix_example_select_button').addEventListener('click', function (){
    document.getElementById("mix_example").click();
});
document.getElementById('mix_example').onchange = function (){
    document.getElementById('mix_example_selected_file').innerText = document.getElementById('mix_example').value;
};
dnd_mix_example = document.getElementById('cs_qdiv_mix_example');
dnd_mix_example.ondragover = dnd_mix_example.ondragenter = function(e){e.preventDefault();};
dnd_mix_example.ondrop = function(e){
    document.getElementById("mix_example").files = e.dataTransfer.files;
    document.getElementById('mix_example').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="mix_example_buttons"></span>
<span id="mix_example_loading_wrapper">
<span id="mix_example_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="mix_example_score_display"></span>
<div class="nsubmits_left" id="mix_example_nsubmits_left"></div></div>
<div id="mix_example_solution_container">
<div id="mix_example_solution">
</div>
<div id="mix_example_solution_explanation">
</div>
</div>
<div id="mix_example_message"></div>
</div>
<!--END question mix_example -->
<p></p>
<p><a class="anchor" name="catsoop_section_5_3"></a><a class="anchor" name="_convolutional_filters"></a></p><h3 class="cs_section_title">5.3) Convolutional Filters<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_convolutional_filters">Â§</a></h3><p></p>
<p>It turns out that a wide variety of interesting effects can be applied to audio
using an operation known as <em>convolution</em>.  By applying this operation to the
samples in a sound and a "kernel" (another list of samples), we can achieve a
wide variety of effects.</p>
<p>In its most concise mathemetical form, convolution is usually expressed in the
following way:</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mo>âˆ—</mo><mi>h</mi><mo stretchy="false">)</mo><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>m</mi><mo>=</mo><mo>âˆ’</mo><mi mathvariant="normal">âˆž</mi></mrow><mi mathvariant="normal">âˆž</mi></munderover><mi>x</mi><mo stretchy="false">[</mo><mi>m</mi><mo stretchy="false">]</mo><mi>h</mi><mo stretchy="false">[</mo><mi>n</mi><mo>âˆ’</mo><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">y[n] = (x * h)[n] = \sum_{m=-\infty}^{\infty}x[m]h[n-m]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.95973em; vertical-align: -1.30834em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.6514em;"><span class="" style="top: -1.89999em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mrel mtight">=</span><span class="mord mtight">âˆ’</span><span class="mord mtight">âˆž</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">âˆ‘</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆž</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 1.30834em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mclose">]</span><span class="mord mathnormal">h</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">]</span></span></span></span></span></div><p></p>
<p>That is to say, the value <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">y[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span></span> at sample number <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">n</span></span></span></span></span> in the output (<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span></span></span></span></span>) can
be computed using the sum on the right (where <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">x</span></span></span></span></span> represents the samples in the
input sound and <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal">h</span></span></span></span></span> represents the samples in the kernel).</p>
<p>This is a fine way to implement convolution (and you are welcome to do things
this way if you please), but it is perhaps easier to think of convolution in a
slightly different way.  Our kernel is represented by a list of values.  For
each nonzero value <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">h[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span></span> in our kernel, we create a copy of the samples in the
input sound, shifted by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">n</span></span></span></span></span> and scaled by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">h[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span></span>; and adding these new lists of
signals together give us our output.  The total length of the output should be
the length of the samples in the input sound, plus the length of the samples in
the kernel, minus one.</p>
<p>For example, consider the following sound:</p>
<pre><code class="language-py hljs python">s = {
  <span class="hljs-string">'rate'</span>: <span class="hljs-number">20</span>,
  <span class="hljs-string">'samples'</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>]
}
</code></pre>
<p>and consider convolving this signal with the following kernel:</p>
<pre><code class="language-py hljs python">kernel = [<span class="hljs-number">3</span>, <span class="hljs-number">-2</span>]
</code></pre>
<p>Here, we'll walk through the process of computing the result of <code>convolve(s,
kernel)</code>, using the process described above.  We know that our output is
eventually going to have 5 samples in it (the length of the samples, plus the
length of the kernel, minus 1).</p>
<p>The <code>3</code> at index <code>0</code> contributes values to our output samples like a version of the input samples scaled by <code>3</code> and shifted by <code>0</code>: <code>[6, 15, 0, 9, 0]</code></p>
<p>The <code>-2</code> at index <code>1</code> contributes values to our output samples like a version of the input samples scaled by <code>-2</code> and shifted by <code>1</code>: <code>[0, -4, -10, 0, -6]</code>.</p>
<p>Adding those together, we get our overall result: <code>[6, 11, -10, 9, -6]</code>.
These represent the samples of our output sound (which should have the same
rate as the input).</p>
<p>
<!--START question q000000 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000000" style="position: static">
<div id="q000000_rendered_question">
Consider the following sound:
<pre><code class="language-py hljs python">s = {
    <span class="hljs-string">'rate'</span>: <span class="hljs-number">30</span>,
    <span class="hljs-string">'samples'</span>: [<span class="hljs-number">-5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
}
</code></pre>
<p>And the following kernel:</p>
<pre><code class="language-py hljs python">k = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>]
</code></pre>
<p>If we were to make a new sound via <code>s2 = convolve(s, k)</code>, what should the value
of <code>s2['samples']</code> be?</p><input id="q000000" name="q000000" size="50" type="text" value="">
</div><div>
<span id="q000000_buttons"></span>
<span id="q000000_loading_wrapper">
<span id="q000000_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000000_score_display"></span>
<div class="nsubmits_left" id="q000000_nsubmits_left"></div></div>
<div id="q000000_solution_container">
<div id="q000000_solution">
</div>
<div id="q000000_solution_explanation">
</div>
</div>
<div id="q000000_message"></div>
</div>
<!--END question q000000 -->
<p></p>
<p>Now implement the <code>convolve</code> function in <code>lab.py</code>.  After it is correctly
implemented, your code should pass the first 14 test cases from <code>test.py</code>.</p>
<p>Convolution might seem like a weird operation to want to perform, but it turns
out to be central to a lot of common and interesting audio manipulations.  One
example of a kind of effect that can be achieved via convolution is a
<em>bass-boost</em> effect, where low frequency content in a sound is amplified.</p>
<p>We have provided a function called <code>bass_boost_kernel(N, scale)</code> Calling that
function will produce a kernel that can be fed into your <code>convolve</code> function
(along with a sound) to produce a new sound as output.  The <code>scale</code> parameter
affects the loudness of the low frequencies (<code>scale=0</code> means no boosting at
all, and larger values boost the low-frequency content more); the <code>N</code> parameter
provides a way to control the frequencies that are boosted (<code>N=0</code> will boost
all frequencies roughly equally, and larger values allow more focus on the
lowest frequencies in the input sound).</p>
<p>To test this functionality, use your <code>convolve</code> function to make a bass-boosted
version of the <code>ice_and_chilli.wav</code> sound.  When creating the kernel, use
<code>N=1000</code> and <code>scale=1.5</code>.  Note that this operation may take quite a long while
compared to the other files we've generated so far; feel free to grab a cup of
tea while it's running <img alt="ðŸ™‚" aria-label="slight_smile" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTgiIGN5PSIxOCIgcj0iMTgiLz48cGF0aCBmaWxsPSIjNjY0NTAwIiBkPSJNMTAuNTE1IDIzLjYyMUMxMC41NiAyMy44IDExLjY4MyAyOCAxOCAyOGM2LjMxOCAwIDcuNDQtNC4yIDcuNDg1LTQuMzc5LjA1NS0uMjE3LS4wNDMtLjQ0Mi0uMjM3LS41NTQtLjE5NS0uMTExLS40MzktLjA3OC0uNi4wNzdDMjQuNjI5IDIzLjE2MyAyMi42OTQgMjUgMTggMjVzLTYuNjMtMS44MzctNi42NDgtMS44NTVDMTEuMjU2IDIzLjA1IDExLjEyOCAyMyAxMSAyM2MtLjA4NCAwLS4xNjkuMDIxLS4yNDYuMDY0LS4xOTYuMTEyLS4yOTQuMzM5LS4yMzkuNTU3eiIvPjxlbGxpcHNlIGZpbGw9IiM2NjQ1MDAiIGN4PSIxMiIgY3k9IjEzLjUiIHJ4PSIyLjUiIHJ5PSIzLjUiLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMjQiIGN5PSIxMy41IiByeD0iMi41IiByeT0iMy41Ii8+PC9zdmc+" title="slight_smile"> <img alt="â˜•" aria-label="coffee" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGVsbGlwc2UgZmlsbD0iIzk5QUFCNSIgY3g9IjE4IiBjeT0iMjYiIHJ4PSIxOCIgcnk9IjEwIi8+PGVsbGlwc2UgZmlsbD0iI0NDRDZERCIgY3g9IjE4IiBjeT0iMjQiIHJ4PSIxOCIgcnk9IjEwIi8+PHBhdGggZmlsbD0iI0Y1RjhGQSIgZD0iTTE4IDMxQzMuMDQyIDMxIDEgMTYgMSAxMmgzNGMwIDItMS45NTggMTktMTcgMTl6Ii8+PHBhdGggZmlsbD0iI0NDRDZERCIgZD0iTTM0LjM4NSA5LjY0NGMyLjQ0Mi0xMC4xMjMtOS43ODEtNy43MDYtMTIuMjA0LTUuNzk5LTEuMzQtLjE0OC0yLjczNi0uMjM0LTQuMTgxLS4yMzQtOS4zODkgMC0xNyAzLjIyOS0xNyA4LjQ0NEMxIDE3LjI3MSA4LjYxMSAyMS41IDE4IDIxLjVzMTctNC4yMjkgMTctOS40NDRjMC0uODYzLS4yMjYtMS42NjQtLjYxNS0yLjQxMnptLTIuNTAzLTIuNjkyYy0xLjM1Ny0uOTM4LTMuMTAyLTEuNjk0LTUuMTIxLTIuMjUgMS44NzUtLjU3NiA0LjU1MS0uMzA5IDUuMTIxIDIuMjV6Ii8+PGVsbGlwc2UgZmlsbD0iIzhBNEIzOCIgY3g9IjE4IiBjeT0iMTMiIHJ4PSIxNSIgcnk9IjciLz48cGF0aCBmaWxsPSIjRDk5RTgyIiBkPSJNMjAgMTdjLS4yNTYgMC0uNTEyLS4wOTgtLjcwNy0uMjkzLTIuMzM3LTIuMzM3LTIuMzc2LTQuODg1LS4xMjUtOC4yNjIuNzM5LTEuMTA5LjktMi4yNDYuNDc4LTMuMzc3LS40NjEtMS4yMzYtMS40MzgtMS45OTYtMS43MzEtMi4wNzctLjU1MyAwLS45NTgtLjQ0My0uOTU4LS45OTYgMC0uNTUyLjQ5MS0uOTk1IDEuMDQzLS45OTUuOTk3IDAgMi4zOTUgMS4xNTMgMy4xODMgMi42MjUgMS4wMzQgMS45MzMuOTEgNC4wMzktLjM1MSA1LjkyOS0xLjk2MSAyLjk0Mi0xLjUzMSA0LjMzMi0uMTI1IDUuNzM4LjM5MS4zOTEuMzkxIDEuMDIzIDAgMS40MTQtLjE5NS4xOTYtLjQ1MS4yOTQtLjcwNy4yOTR6bS02LTJjLS4yNTYgMC0uNTEyLS4wOTgtLjcwNy0uMjkzLTIuMzM3LTIuMzM3LTIuMzc2LTQuODg1LS4xMjUtOC4yNjIuNzI3LTEuMDkxLjg5My0yLjA4My40OTQtMi45NDctLjQ0NC0uOTYxLTEuNDMxLTEuNDY5LTEuNjg0LTEuNDk5LS41NTIgMC0uOTg5LS40NDctLjk4OS0xIDAtLjU1Mi40NTgtMSAxLjAxMS0xIC45OTcgMCAyLjU4NS45NzQgMy4zNiAyLjQyMy40ODEuODk5IDEuMDUyIDIuNzYxLS41MjggNS4xMzEtMS45NjEgMi45NDItMS41MzEgNC4zMzItLjEyNSA1LjczOC4zOTEuMzkxLjM5MSAxLjAyMyAwIDEuNDE0LS4xOTUuMTk3LS40NTEuMjk1LS43MDcuMjk1eiIvPjwvc3ZnPg==" title="coffee">.  It might take a couple of minutes,
depending on the computer you're running on.</p>
<p>Listen to the result, and compare it against the original <code>ice_and_chilli.wav</code>.
Can you hear the difference?  Note that the difference may be difficult to hear
on laptop speakers; but it should be apparent if you use headphones or external
speakers.</p>
<p>Upload the resulting file below to test for correctness:</p>
<p>
<!--START question bassboost_reverse -->
</p><div class="question question-fileupload" id="cs_qdiv_bassboost_reverse" style="position: static">
<div id="bassboost_reverse_rendered_question">
Bass-boosted <code>ice_and_chilli.wav</code>:<br><input id="bassboost_reverse" name="bassboost_reverse" style="display: none" type="file"><button class="btn btn-catsoop" id="bassboost_reverse_select_button">Select File</button>&nbsp;<tt><span id="bassboost_reverse_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('bassboost_reverse_select_button').addEventListener('click', function (){
    document.getElementById("bassboost_reverse").click();
});
document.getElementById('bassboost_reverse').onchange = function (){
    document.getElementById('bassboost_reverse_selected_file').innerText = document.getElementById('bassboost_reverse').value;
};
dnd_bassboost_reverse = document.getElementById('cs_qdiv_bassboost_reverse');
dnd_bassboost_reverse.ondragover = dnd_bassboost_reverse.ondragenter = function(e){e.preventDefault();};
dnd_bassboost_reverse.ondrop = function(e){
    document.getElementById("bassboost_reverse").files = e.dataTransfer.files;
    document.getElementById('bassboost_reverse').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="bassboost_reverse_buttons"></span>
<span id="bassboost_reverse_loading_wrapper">
<span id="bassboost_reverse_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="bassboost_reverse_score_display"></span>
<div class="nsubmits_left" id="bassboost_reverse_nsubmits_left"></div></div>
<div id="bassboost_reverse_solution_container">
<div id="bassboost_reverse_solution">
</div>
<div id="bassboost_reverse_solution_explanation">
</div>
</div>
<div id="bassboost_reverse_message"></div>
</div>
<!--END question bassboost_reverse -->
<p></p>
<p><a class="anchor" name="catsoop_section_5_4"></a><a class="anchor" name="_echo"></a></p><h3 class="cs_section_title">5.4) Echo<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_echo">Â§</a></h3><p></p>
<p>Next, we'll implement a classic effect: an <em>echo</em> filter.  We simulate an echo
by starting with our original sound, and adding one or more additional copies
of the sound, each delayed by some amount and scaled down so as to be quieter.</p>
<p>We will implement this filter as a function called <code>echo(sound, num_echoes,
delay, scale)</code>.  This function should take the following arguments:</p>
<ul>
<li><code>sound</code>: a dictionary representing the original sound</li>
<li><code>num_echoes</code>: the number of additional copies of the sound to add</li>
<li><code>delay</code>: the amount (in <strong>seconds</strong>) by which each "echo" should be delayed</li>
<li><code>scale</code>: the amount by which each echo's samples should be scaled</li>
</ul>
<p>A good first place to start is by determining how many <em>samples</em> each copy should
be delayed by.  To make sure your results are consistent with our checker, you
should use Python's <code>round</code> function: <code>sample_delay = round(delay * sound['rate'])</code></p>
<p>We should add in a delayed and scaled-down copy of the sound's samples (scaled
by the given <code>scale</code> value and offset by <code>sample_delay</code> samples).  Note that
each new copy should be scaled down more than the one preceding it (the first
should be multiplied by <code>scale</code>, the second by a total of <code>scale**2</code>, the third
by a total of <code>scale**3</code>, and so on).</p>
<p>All told, the output should be <code>num_echoes * sample_delay</code> samples longer than
the input in order to avoid cutting off any of the echoes.</p>
<p>As an example, consider the following sound:</p>
<center>
<audio controls="">
<source src="/sounds/hello.wav">
</audio>
</center>
<p>If we invoke <code>echo</code> with this sound, 4 copies, a 0.4-second delay, and a scaling
factor of 0.4, we end up with the following:</p>
<center>
<audio controls="">
<source src="/sounds/hello_echo.wav">
</audio>
</center>
<p>
<!--START question echo_byhand_1 -->
</p><div class="question question-pythonic" id="cs_qdiv_echo_byhand_1" style="position: static">
<div id="echo_byhand_1_rendered_question">
Consider the following sound:
<pre><code class="language-py hljs python">s = {
    <span class="hljs-string">'rate'</span>: <span class="hljs-number">8</span>,
    <span class="hljs-string">'samples'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>],
}
</code></pre>
<p>If we were to make a new sound via <code>s2 = echo(s, 1, 0.4, 0.2)</code>, what should
the value of <code>s2['samples']</code> be?  Enter a Python list in the box below:<br></p><input id="echo_byhand_1" name="echo_byhand_1" size="50" type="text" value="">
</div><div>
<span id="echo_byhand_1_buttons"></span>
<span id="echo_byhand_1_loading_wrapper">
<span id="echo_byhand_1_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="echo_byhand_1_score_display"></span>
<div class="nsubmits_left" id="echo_byhand_1_nsubmits_left"></div></div>
<div id="echo_byhand_1_solution_container">
<div id="echo_byhand_1_solution">
</div>
<div id="echo_byhand_1_solution_explanation">
</div>
</div>
<div id="echo_byhand_1_message"></div>
</div>
<!--END question echo_byhand_1 -->
<p></p>
<p>
<!--START question echo_byhand_2 -->
</p><div class="question question-pythonic" id="cs_qdiv_echo_byhand_2" style="position: static">
<div id="echo_byhand_2_rendered_question">
Consider the following sound:
<pre><code class="language-py hljs python">s = {
    <span class="hljs-string">'rate'</span>: <span class="hljs-number">8</span>,
    <span class="hljs-string">'samples'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>],
}
</code></pre>
<p>If we were to make a new sound via <code>s2 = echo(s, 2, 0.4, 0.2)</code>, what should
the value of <code>s2['samples']</code> be?  Enter a Python list in the box below:<br></p><input id="echo_byhand_2" name="echo_byhand_2" size="50" type="text" value="">
</div><div>
<span id="echo_byhand_2_buttons"></span>
<span id="echo_byhand_2_loading_wrapper">
<span id="echo_byhand_2_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="echo_byhand_2_score_display"></span>
<div class="nsubmits_left" id="echo_byhand_2_nsubmits_left"></div></div>
<div id="echo_byhand_2_solution_container">
<div id="echo_byhand_2_solution">
</div>
<div id="echo_byhand_2_solution_explanation">
</div>
</div>
<div id="echo_byhand_2_message"></div>
</div>
<!--END question echo_byhand_2 -->
<p></p>
<p>Implement the echo filter by filling in the definition of the <code>echo</code> function
in <code>lab.py</code>.  Note that <code>echo</code> should create a new sound and should not modify
its inputs.</p>
<p>Note also that there are multiple ways to implement this function.  One
strategy would involve writing a brand-new <code>echo</code> function from scratch; but
another would be to construct an appropriate filter and then using <code>convolve</code>
to implement the echo.</p>
<p>After implementing <code>echo</code>, your code should pass the first 18 test cases from <code>test.py</code>.</p>
<p>When you have done so, try applying your echo filter to the sound in <code>chord.wav</code>,
with 5 echoes, 0.3 seconds of delay between echoes, and a scaling factor of 0.6.
Save the result as a WAV file, give it a listen, and upload it in the box below
to check for correctness:</p>
<p>
<!--START question echo_example -->
</p><div class="question question-fileupload" id="cs_qdiv_echo_example" style="position: static">
<div id="echo_example_rendered_question">
Echo-y <code>chord.wav</code>:<br><input id="echo_example" name="echo_example" style="display: none" type="file"><button class="btn btn-catsoop" id="echo_example_select_button">Select File</button>&nbsp;<tt><span id="echo_example_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('echo_example_select_button').addEventListener('click', function (){
    document.getElementById("echo_example").click();
});
document.getElementById('echo_example').onchange = function (){
    document.getElementById('echo_example_selected_file').innerText = document.getElementById('echo_example').value;
};
dnd_echo_example = document.getElementById('cs_qdiv_echo_example');
dnd_echo_example.ondragover = dnd_echo_example.ondragenter = function(e){e.preventDefault();};
dnd_echo_example.ondrop = function(e){
    document.getElementById("echo_example").files = e.dataTransfer.files;
    document.getElementById('echo_example').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="echo_example_buttons"></span>
<span id="echo_example_loading_wrapper">
<span id="echo_example_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="echo_example_score_display"></span>
<div class="nsubmits_left" id="echo_example_nsubmits_left"></div></div>
<div id="echo_example_solution_container">
<div id="echo_example_solution">
</div>
<div id="echo_example_solution_explanation">
</div>
</div>
<div id="echo_example_message"></div>
</div>
<!--END question echo_example -->
<p></p>
<a class="anchor" name="catsoop_section_6"></a><a class="anchor" name="_stereo_effects"></a><h2 class="cs_section_title">6) Stereo Effects<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_stereo_effects">Â§</a></h2>
<p>For the last two audio effects in this lab, we'll focus instead on <em>stereo</em>
sounds (files that have separate lists of samples for the left and right
speakers.</p>
<p>Our Pythonic representation of a <em>stereo</em> sound will consist of a dictionary
with three key/value pairs:</p>
<ul>
<li><code>'rate'</code>: the sampling rate (as an <code>int</code>), in units of samples per second</li>
<li><code>'left'</code>: a list containing samples for the left speaker</li>
<li><code>'right'</code>: a list containing samples for the right spearker</li>
</ul>
<p>For example, the following is a valid stereo sound:</p>
<pre><code class="language-py hljs python">s = {
    <span class="hljs-string">'rate'</span>: <span class="hljs-number">8000</span>,
    <span class="hljs-string">'left'</span>: [<span class="hljs-number">0.00</span>, <span class="hljs-number">0.59</span>, <span class="hljs-number">0.95</span>, <span class="hljs-number">0.95</span>, <span class="hljs-number">0.59</span>, <span class="hljs-number">0.00</span>, <span class="hljs-number">-0.59</span>, <span class="hljs-number">-0.95</span>, <span class="hljs-number">-0.95</span>, <span class="hljs-number">-0.59</span>],
    <span class="hljs-string">'right'</span>: [<span class="hljs-number">1.00</span>, <span class="hljs-number">0.91</span>, <span class="hljs-number">0.67</span>, <span class="hljs-number">0.31</span>, <span class="hljs-number">-0.10</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.81</span>, <span class="hljs-number">-0.98</span>, <span class="hljs-number">-0.98</span>, <span class="hljs-number">-0.81</span>],
}
</code></pre>
<p>Our <code>load_wav</code> function can read stereo files to create sounds of this form as
well, as long as you provide the <code>stereo=True</code> argument to the function.  For
example, <code>load_wav('hello.wav')</code> produces a mono sound, but
<code>load_wav('hello.wav', stereo=True)</code> produces a stereo sound instead.</p>
<p><a class="anchor" name="catsoop_section_6_1"></a><a class="anchor" name="_pan"></a></p><h3 class="cs_section_title">6.1) Pan<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_pan">Â§</a></h3><p></p>
<p>For our first effect using stereo sound, we'll create a really neat spatial
effect.  <strong>Note</strong> that this effect is most noticeable if you are wearing
headphones; it may not be too apparent through laptop speakers.</p>
<p>Let's hear an example before we describe the process.  If you listen to the
sound below (a creaky door), it should sound like the door is more or less
directly in front of you:</p>
<center>
<audio controls="">
<source src="/sounds/door.wav">
</audio>
</center>
<p>However, if we manipulate things a bit, we can make it seem like we are moving
by the door.  Or maybe the door is moving by us? <img alt="ðŸ¤”" aria-label="thinking" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQjRDIiBjeD0iMTgiIGN5PSIxNy4wMTgiIHI9IjE3Ii8+PHBhdGggZmlsbD0iIzY1NDcxQiIgZD0iTTE0LjUyNCAyMS4wMzZjLS4xNDUtLjExNi0uMjU4LS4yNzQtLjMxMi0uNDY0LS4xMzQtLjQ2LjEzLS45MTguNTktMS4wMjEgNC41MjgtMS4wMjEgNy41NzcgMS4zNjMgNy43MDYgMS40NjUuMzg0LjMwNi40NTkuODQ1LjE3MyAxLjIwNS0uMjg2LjM1OC0uODI4LjQwMS0xLjIxMS4wOTctLjExLS4wODQtMi41MjMtMS45MjMtNi4xODItMS4wOTgtLjI3NC4wNjEtLjU1NC0uMDE2LS43NjQtLjE4NHoiLz48ZWxsaXBzZSBmaWxsPSIjNjU0NzFCIiBjeD0iMTMuMTE5IiBjeT0iMTEuMTc0IiByeD0iMi4xMjUiIHJ5PSIyLjY1NiIvPjxlbGxpcHNlIGZpbGw9IiM2NTQ3MUIiIGN4PSIyNC4zNzUiIGN5PSIxMi4yMzYiIHJ4PSIyLjEyNSIgcnk9IjIuNjU2Ii8+PHBhdGggZmlsbD0iI0YxOTAyMCIgZD0iTTE3LjI3NiAzNS4xNDlzMS4yNjUtLjQxMSAxLjQyOS0xLjM1MmMuMTczLS45NzItLjYyNC0xLjE2Ny0uNjI0LTEuMTY3czEuMDQxLS4yMDggMS4xNzItMS4zNzZjLjEyMy0xLjEwMS0uODYxLTEuMzYzLS44NjEtMS4zNjNzLjk3LS40IDEuMDE2LTEuNTM5Yy4wMzgtLjk1OS0uOTk1LTEuNDI4LS45OTUtMS40MjhzNS4wMzgtMS4yMjEgNS41NTYtMS4zNDFjLjUxNi0uMTIgMS4zMi0uNjE1IDEuMDY5LTEuNjk0LS4yNDktMS4wOC0xLjIwNC0xLjExOC0xLjY5Ny0xLjAwMy0uNDk0LjExNS02Ljc0NCAxLjU2Ni04LjkgMi4wNjhsLTEuNDM5LjMzNGMtLjU0LjEyNy0uNzg1LS4xMS0uNDA0LS41MTIuNTA4LS41MzYuODMzLTEuMTI5Ljk0Ni0yLjExMy4xMTktMS4wMzUtLjIzMi0yLjMxMy0uNDMzLTIuODA5LS4zNzQtLjkyMS0xLjAwNS0xLjY0OS0xLjczNC0xLjg5OS0xLjEzNy0uMzktMS45NDUuMzIxLTEuNTQyIDEuNTYxLjYwNCAxLjg1NC4yMDggMy4zNzUtLjgzMyA0LjI5My0yLjQ0OSAyLjE1Ny0zLjU4OCAzLjY5NS0yLjgzIDYuOTczLjgyOCAzLjU3NSA0LjM3NyA1Ljg3NiA3Ljk1MiA1LjA0OGwzLjE1Mi0uNjgxeiIvPjxwYXRoIGZpbGw9IiM2NTQ3MUIiIGQ9Ik05LjI5NiA2LjM1MWMtLjE2NC0uMDg4LS4zMDMtLjIyNC0uMzkxLS4zOTktLjIxNi0uNDI4LS4wNC0uOTI3LjM5My0xLjExMiA0LjI2Ni0xLjgzMSA3LjY5OS0uMDQzIDcuODQzLjAzNC40MzMuMjMxLjYwOC43NDcuMzkxIDEuMTU0LS4yMTYuNDA1LS43NC41NDYtMS4xNzMuMzE4LS4xMjMtLjA2My0yLjgzMi0xLjQzMi02LjI3OC4wNDctLjI1Ny4xMDktLjU0Ny4wODUtLjc4NS0uMDQyem0xMi4xMzUgMy43NWMtLjE1Ni0uMDk4LS4yODYtLjI0My0uMzYyLS40MjQtLjE4Ny0uNDQyLjAyMy0uOTI3LjQ2OC0xLjA4NCA0LjM4MS0xLjUzNiA3LjY4NS40OCA3LjgyMy41NjcuNDE1LjI2LjU1NS43ODcuMzEyIDEuMTc4LS4yNDIuMzktLjc3Ni40OTUtMS4xOTEuMjM4LS4xMi0uMDcyLTIuNzI3LTEuNjIxLTYuMjY3LS4zNzktLjI2Ni4wOTEtLjU1My4wNDYtLjc4My0uMDk2eiIvPjwvc3ZnPg==" title="thinking">  Either way, the
sound seems to start off to our left and end up on our right!</p>
<center>
<audio controls="">
<source src="/sounds/door_pan.wav">
</audio>
</center>
<p>We achieve this effect by adjusting the volume in the left and right channels
separately, so that the left channel starts out at full volume and ends at 0
volume (and <em>vice versa</em> for the right channel).</p>
<p>In particular, if our sound is <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span></span></span></span></span> samples long, then:</p>
<ul>
<li>
<p>We scale the first sample in the right channel by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>, the second by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">1\over {N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.24844em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>, the third by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>2</mn><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">2\over {N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.24844em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>, ... and the last by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>.
<br></p>
</li>
<li>
<p>At the same time, we scale the first sample in the left channel by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>, the second by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mfrac><mn>1</mn><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">1 - \frac{1}{N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.24844em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>, the third by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mfrac><mn>2</mn><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">1-\frac{2}{N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.24844em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>, ... and the last by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>.</p>
</li>
</ul>
<p>Go ahead and implement this as a function <code>pan</code> in your <code>lab.py</code> file.  As with
the functions above, this function should not modify its input; rather, it should
make a brand-new object representing the new sound.  After implementing <code>pan</code>,
your code should pass the first 22 test cases in <code>test.py</code>.</p>
<p>Once you have done so, we'll once again test by applying this function to a
piece of audio.  Try applying this to <code>car.wav</code>, then save the result and
listen to it.  This should be more impressive (or at least more realistic) than
the door example....</p>
<p>When you have that file, upload it below to check for correctness:</p>
<p>
<!--START question pan_example -->
</p><div class="question question-fileupload" id="cs_qdiv_pan_example" style="position: static">
<div id="pan_example_rendered_question">
Left-to-right <code>car.wav</code>:<br><input id="pan_example" name="pan_example" style="display: none" type="file"><button class="btn btn-catsoop" id="pan_example_select_button">Select File</button>&nbsp;<tt><span id="pan_example_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('pan_example_select_button').addEventListener('click', function (){
    document.getElementById("pan_example").click();
});
document.getElementById('pan_example').onchange = function (){
    document.getElementById('pan_example_selected_file').innerText = document.getElementById('pan_example').value;
};
dnd_pan_example = document.getElementById('cs_qdiv_pan_example');
dnd_pan_example.ondragover = dnd_pan_example.ondragenter = function(e){e.preventDefault();};
dnd_pan_example.ondrop = function(e){
    document.getElementById("pan_example").files = e.dataTransfer.files;
    document.getElementById('pan_example').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="pan_example_buttons"></span>
<span id="pan_example_loading_wrapper">
<span id="pan_example_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="pan_example_score_display"></span>
<div class="nsubmits_left" id="pan_example_nsubmits_left"></div></div>
<div id="pan_example_solution_container">
<div id="pan_example_solution">
</div>
<div id="pan_example_solution_explanation">
</div>
</div>
<div id="pan_example_message"></div>
</div>
<!--END question pan_example -->
<p></p>
<p><a class="anchor" name="catsoop_section_6_2"></a><a class="anchor" name="_removing_vocals_from_music"></a></p><h3 class="cs_section_title">6.2) Removing Vocals from Music<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_removing_vocals_from_music">Â§</a></h3><p></p>
<p>As a final example for this lab (unless you are interested to try some of the
<a href="https://py.mit.edu/spring22/labs/lab00#_optional_additional_extensions">optional additional pieces discussed
below</a>!) is a little trick for (kind of) removing vocals from a piece of
music, creating a version of the song that would be appropriate as a backing
track for karaoke night.  This effect will take a stereo sound as input, but it
will produce a mono sound as output.</p>
<p>Our approach is going to seem weird at first, but we will explain why it works
(at least on some pieces of music) in a bit.  For now, we'll describe our
algorithm.  For each sample in the (stereo) input sound, we compute
<code>(left-right)</code>, i.e., the difference between the left and right channels at
that point in time, and use the result as the corresponding sample in the
(mono) output sound.</p>
<p>That might seem like a weird approach to take, but we can hear that the results
are pretty good.  For example, here is a short sample from a song that was
popular before you were born ("Lido Shuffle" by Boz Scaggs):</p>
<center>
<audio controls="">
<source src="/sounds/lido.wav">
</audio>
</center>
<p>And here is the result after applying the algorithm above:</p>
<center>
<audio controls="">
<source src="/sounds/lido2.wav">
</audio>
</center>
<p>Although some of the instruments are a little bit distorted, and some trace of
the vocal track remains, this approach did a pretty good job of removing the
vocals while preserving most everything else.</p>
<p>Indeed, it seems weird that subtracting the left and right channels should
remove vocals!  So how does this work?  And why does it only work on certain
songs?  Well, it comes down to a little bit of a trick of the way songs tend to
be recorded.  Typically, many instruments are recorded so that they favor one
side of the stereo track over the other (for example, the guitar track might be
slightly off to one side, the bass slightly off to the other, and various drums
at various "positions" as well).  By contrast, vocals are often recorded <em>mono</em>
and played equally in both channels.  When we subtract the two, we are removing
everything that is the same in both channels, which often includes the main
vocal track (and often not much else).  However, there are certainly exceptions
to this rule; and, beyond differences in recording technique, certain vocal
effects like <a href="https://en.wikipedia.org/wiki/Reverberation">reverb</a> tend to
introduce differences between the two channels that make this technique less
effective.</p>
<p>Anyway, now would be a good time to go ahead and implement this manipulation
by filling in the definition of the <code>remove_vocals</code> function in <code>lab.py</code>.  As
with all of the previous filters, this function should not modify its input;
rather, it should produce a new sound.  After implementing <code>remove_vocals</code>,
your code should pass all of the test cases in <code>test.py</code>!</p>
<p>Try applying <code>remove_vocals</code> to the sound in <code>lookout_mountain.wav</code>.  If you
listen to the result, how did this method perform on this example?</p>
<p>Save the result as a WAV file and upload it below to be checked for correctness:</p>
<p>
<!--START question vocals_example -->
</p><div class="question question-fileupload" id="cs_qdiv_vocals_example" style="position: static">
<div id="vocals_example_rendered_question">
<code>lookout_mountain.wav</code> after removing vocals:<br><input id="vocals_example" name="vocals_example" style="display: none" type="file"><button class="btn btn-catsoop" id="vocals_example_select_button">Select File</button>&nbsp;<tt><span id="vocals_example_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('vocals_example_select_button').addEventListener('click', function (){
    document.getElementById("vocals_example").click();
});
document.getElementById('vocals_example').onchange = function (){
    document.getElementById('vocals_example_selected_file').innerText = document.getElementById('vocals_example').value;
};
dnd_vocals_example = document.getElementById('cs_qdiv_vocals_example');
dnd_vocals_example.ondragover = dnd_vocals_example.ondragenter = function(e){e.preventDefault();};
dnd_vocals_example.ondrop = function(e){
    document.getElementById("vocals_example").files = e.dataTransfer.files;
    document.getElementById('vocals_example').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="vocals_example_buttons"></span>
<span id="vocals_example_loading_wrapper">
<span id="vocals_example_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="vocals_example_score_display"></span>
<div class="nsubmits_left" id="vocals_example_nsubmits_left"></div></div>
<div id="vocals_example_solution_container">
<div id="vocals_example_solution">
</div>
<div id="vocals_example_solution_explanation">
</div>
</div>
<div id="vocals_example_message"></div>
</div>
<!--END question vocals_example -->
<p></p>
<a class="anchor" name="catsoop_section_7"></a><a class="anchor" name="_code_submission"></a><h2 class="cs_section_title">7) Code Submission<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_code_submission">Â§</a></h2>
<p>When you have tested your code sufficiently on your own machine, submit your
modified <code>lab.py</code> using the <code>submit-009-lab</code> script.  If you haven't already
installed it, see the instructions on <a href="https://py.mit.edu/spring22/info/infrastructure">this page</a>.</p>
<p>The following command should submit the lab, assuming that the last argument
<code>/path/to/lab.py</code> is replaced by the location of your <code>lab.py</code> file:</p>
<pre><code class="language-python3">$ submit-009-lab -a lab00 /path/to/lab.py
</code></pre>
<p>Running that script should submit your file to be checked, and it should also
provide some information about how and where to get feedback about your
submission.  Reloading this page after submitting will also show some
additional information:</p>
<div class="callout callout-note">You have not yet made any submissions to this assignment.</div>
<a class="anchor" name="catsoop_section_8"></a><a class="anchor" name="_checkoff_2"></a><h2 class="cs_section_title">8) Checkoff<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_checkoff_2">Â§</a></h2>
<p>Once you are finished with the code, you will need to come (in person) to any
open lab time and add yourself to the <a href="https://py.mit.edu/spring22/queue">queue</a> asking for a
checkoff in order to receive credit for the lab.  <strong>You must be ready to
discuss your code in detail before asking for a checkoff.</strong></p>
<p>You should be prepared to demonstrate your code (which should be
well-commented, should avoid repetition, and should make good use of helper
functions; see the notes on <a href="https://py.mit.edu/spring22/notes/style">style</a> for more information).
In particular, be prepared to discuss:</p>
<ul>
<li>Your code for <code>backwards</code> and <code>mix</code>.</li>
<li>Your code for <code>convolve</code> and <code>echo</code>.</li>
<li>Your code for <code>pan</code> and <code>remove_vocals</code>.</li>
<li>Your additional code for loading and saving the WAV files from above.</li>
</ul>
<div class="response"><i>You have not yet received this checkoff.</i></div>
<a class="anchor" name="catsoop_section_9"></a><a class="anchor" name="_what_comes_next"></a><h2 class="cs_section_title">9) What Comes Next?<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_what_comes_next">Â§</a></h2>
<p>If you enjoyed the material in this lab, you might be interested to take 6.003
(Signal Processing) at some point.  It covers some of the ideas from this lab
in far more detail, so if you're curious about how filters like the bass-boost
filter can be designed and understood, that may be a good class to take!</p>
<p>You may also be interested, farther down the line, to take a class like 21M.387
(Fundamentals of Music Processing), which applies these and other techniques to
processing of music in particular.</p>
<a class="anchor" name="catsoop_section_10"></a><a class="anchor" name="_optional_additional_extensions"></a><h2 class="cs_section_title">10) (Optional) Additional Extensions<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab00#_optional_additional_extensions">Â§</a></h2>
<p>If you have found this lab interesting, you might be interested in trying some
additional things (and if you do, please feel free to share during the
checkoff!):</p>
<ul>
<li>
<p>Try manipulating your own sounds!  You can use a tool like <a href="https://www.audacityteam.org/">Audacity</a> to
record sounds of your own (or to clip and convert music files)!  Make sure that you save your files as WAV files.  In Audacity, the right option to choose is "WAV (Microsoft) signed 16-bit PCM".</p>
</li>
<li>
<p>Make versions of your mono effects that apply those same effects to stereo sounds (applying the same effect to the left and right channels separately).  Can you implement this without re-writing the core algorithms for reach of the effects?</p>
</li>
<li>
<p>Make a variant of the echo filter that takes advantage of stereo sound by playing subsequent echoes in alternate speakers (first echo on the left, second on the right, and so on) rather than playing them equally in both channels.</p>
</li>
<li>
<p>Make a variant of <code>mix</code> that takes arbitrarily many sounds (and associated mixing parameters) and mixing them <em>all</em> together.</p>
</li>
<li>
<p>Try making a function that speeds up or slows down a given sound (either by manipulating the samples themselves, or the sampling rate).</p>
</li>
</ul>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
catsoop.all_questions = ['reverse_example', 'mix_example', 'q000000', 'bassboost_reverse', 'echo_byhand_1', 'echo_byhand_2', 'echo_example', 'pan_example', 'vocals_example'];
catsoop.username = null;
catsoop.this_path = 'https://py.mit.edu/spring22/labs/lab00';
catsoop.path_info = ['spring22', 'labs', 'lab00'];
catsoop.course = 'spring22';
catsoop.url_root = 'https://py.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

// @license-end</script>
</div>
</div>
<div class="cs_right_menu"></div>
</main>
<footer>
<div class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation"><span class="line"><a href="https://py.mit.edu/spring22">Home</a></span> <span class="cs_nav_separator">/</span> <span class="line"><a href="https://py.mit.edu/spring22/labs/lab00">Lab 0: Audio Processing</a></span></div>
<div class="cs_footer">
      This page was last updated on Friday February 04, 2022 at 08:49:06 AM (revision <code>896bb13ba</code>).<br>&nbsp;<br>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.mit.edu/" target="_blank">CAT-SOOP</a> v2022.2.0.dev19 "Highlander" (development snapshot).<br>
      CAT-SOOP is <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>, available under the terms<br>of the <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
<a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a><br>
<a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</div>
</footer>



</body></html>