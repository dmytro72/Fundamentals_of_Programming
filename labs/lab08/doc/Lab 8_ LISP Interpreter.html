<!DOCTYPE html>
<!-- saved from url=(0038)https://py.mit.edu/spring22/labs/lab08 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP 2022.2.0.dev19.  miau. -->

<title>Lab 8: LISP Interpreter  | 6.009 Spring 2022</title>
<link href="./Lab 8_ LISP Interpreter_files/logo.gif" rel="icon" type="image/gif">
<!-- include catsoop base css -->
<link href="./Lab 8_ LISP Interpreter_files/base.css" rel="stylesheet" type="text/css">
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    window.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu){
       menu.children[1].checked = false;
    }
    // @license-end
    </script>
<!-- load in katex and CAT-SOOP-specific math rendering  -->
<script src="./Lab 8_ LISP Interpreter_files/katex.min.js.stažený soubor" type="text/javascript"></script>
<link href="./Lab 8_ LISP Interpreter_files/katex.min.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.katex_macros = {};
    catsoop.render_math = function (elt) {
        var tex = elt.innerText; // TeX Source
        var display = elt.classList.contains('cs_displaymath');
        try {
            katex.render(tex, elt, {displayMode: display, macros: catsoop.katex_macros});
        }catch(e) {
            console.log(e);
            elt.innerHTML = "<font color='red'><b>Could not parse math:</b> <tt>" + tex + "</tt></font>";
        }
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function (elt){
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while(mathelts.length > 0){
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
          catsoop.render_all_math(document);
    });
    // @license-end
    </script>
<!-- load in diagram stuff -->
<script src="./Lab 8_ LISP Interpreter_files/cs_diagrams.js.stažený soubor" type="text/javascript"></script>
<script type="text/javascript">
        catsoop.diagram_sources = {};
    </script>
<!-- Syntax Highlighting -->
<script src="./Lab 8_ LISP Interpreter_files/highlight.min.js.stažený soubor" type="text/javascript"></script>
<script src="./Lab 8_ LISP Interpreter_files/highlightjs-line-numbers.js.stažený soubor" type="text/javascript"></script><style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    hljs.initHighlightingOnLoad();
    window.addEventListener('DOMContentLoaded', function(){
        document.querySelectorAll('.hl code').forEach((block) => {
            hljs.highlightBlock(block);
        });
        document.querySelectorAll('code.highlight-lines').forEach(function(b){
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0){
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
        });
    });
    // @license-end
    </script>
<style>
      :root {
        --cs-base-bg-color: #039bba;
        --cs-light-bg-color: #62d5ed;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<style>
.cs_top_menu_item {
  font-size: 0.88rem;
}
div.dropdown {
  -moz-transform: translateY(-1px);
}
</style>
<script src="./Lab 8_ LISP Interpreter_files/cs_ajax.js.stažený soubor" type="text/javascript"></script>
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body style="margin: 0px;">
<header id="cs_header">
<div class="nav-container">
<div class="cs_header_text"><a href="https://py.mit.edu/spring22"><img src="./Lab 8_ LISP Interpreter_files/logo.gif">&nbsp;6.009</a></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_84494260bb2b4bc1ef74fe697ea810e0">Information<span class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox" id="cs_menu_84494260bb2b4bc1ef74fe697ea810e0" type="checkbox">
<div class="dropdown-content">
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/basics">Basic Information</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/help">Getting Help</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/grading">Grading Policies</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/academic_integrity">Academic Integrity</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/infrastructure">Infrastructure</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/notes">Course Notes</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/staff">Staff List</a></div></div>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/queue/">Help Queue</a>
<a class="cs_top_menu_item" href="https://discourse6009.mit.edu/">Forum</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/progress">Progress</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/labs/lab08?loginaction=login">Log In</a><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<div class="cs_navigation cs_top_navigation" id="cs_top_navigation"><span class="line"><a href="https://py.mit.edu/spring22">Home</a></span> <span class="cs_nav_separator">/</span> <span class="line"><a href="https://py.mit.edu/spring22/labs/lab08">Lab 8: LISP Interpreter <img alt="🐍" aria-label="snake" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTExLjg0IDcuNjM0Yy0uNzE5IDAtMi4yOTUgMi4yNDMtMy41NjcgMS4wMjktLjQ0LS40MTkgMS44MTgtMS4yNzggMS43MjctMi4wMTctLjA3NS0uNjA3LTIuODQyLTEuNTItMS44NzUtMi4wOTkuOTY3LS41NzggMi40MTguODQxIDMuNTEzLjg2NiAyLjM4Mi4wNTUgNC4yMTItLjg1MyA0LjIzOC0uODY2LjU0MS0uMjc0IDEuMTk1LS4wNTIgMS40NjQuNDk2LjI3LjU0Ny4wNTEgMS4yMTMtLjQ4OCAxLjQ4Ni0uMTMxLjA2Ni0yLjIyNSAxLjEwNS01LjAxMiAxLjEwNXoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMjcuODE4IDM2Yy0zLjk2NyAwLTguMTgyLTIuOTEyLTguMTgyLTguMzA4IDAtMS4zNzQtLjg5LTEuNjYxLTEuNjM3LTEuNjYxLS43NDYgMC0xLjYzNi4yODctMS42MzYgMS42NjEgMCA1LjM5Ni00LjIxNiA4LjMwOC04LjE4MiA4LjMwOFMwIDMzLjIzIDAgMjcuNjkyQzAgMTQuNCAxNC4xODIgMTIuNTY1IDE0LjE4MiAxNC40YzAgMS44MzUtNy42MzYtMS4xMDctNy42MzYgMTIuMTg1IDAgMi4yMTUuODkgMi43NjkgMS42MzYgMi43NjkuNzQ3IDAgMS42MzctLjI4NyAxLjYzNy0xLjY2MSAwLTUuMzk1IDQuMjE1LTguMzA4IDguMTgyLTguMzA4IDMuOTY2IDAgOC4xODIgMi45MTIgOC4xODIgOC4zMDggMCAxLjM3NC44OSAxLjY2MSAxLjYzNyAxLjY2MXMxLjYzNi0uMjg3IDEuNjM2LTEuNjYxVjExLjA3N2MwLTMuODU1LTMuNDE3LTQuNDMxLTUuNDU0LTQuNDMxIDAgMC0zLjI3MiAxLjEwOC02LjU0NSAxLjEwOHMtNC4zNjQtMi41OTYtNC4zNjQtNC40MzFDMTMuMDkxIDEuNDg4IDE3LjQ1NSAwIDI0IDBjNi41NDYgMCAxMiA0LjQ1MSAxMiAxMS4wNzd2MTYuNjE1QzM2IDMzLjA4OCAzMS43ODQgMzYgMjcuODE4IDM2eiIvPjxjaXJjbGUgZmlsbD0iIzI5MkYzMyIgY3g9IjE5IiBjeT0iMyIgcj0iMSIvPjwvc3ZnPg==" title="snake"></a></span></div>
<main class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<div class="cs_page_body">
<center><h1 class="cs_content_header">Lab 8: LISP Interpreter <img alt="🐍" aria-label="snake" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTExLjg0IDcuNjM0Yy0uNzE5IDAtMi4yOTUgMi4yNDMtMy41NjcgMS4wMjktLjQ0LS40MTkgMS44MTgtMS4yNzggMS43MjctMi4wMTctLjA3NS0uNjA3LTIuODQyLTEuNTItMS44NzUtMi4wOTkuOTY3LS41NzggMi40MTguODQxIDMuNTEzLjg2NiAyLjM4Mi4wNTUgNC4yMTItLjg1MyA0LjIzOC0uODY2LjU0MS0uMjc0IDEuMTk1LS4wNTIgMS40NjQuNDk2LjI3LjU0Ny4wNTEgMS4yMTMtLjQ4OCAxLjQ4Ni0uMTMxLjA2Ni0yLjIyNSAxLjEwNS01LjAxMiAxLjEwNXoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMjcuODE4IDM2Yy0zLjk2NyAwLTguMTgyLTIuOTEyLTguMTgyLTguMzA4IDAtMS4zNzQtLjg5LTEuNjYxLTEuNjM3LTEuNjYxLS43NDYgMC0xLjYzNi4yODctMS42MzYgMS42NjEgMCA1LjM5Ni00LjIxNiA4LjMwOC04LjE4MiA4LjMwOFMwIDMzLjIzIDAgMjcuNjkyQzAgMTQuNCAxNC4xODIgMTIuNTY1IDE0LjE4MiAxNC40YzAgMS44MzUtNy42MzYtMS4xMDctNy42MzYgMTIuMTg1IDAgMi4yMTUuODkgMi43NjkgMS42MzYgMi43NjkuNzQ3IDAgMS42MzctLjI4NyAxLjYzNy0xLjY2MSAwLTUuMzk1IDQuMjE1LTguMzA4IDguMTgyLTguMzA4IDMuOTY2IDAgOC4xODIgMi45MTIgOC4xODIgOC4zMDggMCAxLjM3NC44OSAxLjY2MSAxLjYzNyAxLjY2MXMxLjYzNi0uMjg3IDEuNjM2LTEuNjYxVjExLjA3N2MwLTMuODU1LTMuNDE3LTQuNDMxLTUuNDU0LTQuNDMxIDAgMC0zLjI3MiAxLjEwOC02LjU0NSAxLjEwOHMtNC4zNjQtMi41OTYtNC4zNjQtNC40MzFDMTMuMDkxIDEuNDg4IDE3LjQ1NSAwIDI0IDBjNi41NDYgMCAxMiA0LjQ1MSAxMiAxMS4wNzd2MTYuNjE1QzM2IDMzLjA4OCAzMS43ODQgMzYgMjcuODE4IDM2eiIvPjxjaXJjbGUgZmlsbD0iIzI5MkYzMyIgY3g9IjE5IiBjeT0iMyIgcj0iMSIvPjwvc3ZnPg==" title="snake"></h1></center>
<div class="response" id="catsoop_login_box">
<b><center>You are not logged in.</center></b><br>
If you are a current student, please <a href="https://py.mit.edu/spring22/labs/lab08?loginaction=login">Log
In</a> for full access to the web site.<br>Note that this link will take you to
an external site (<tt>https://shimmer.mit.edu</tt>) to authenticate, and then you will be redirected
back to this page.
</div>
<h2>Table of Contents</h2><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_preparation">1) Preparation</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_introduction">2) Introduction</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_lisp_and_carlae">2.1) LISP and Carlae</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_interpreter_design">3) Interpreter Design</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_tokenizer">4) Tokenizer</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_parser">5) Parser</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_examples">5.1) Examples</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_evaluator">6) Evaluator</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_evaluator_1_calculator">6.1)  Evaluator 1: Calculator</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_testing_your_code_repl">6.1.1) Testing Your Code: REPL</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_additional_operations">6.2) Additional Operations</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_adding_support_for_variables">6.3) Adding Support for Variables</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_environments">6.4) Environments</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_environments_example">6.4.1) Environments: Example</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_environments_initial_structure">6.4.2) Environments: Initial Structure</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_evaluator_changes">6.5) Evaluator Changes</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_changes_to_evaluate">6.5.1) Changes to <code>evaluate</code></a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_examples_2">6.5.2) Examples</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_environments_test_cases_and_the_repl">6.6) Environments, Test Cases, and the REPL</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_repl">6.6.1) REPL</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_adding_support_for_functions">6.7) Adding Support for Functions</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_defining_functions">6.7.1) Defining functions</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_calling_functions">6.7.2) Calling Functions</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_examples_3" label="function_examples">6.7.3) Examples</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_changes_to_evaluate_2">6.7.4) Changes to <code>evaluate</code></a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_easier_function_definitions">6.7.5) Easier Function Definitions</a></li></ul></ul><li><a href="https://py.mit.edu/spring22/labs/lab08#_endnotes">7) Endnotes</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_code_submission">8) Code Submission</a></li><li><a href="https://py.mit.edu/spring22/labs/lab08#_checkoff">9) Checkoff</a></li></ul>
<a class="anchor" name="catsoop_section_1"></a><a class="anchor" name="_preparation"></a><h2 class="cs_section_title">1) Preparation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_preparation">§</a></h2>
<p>This lab assumes you have Python 3.6 or later installed on your machine (3.10
recommended).</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="lab08.zip" href="https://py.mit.edu/spring22/lab_distribution.zip?path=%5B%22spring22%22%2C+%22labs%22%2C+%22lab08%22%5D"><tt>lab08.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit at the
end of this lab.  Importantly, you should not add any imports to the file.</p>
<p>You can also see and participate in online discussion about this lab in the <a href="https://py.mit.edu/forum/c/labs" target="_blank">"Labs"
Category</a> in the forum.</p>
<p>This lab is worth a total of 4 points.</p>
<p><strong>All questions on this page (including your code submission) are due at 5pm Eastern on
Friday, 15 April.  However, you are <em>strongly</em> encouraged to start this lab early.</strong></p>
<div class="callout callout-warning"><div class="callout-title">Your Checkoff This Week</div>
<p>You are not logged in.  Please log in to see information about your checkoff for this lab.</p>
</div>
<div class="callout callout-error"><div class="callout-title">Please Start Early</div>
<p>You are <strong>strongly</strong> encouraged to start this lab early if possible.</p>
</div>
<div class="callout callout-error"><div class="callout-title">Reminder: Academic Integrity</div>
<p>Please also review the <a href="https://py.mit.edu/spring22/info/academic_integrity">academic integrity policies</a> before
continuing.  In particular, <strong>note that you are not allowed to use any code
other than that which you have written yourself, including code from online sources.</strong></p>
</div>
<a class="anchor" name="catsoop_section_2"></a><a class="anchor" name="_introduction"></a><h2 class="cs_section_title">2) Introduction<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_introduction">§</a></h2>
<p>Throughout 6.009, we have spent a lot of time discussing the behind-the-scenes
operation of Python through environment diagrams.  But you may have wondered
along the way: how does Python actually <em>do</em> those things?  <em>What</em> is actually
doing them?  It turns out that the thing doing that work is another program!
In particular, a program called CPython, the Python interpreter, is responsible
for interpreting your programs' source code and actually implementing the
corresponding behaviors.</p>
<p>In this lab, we'll explore this idea even further by implementing our own
interpreter for a dialect of
<a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29" target="_blank">LISP</a>,
one of the earliest high-level programming languages, and one with a strong historical connection to MIT (LISP was invented by John
McCarthy at MIT in 1958, and the Scheme dialect of LISP was used in MIT's introductory programming subject from ~1975-2007<a class="anchor" name="catsoop_footnote_ref_1"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_1"><sup>1</sup></a>!).</p>
<p>The LISP dialect we'll implement in this lab will be similar to Python in many
ways, but in some ways it will be a bit smaller; so we'll call it <em>carlae</em>
(after <a href="https://en.wikipedia.org/wiki/Barbados_threadsnake"><em>Tetracheilostoma
carlae</em></a>, the world's
smallest snake).</p>
<p>Its syntax is simpler than Python's, and the complete interpreter will fit in a
single Python file.  However, despite its small size, the language we will
implement here will be powerful!  We will end up implementing a large portion of
the environment model we have been discussing, and our little language will actually be
<a href="https://en.wikipedia.org/wiki/Turing_completeness" target="_blank">Turing-complete</a>,
i.e., in theory, it will be able to solve any possible computational problem
(so it would be possible, for example, to use it to write implementations of any of
the labs we have done so far in 6.009!).</p>
<p><a class="anchor" name="catsoop_section_2_1"></a><a class="anchor" name="_lisp_and_carlae"></a></p><h3 class="cs_section_title">2.1) LISP and Carlae<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_lisp_and_carlae">§</a></h3><p></p>
<p>As with most LISP dialects, the syntax of <em>carlae</em> is far simpler than that of
Python.  All-in-all, we can define the syntax of <em>carlae</em> as follows:</p>
<ul>
<li>Numbers (e.g., <code>1</code>) and symbols (things like variable names, e.g., <code>x</code>)
are called <em>atomic expressions</em>; they cannot be broken into pieces.
These are similar to their Python counterparts, except that in <em>carlae</em>,
operators such as <code>+</code> and <code>&gt;</code> are symbols, too, and are treated the same
way as <code>x</code> and <code>fib</code>.</li>
<li>Everything else is an <a href="https://en.wikipedia.org/wiki/S-expression" target="_blank">S-expression</a>:
an opening round bracket <code>(</code>, followed by zero or more expressions,
followed by a closing round bracket <code>)</code>. The first subexpression determines
what the S-expression means:
<ul>
<li>An S-expression starting with a keyword, e.g. <code>(function ...)</code>, is a <em>special
form</em>; the meaning depends on the keyword.  For this lab, we will only have two keywords: <code>function</code> (for creating function objects) and <code>:=</code> (for defining variables).  In next week's lab, though, we will add more keywords and special forms.</li>
<li>An S-expression starting with a non-keyword, e.g. <code>(fib ...)</code>, is a
function call, where the first element in the expression is the function
to be called<a class="anchor" name="catsoop_footnote_ref_2"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_2"><sup>2</sup></a>, and the remaining subexpressions represent the arguments to
that function.</li>
</ul>
</li>
</ul>
<p>And that's it!  The whole syntax is described by the two bullet points above.
For example, consider the following definition of a function that computes
Fibonacci numbers in Python:</p>
<pre><code class="language-py hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fib</span>(<span class="hljs-params">n</span>):</span>
    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> n
    <span class="hljs-keyword">return</span> fib(n<span class="hljs-number">-1</span>) + fib(n<span class="hljs-number">-2</span>)
</code></pre>
<p>We could write an equivalent program in <em>carlae</em>:</p>
<pre><code class="language-scheme">(:= (fib n)
    (if (&lt;= n 1)
      n
      (+ (fib (- n 1)) (fib (- n 2)))
    )
  )
</code></pre>
<p>Here is a brief example of an interaction with a <em>carlae</em> interpreter that
demonstrates a few more examples of the structure of the language:</p>
<pre><code class="nohighlight">&gt; (+ 3 2)

  =&gt; 5


&gt; (:= (square x) (* x x))

  =&gt; (function (x) (* x x))


&gt; (:= (fourthpower x) (square (square x)))

  =&gt; (function (x) (square (square x)))


&gt; (fourthpower 1.1)

  =&gt; 1.4641000000000004


&gt; (+ 3 (- 7 8))

  =&gt; 2
</code></pre>
<p>There are a couple of key syntactic differences from Python:</p>
<ul>
<li><em>carlae</em> consists only of expressions, with no statements.  Every expression evaluates to a value.</li>
<li><em>carlae</em> uses prefix notation, e.g., <code>(+ 3 2)</code> instead of <code>3 + 2</code>.</li>
<li><em>carlae</em>'s syntax is simpler but consists of a lot more parentheses.</li>
</ul>
<p>Using so many parentheses might take some getting used to, but it helps to keep
the language simple and consistent.  Some people have joked that LISP stands
for "Lots of Insipid and Silly Parentheses," though some might argue instead
that it stands for "LISP Is Syntactically Pure." <code>:)</code></p>
<center>
<img src="./Lab 8_ LISP Interpreter_files/lisp_cycles.png"><br><small>from <a href="https://xkcd.com/297/" target="_blank">XKCD</a></small>
</center>
<a class="anchor" name="catsoop_section_3"></a><a class="anchor" name="_interpreter_design"></a><h2 class="cs_section_title">3) Interpreter Design<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_interpreter_design">§</a></h2>
<p>Despite its small size, the interpreter for <em>carlae</em> will still be rather
complicated.  To help manage this complexity, we'll start with a very small
language, and we'll gradually add functionality until we have a fully featured
language.  As with most interpreters, our <em>carlae</em> interpreter
will consist of three parts:</p>
<ul>
<li>A <em>tokenizer</em>, which takes a string as input and produces a list of <em>tokens</em>,
which represent meaningful units in the syntax of the programming language.</li>
<li>A <em>parser</em>, which takes the output of the tokenizer as input and produces a
structured representation of the program as its output.</li>
<li>An <em>evaluator</em>, which takes the output of the parser as input and actually
handles running the program.</li>
</ul>
<a class="anchor" name="catsoop_section_4"></a><a class="anchor" name="_tokenizer"></a><h2 class="cs_section_title">4) Tokenizer<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_tokenizer">§</a></h2>
<p>Our first job is <em>tokenizing</em>.  In <em>carlae</em>, we'll have exactly
three kinds of tokens: opening round brackets <code>(</code>, closing round brackets <code>)</code>,
and everything else.  Each token is separated by whitespace (either spaces or the special "newline" character <code>'\n'</code>).  Your first task for the lab is
to write a function called <code>tokenize</code>, which takes a single string representing
a program as its input and outputs a list of tokens.  For example, calling
<code>tokenize("(foo (bar 3.14))")</code> should give us the following result: <code>['(',
'foo', '(', 'bar', '3.14', ')', ')']</code>.  Note that at this point, all of our tokens
should be strings.</p>
<p>Unlike in Python, indentation does not matter, so, for example, the <code>tokenize</code>
function should produce exactly the same output for both of the following
programs:</p>
<pre><code class="nohighlight">(:= circle-area
  (function (r)
    (* 3.14 (* r r))
  )
)
</code></pre>
<pre><code class="nohighlight">(:= circle-area (function (r) (* 3.14 (* r r))))
</code></pre>
<p>Your <code>tokenize</code> function should also handle comments.  A comment in <em>carlae</em> is
prefixed with a octothorpe (<code>#</code>), just like in
Python.  If a line contains a octothorpe, the <code>tokenize</code> function should not
consider that octothorpe or the characters that follow it on that line to be
part of the input program<a class="anchor" name="catsoop_footnote_ref_3"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_3"><sup>3</sup></a>.</p>
<p>
<!--START question q000000 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000000" style="position: static">
<div id="q000000_rendered_question">
What should be the result of <code>tokenize("(cat (dog (tomato)))")</code>?<br><input id="q000000" name="q000000" size="50" type="text" value="">
</div><div>
<span id="q000000_buttons"></span>
<span id="q000000_loading_wrapper">
<span id="q000000_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000000_score_display"></span>
<div class="nsubmits_left" id="q000000_nsubmits_left"></div></div>
<div id="q000000_solution_container">
<div id="q000000_solution">
</div>
<div id="q000000_solution_explanation">
</div>
</div>
<div id="q000000_message"></div>
</div>
<!--END question q000000 -->
<p></p>
<p>
<!--START question tokenize2 -->
</p><div class="question question-pythonic" id="cs_qdiv_tokenize2" style="position: static">
<div id="tokenize2_rendered_question">
<p>What should be the result of tokenizing the following expression?</p>
<pre><code class="nohighlight">#add the numbers 2 and 3
(+ # this expression
 2     # spans multiple
 3  # lines

)
</code></pre>
<br>
<input id="tokenize2" name="tokenize2" size="50" type="text" value="">
</div><div>
<span id="tokenize2_buttons"></span>
<span id="tokenize2_loading_wrapper">
<span id="tokenize2_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="tokenize2_score_display"></span>
<div class="nsubmits_left" id="tokenize2_nsubmits_left"></div></div>
<div id="tokenize2_solution_container">
<div id="tokenize2_solution">
</div>
<div id="tokenize2_solution_explanation">
</div>
</div>
<div id="tokenize2_message"></div>
</div>
<!--END question tokenize2 -->
<p></p>
<div class="question"><b>Check Yourself:</b><p>Note that this is similar in many ways to the tokenizer we wrote as part of lab
7.  What are the key similarities and key differences?  How can we modify that
tokenizer to work in this context?</p><p><span id="queue_checkyourself_1"></span></p></div>
<p>Implement the <code>tokenize</code> function in <code>lab.py</code>.  Note that, while doing so, you
may find some of the methods of the <a href="https://docs.python.org/3/library/stdtypes.html#textseq">built-in <code>str</code> type</a> useful.</p>
<a class="anchor" name="catsoop_section_5"></a><a class="anchor" name="_parser"></a><h2 class="cs_section_title">5) Parser<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_parser">§</a></h2>
<p>Our next job is <em>parsing</em> the list of tokens into an <em>abstract syntax tree</em>, a
structured representation of the expression to be evaluated.  Implement the
<code>parse</code> function in <code>lab.py</code>.  <code>parse</code> should take a single input (a list of
tokens as produced by <code>tokenize</code>) and should output a representation of the
expression, where:</p>
<ul>
<li>A number is represented according to its Python type (i.e., integers as <code>int</code> and decimals as <code>float</code>).</li>
<li>A symbol is represented as a string.</li>
<li>An S-expression is represented as a list of its parsed subexpressions.</li>
</ul>
<p>For example, the program above that defined <code>circle-area</code> should parse as
follows:</p>
<pre><code class="language-py hljs python">[<span class="hljs-string">':='</span>, <span class="hljs-string">'circle-area'</span>, [<span class="hljs-string">'function'</span>, [<span class="hljs-string">'r'</span>], [<span class="hljs-string">'*'</span>, <span class="hljs-number">3.14</span>, [<span class="hljs-string">'*'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-string">'r'</span>]]]]
</code></pre>
<p>Note that the syntax of this language is similar to that of the little language
we created for symbolic algebra in the previous lab, and so it might be a good
idea to structure your parser for this lab in a similar fashion.  One key
difference between the two languages is that, while our symbolic algebra
language always had exactly two subexpressions to parse inside of parentheses,
S-expressions can contain arbitrarily many subexpressions.  Another is that we
will handle malformed input graciously; in particular, in the case that
parentheses are mismatched in the input, the function should raise a
<code>CarlaeSyntaxError</code>.</p>
<p><strong>Your code in this lab (including <code>parse</code>) should not use Python's built-in
<code>eval</code> or <code>exec</code> functions.</strong></p>
<p>Note that we have also provided a function <code>number_or_symbol</code> in <code>lab.py</code>,
which you can use to check whether a given string represents a number and to
convert to the appropriate type if necessary.  This function may be useful when
thinking about differentiating between symbols and numbers in your parser.</p>
<p>You may also find the following questions helpful before jumping in to your
implementation (and you may even want to encode these, or similar examples, as
doctests in your code).</p>
<p><a class="anchor" name="catsoop_section_5_1"></a><a class="anchor" name="_examples"></a></p><h3 class="cs_section_title">5.1) Examples<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_examples">§</a></h3><p></p>
<p>
<!--START question q000001 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000001" style="position: static">
<div id="q000001_rendered_question">
What should be the result of calling <code>parse</code> on the output from the first concept question above?<br><input id="q000001" name="q000001" size="50" type="text" value="">
</div><div>
<span id="q000001_buttons"></span>
<span id="q000001_loading_wrapper">
<span id="q000001_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000001_score_display"></span>
<div class="nsubmits_left" id="q000001_nsubmits_left"></div></div>
<div id="q000001_solution_container">
<div id="q000001_solution">
</div>
<div id="q000001_solution_explanation">
</div>
</div>
<div id="q000001_message"></div>
</div>
<!--END question q000001 -->
<p></p>
<p>
<!--START question parse2 -->
</p><div class="question question-pythonic" id="cs_qdiv_parse2" style="position: static">
<div id="parse2_rendered_question">
What should be the result of calling <span class="hl"><code class="lang-py hljs python">parse([<span class="hljs-string">'2'</span>])</code></span>?<br><input id="parse2" name="parse2" size="50" type="text" value="">
</div><div>
<span id="parse2_buttons"></span>
<span id="parse2_loading_wrapper">
<span id="parse2_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="parse2_score_display"></span>
<div class="nsubmits_left" id="parse2_nsubmits_left"></div></div>
<div id="parse2_solution_container">
<div id="parse2_solution">
</div>
<div id="parse2_solution_explanation">
</div>
</div>
<div id="parse2_message"></div>
</div>
<!--END question parse2 -->
<p></p>
<p>
<!--START question parse3 -->
</p><div class="question question-pythonic" id="cs_qdiv_parse3" style="position: static">
<div id="parse3_rendered_question">
What should be the result of calling <span class="hl"><code class="lang-py hljs python">parse([<span class="hljs-string">'x'</span>])</code></span>?<br><input id="parse3" name="parse3" size="50" type="text" value="">
</div><div>
<span id="parse3_buttons"></span>
<span id="parse3_loading_wrapper">
<span id="parse3_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="parse3_score_display"></span>
<div class="nsubmits_left" id="parse3_nsubmits_left"></div></div>
<div id="parse3_solution_container">
<div id="parse3_solution">
</div>
<div id="parse3_solution_explanation">
</div>
</div>
<div id="parse3_message"></div>
</div>
<!--END question parse3 -->
<p></p>
<p>
<!--START question parse4 -->
</p><div class="question question-pythonic" id="cs_qdiv_parse4" style="position: static">
<div id="parse4_rendered_question">
What should be the result of calling <span class="hl"><code class="lang-py hljs python">parse([<span class="hljs-string">'('</span>, <span class="hljs-string">'+'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'('</span>, <span class="hljs-string">'-'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">')'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">')'</span>])</code></span>?<br><input id="parse4" name="parse4" size="50" type="text" value="">
</div><div>
<span id="parse4_buttons"></span>
<span id="parse4_loading_wrapper">
<span id="parse4_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="parse4_score_display"></span>
<div class="nsubmits_left" id="parse4_nsubmits_left"></div></div>
<div id="parse4_solution_container">
<div id="parse4_solution">
</div>
<div id="parse4_solution_explanation">
</div>
</div>
<div id="parse4_message"></div>
</div>
<!--END question parse4 -->
<p></p>
<a class="anchor" name="catsoop_section_6"></a><a class="anchor" name="_evaluator"></a><h2 class="cs_section_title">6) Evaluator<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_evaluator">§</a></h2>
<blockquote>
<i>"How do you eat a big pizza?  One little bite at at time..."</i><br>
-Anonymous
</blockquote>
<p>After parsing, we have the program in a form that is (relatively) easy to work
with, and we can move on to implementing the <em>evaluator</em>, which will handle
actually running the program.  This part of the interpreter will get fairly
complicated, so we will start small and add in more pieces later.  We will make
several "false steps" along the way, where we'll need to make modifications to
pieces we had implemented earlier.</p>
<p><strong>Because of this, it will be useful to save backups of your <code>lab.py</code> file
after every major modification (maybe every time you get some new test cases to
pass or every time you finish a new piece of functionality), so that if
something goes wrong, you can revert to a working copy.</strong></p>
<p>Note that you can also submit your lab code as many times as you like, and that
you can use this page to access files that you had previously submitted, so that
can serve as another way to back up your work.</p>
<p><a class="anchor" name="catsoop_section_6_1"></a><a class="anchor" name="_evaluator_1_calculator"></a></p><h3 class="cs_section_title">6.1)  Evaluator 1: Calculator<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_evaluator_1_calculator">§</a></h3><p></p>
<p>We'll hold off on implementing variables, lists, conditionals, and functions
for a little while; for now, we'll start by implementing a small calculator
that can handle the <code>+</code> and <code>-</code> operations.</p>
<p>Note that we have provided a dictionary called <code>carlae_builtins</code> in <code>lab.py</code>,
which maps the names <code>+</code> and <code>-</code> to functions.  Each of these functions takes a
list as an argument and returns the appropriate value.  Look at the
<code>carlae_builtins</code> dictionary to get a sense of the form of those functions.</p>
<p>Define a function <code>evaluate</code>, which takes as its sole input an expression of
the same form as the parser's output.  <code>evaluate</code> should return the value of
the expression:</p>
<ul>
<li>If the expression is a symbol representing a name in <code>carlae_builtins</code>, it should
return the associated object.</li>
<li>If the expression is a number, it should return that number.</li>
<li>If the expression is a list (representing an S-expression), each of the
elements in the list should be evaluated, and the result of evaluating the
first element (a function) should be called with the remaining elements
passed in as arguments<a class="anchor" name="catsoop_footnote_ref_4"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_4"><sup>4</sup></a>.  The overall result of evaluating such a function is the return
value of that function call.</li>
<li>If the expression is a symbol that is not in <code>carlae_builtins</code>, it should raise a <code>CarlaeNameError</code>.  Or, if it is a list
whose first element is not a valid function, it should raise a <code>CarlaeEvaluationError</code><a class="anchor" name="catsoop_footnote_ref_5"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_5"><sup>5</sup></a>.</li>
</ul>
<p>For example:</p>
<ul>
<li><span class="hl"><code class="lang-py hljs python">evaluate(<span class="hljs-string">'+'</span>)</code></span> should return the function object associated with addition.</li>
<li><span class="hl"><code class="lang-py hljs python">evaluate(<span class="hljs-number">3.14</span>)</code></span> should return <code>3.14</code>.</li>
<li><span class="hl"><code class="lang-py hljs python">evaluate([<span class="hljs-string">'+'</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>])</code></span>, which corresponds to <code>(+ 3 7 2)</code>, should return <code>12</code> (i.e., the result of calling the <code>+</code> function on the given arguments).</li>
</ul>
<p>Note that this should work for nested expressions as well.  <span class="hl"><code class="lang-py hljs python">evaluate([<span class="hljs-string">'+'</span>, <span class="hljs-number">3</span>, [<span class="hljs-string">'-'</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>]])</code></span>, which corresponds to <code>(+ 3 (- 7 5))</code>, should return <code>5</code>.</p>
<p>Implement the <code>evaluate</code> function in <code>lab.py</code> according to the rules above.</p>
<p><a class="anchor" name="catsoop_section_6_1_1"></a><a class="anchor" name="_testing_your_code_repl"></a></p><h4 class="cs_section_title">6.1.1) Testing Your Code: REPL<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_testing_your_code_repl">§</a></h4><p></p>
<p>It is kind of a pain to have to type out all of the arguments to <code>evaluate</code>
each time we call it.</p>
<p>As such, we'll implement a REPL (a "<strong>R</strong>ead, <strong>E</strong>valuate, <strong>P</strong>rint
<strong>L</strong>oop") for <em>carlae</em>.  A REPL has a simple job: it continually prompts the
user for input until they type <code>EXIT</code>.  Until then, it:</p>
<ul>
<li>accepts input from the user,</li>
<li>tokenizes and parses it,</li>
<li>evaluates it, and</li>
<li>prints the result.</li>
</ul>
<p>If an error occurs during any of these steps, an error message should be
displayed, and that expression may be ignored, but the program should not exit.</p>
<p>To implement the REPL, we can make use of Python's built-in <code>input</code> function.
<code>input</code> takes an argument representing a prompt to be displayed to the user and
returns the string that they type (it is returned when they hit enter).  If an
exception occurs during that evaluation, you should report the error, but your
REPL should not stop (i.e., it should move on to asking for the next expression
to be evaluated rather than erroring out).</p>
<p>The following shows one possible interaction with a REPL, with a particular
prompt and output formatting (you are welcome to use whatever formatting you
like!):</p>
<pre><code class="nohighlight">in&gt; (+ 2 3)
  out&gt; 5

in&gt; (+ 2 (- 3 4))
  out&gt; 1

in&gt; (- 3.14 1.14 1)
  out&gt; 1.0000000000000004

in&gt; (+ 2 (- 3 4 5))
  out&gt; -4

in&gt; EXIT
</code></pre>
<p>Note that your REPL only needs to handle one-line inputs.  You do not need to
handle the case of a multiline expression being entered through the REPL.</p>
<p>Implement a REPL for <em>carlae</em> and use it to test your evaluator.  <strong>The REPL
can/should be one of your main means of testing moving forward</strong>; feel free to
try things out using the REPL as you work through the remainder of the lab.
The functionality of your REPL will not be tested automatically; rather, it
will be tested during the checkoff.  The REPL should only start when the lab is
run directly, not when <code>lab.py</code> is imported from another script.</p>
<p><a class="anchor" name="catsoop_section_6_2"></a><a class="anchor" name="_additional_operations"></a></p><h3 class="cs_section_title">6.2) Additional Operations<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_additional_operations">§</a></h3><p></p>
<p>Implement two new operations: <code>*</code> and <code>/</code>:</p>
<ul>
<li><code>*</code> should take arbitrarily many arguments and should return the product of
all its arguments.</li>
<li><code>/</code> should take arbitrarily many arguments.  It should return the result of
successively dividing the first argument by the remaining arguments<a class="anchor" name="catsoop_footnote_ref_6"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_6"><sup>6</sup></a>.
</li>
</ul>
<p>(<em>Hint:</em> where can you put these operations so that they are usable by the interpreter?)</p>
<p>After implementing the evaluator and the <code>*</code> and <code>/</code> operations, try them out
in the REPL.</p>
<p><a class="anchor" name="catsoop_section_6_3"></a><a class="anchor" name="_adding_support_for_variables"></a></p><h3 class="cs_section_title">6.3) Adding Support for Variables<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_adding_support_for_variables">§</a></h3><p></p>
<p>Next, we will implement our first special form: <em>variable definition</em> using the
<code>:=</code> keyword (you may wish to read this section and section 6.4 in their
entirety before implementing this behavior).</p>
<p>A variable definition has the following syntax: <code>(:= NAME EXPR)</code>, where
<code>NAME</code> is a symbol and <code>EXPR</code> is an arbitrary expression.  When <em>carlae</em>
evaluates a <code>:=</code> expression, it should associate the name <code>NAME</code> with the
value that results from evaluating <code>EXPR</code>.  In addition, the <code>:=</code>
expression should evaluate to the result of evaluating <code>EXPR</code><a class="anchor" name="catsoop_footnote_ref_7"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_7"><sup>7</sup></a>.</p>
<p>The following transcript shows an example interaction using the <code>:=</code>
keyword:</p>
<pre><code class="nohighlight">in&gt; (:= pi 3.14)
  out&gt; 3.14

in&gt; (:= radius 2)
  out&gt; 2

in&gt; (* pi radius radius)
  out&gt; 12.56

in&gt; EXIT
</code></pre>
<p>Note that <code>:=</code> differs from the function calls we saw earlier.  It is a
<em>special form</em> that does not evaluate the name that follows it; it only
evaluates the expression that follows the name.  As such, we will have to treat
it differently from a normal function call.</p>
<p>In addition, in order to think about how to implement <code>:=</code>, we will need to
talk about the notion of <em>environments</em>.</p>
<p><a class="anchor" name="catsoop_section_6_4"></a><a class="anchor" name="_environments"></a></p><h3 class="cs_section_title">6.4) Environments<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_environments">§</a></h3><p></p>
<p>Admitting variable definition into our language means that we need to be, in
some sense, more careful with the process by which expressions are evaluated.
We will handle the complexity associated with variable definition by
maintaining structures called <em>environments</em>.  An environment consists of
bindings from variable names to values, and possibly a parent environment, from
which other bindings are inherited.  One can look up a name in an environment,
and one can bind names to values in an environment.</p>
<p>The environment is crucial to the evaluation process, because it determines the
context in which an expression should be evaluated.  Indeed, one could say that
expressions in a programming language do not, in themselves, have any meanings.
Rather, an expression acquires a meaning only with respect to some environment
in which it is evaluated.  Even the interpretation of an expression as
straightforward as <code>(+ 1 1)</code> depends on an understanding that one is operating
in a context in which + is the symbol for addition.  Thus, in our model of
evaluation we will always speak of evaluating an expression <em>with respect to
some environment</em>.</p>
<p>To describe interactions with the interpreter, we will suppose that there is a
"built-in" environment, consisting of bindings of the names of built-in functions
and constants to their associated values.  For example, the idea that <code>+</code> is
the symbol for addition is captured by saying that the symbol <code>+</code> is bound in
this environment to the primitive addition procedure we defined above.  The global
environment will have this environment as its parent.</p>
<p>One necessary operation on environments is looking up the value to which a
given name is bound.  To do this, we can follow these steps:</p>
<ul>
<li>If the name has a binding in the environment, that value is returned.</li>
<li>If the name does not have a binding in the environment and the environment
has a parent, we look up the name in the parent environment (following these
same steps).</li>
<li>If the name does not have a binding in the environment and the environment
does not have a parent, a <code>CarlaeNameError</code> is raised.</li>
</ul>
<p>Note that looking up a name in an environment is similar to looking up a key in
a dictionary, except that if the key is not found, we continue looking in
parent environments until we find the key or we run out of parents to look in.</p>
<p>In order to make variables work properly, you will need to implement the kind
of lookup described above in Python.  To this end, <strong>you should create a class
to represent environments</strong>.</p>
<div class="question"><b>Check Yourself:</b><p></p><p>What information should be stored as instance attributes of this class?  What
kind of methods should the class support?
</p><p></p><p><span id="queue_checkyourself_2"></span></p></div>
<p>It is up to you to decide how exactly to implement environments and the
associated lookups within this structure.  Details of your implementation will
not be tested directly by the automatic checker; rather, your implementation
will be tested by looking at the end-to-end behavior of your evaluator.
Regardless of the details of your implementation, <strong>you should make sure your
environment representation can handle variables with arbitrary names</strong> (i.e.,
any sequence of characters that doesn't represent a number and that doesn't
contain parentheses or spaces should be treated as a variable name), and <strong>you
should be prepared to discuss your implementation during the checkoff</strong>.</p>
<p><a class="anchor" name="catsoop_section_6_4_1"></a><a class="anchor" name="_environments_example"></a></p><h4 class="cs_section_title">6.4.1) Environments: Example<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_environments_example">§</a></h4><p></p>
<p>The following shows an example of an environment structure, where arrows
indicate each environment's parent, if any.  Here we have four environments
(each of which might be an instance of the class you created to represent
environments), labeled <strong>E1</strong>, <strong>E2</strong>, <strong>E3</strong>, and <strong>E4</strong>.  Both <strong>E2</strong> and
<strong>E3</strong> have <strong>E1</strong> as a parent environment, and <strong>E4</strong> has <strong>E3</strong> as a parent
environment.  <strong>E1</strong> does not have a parent environment.</p>
<center>
<img src="./Lab 8_ LISP Interpreter_files/env1.png" style="width: 3in">
</center>
<p>We say that the values <code>x</code>, <code>y</code>, and <code>z</code> are <em>bound</em> in <strong>E1</strong>.  Note that <code>x</code>
and <code>y</code> are bound in <strong>E2</strong>, <code>x</code> is bound in <strong>E3</strong>, and <code>a</code> is bound in
<strong>E4</strong>.  Looking up a name, we work our way up the arrows until we find the
name we are looking for.  For example, looking up <code>a</code> in <strong>E4</strong> gives us the
value <code>1</code>, and looking up <code>z</code> in <strong>E4</strong> gives us <code>5</code>.</p>
<p>Notice that, as was mentioned above, the environment is crucial for determining
the result of an expression.</p>
<p>
<!--START question q000002 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000002" style="position: static">
<div id="q000002_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E1</strong>?<br><input id="q000002" name="q000002" size="50" type="text" value="">
</div><div>
<span id="q000002_buttons"></span>
<span id="q000002_loading_wrapper">
<span id="q000002_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000002_score_display"></span>
<div class="nsubmits_left" id="q000002_nsubmits_left"></div></div>
<div id="q000002_solution_container">
<div id="q000002_solution">
</div>
<div id="q000002_solution_explanation">
</div>
</div>
<div id="q000002_message"></div>
</div>
<!--END question q000002 -->
<p></p>
<p>
<!--START question q000003 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000003" style="position: static">
<div id="q000003_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E2</strong>?<br><input id="q000003" name="q000003" size="50" type="text" value="">
</div><div>
<span id="q000003_buttons"></span>
<span id="q000003_loading_wrapper">
<span id="q000003_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000003_score_display"></span>
<div class="nsubmits_left" id="q000003_nsubmits_left"></div></div>
<div id="q000003_solution_container">
<div id="q000003_solution">
</div>
<div id="q000003_solution_explanation">
</div>
</div>
<div id="q000003_message"></div>
</div>
<!--END question q000003 -->
<p></p>
<p>
<!--START question q000004 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000004" style="position: static">
<div id="q000004_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E3</strong>?<br><input id="q000004" name="q000004" size="50" type="text" value="">
</div><div>
<span id="q000004_buttons"></span>
<span id="q000004_loading_wrapper">
<span id="q000004_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000004_score_display"></span>
<div class="nsubmits_left" id="q000004_nsubmits_left"></div></div>
<div id="q000004_solution_container">
<div id="q000004_solution">
</div>
<div id="q000004_solution_explanation">
</div>
</div>
<div id="q000004_message"></div>
</div>
<!--END question q000004 -->
<p></p>
<p>
<!--START question q000005 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000005" style="position: static">
<div id="q000005_rendered_question">
What is the result of evaluating <code>x</code> in <strong>E4</strong>?<br><input id="q000005" name="q000005" size="50" type="text" value="">
</div><div>
<span id="q000005_buttons"></span>
<span id="q000005_loading_wrapper">
<span id="q000005_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000005_score_display"></span>
<div class="nsubmits_left" id="q000005_nsubmits_left"></div></div>
<div id="q000005_solution_container">
<div id="q000005_solution">
</div>
<div id="q000005_solution_explanation">
</div>
</div>
<div id="q000005_message"></div>
</div>
<!--END question q000005 -->
<p></p>
<p>Also note that the <code>:=</code> keyword always operates directly on the environment
in which it is evaluated.  If we were to evaluate <code>(:= y 8)</code> in <strong>E4</strong>,
this would result in a new binding inside of <strong>E4</strong> (without affecting the
parent environments):</p>
<center>
<img src="./Lab 8_ LISP Interpreter_files/env2.png" style="width: 3in">
</center>
<p>Answer the following questions about variable lookup in this updated
environment:</p>
<p>
<!--START question q000006 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000006" style="position: static">
<div id="q000006_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E1</strong>?<br><input id="q000006" name="q000006" size="50" type="text" value="">
</div><div>
<span id="q000006_buttons"></span>
<span id="q000006_loading_wrapper">
<span id="q000006_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000006_score_display"></span>
<div class="nsubmits_left" id="q000006_nsubmits_left"></div></div>
<div id="q000006_solution_container">
<div id="q000006_solution">
</div>
<div id="q000006_solution_explanation">
</div>
</div>
<div id="q000006_message"></div>
</div>
<!--END question q000006 -->
<p></p>
<p>
<!--START question q000007 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000007" style="position: static">
<div id="q000007_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E2</strong>?<br><input id="q000007" name="q000007" size="50" type="text" value="">
</div><div>
<span id="q000007_buttons"></span>
<span id="q000007_loading_wrapper">
<span id="q000007_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000007_score_display"></span>
<div class="nsubmits_left" id="q000007_nsubmits_left"></div></div>
<div id="q000007_solution_container">
<div id="q000007_solution">
</div>
<div id="q000007_solution_explanation">
</div>
</div>
<div id="q000007_message"></div>
</div>
<!--END question q000007 -->
<p></p>
<p>
<!--START question q000008 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000008" style="position: static">
<div id="q000008_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E3</strong>?<br><input id="q000008" name="q000008" size="50" type="text" value="">
</div><div>
<span id="q000008_buttons"></span>
<span id="q000008_loading_wrapper">
<span id="q000008_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000008_score_display"></span>
<div class="nsubmits_left" id="q000008_nsubmits_left"></div></div>
<div id="q000008_solution_container">
<div id="q000008_solution">
</div>
<div id="q000008_solution_explanation">
</div>
</div>
<div id="q000008_message"></div>
</div>
<!--END question q000008 -->
<p></p>
<p>
<!--START question q000009 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000009" style="position: static">
<div id="q000009_rendered_question">
What is the result of evaluating <code>y</code> in <strong>E4</strong>?<br><input id="q000009" name="q000009" size="50" type="text" value="">
</div><div>
<span id="q000009_buttons"></span>
<span id="q000009_loading_wrapper">
<span id="q000009_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000009_score_display"></span>
<div class="nsubmits_left" id="q000009_nsubmits_left"></div></div>
<div id="q000009_solution_container">
<div id="q000009_solution">
</div>
<div id="q000009_solution_explanation">
</div>
</div>
<div id="q000009_message"></div>
</div>
<!--END question q000009 -->
<p></p>
<p><a class="anchor" name="catsoop_section_6_4_2"></a><a class="anchor" name="_environments_initial_structure"></a></p><h4 class="cs_section_title">6.4.2) Environments: Initial Structure<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_environments_initial_structure">§</a></h4><p></p>
<p>Running a program in this language typically involves evaluating multiple
expressions, one after the other, in the same environment, and so we will take
a moment here to think about what the initial structure of these environments
should look like.</p>
<p>When we first start a new REPL, we will need to think about two main
environments: an environment to hold the <em>built-in</em> values (such as the <code>+</code>
function) and a "global" environment where top-level definitions from users'
programs will be bound.  Then, every expression we provide to the REPL should
be evaluated in that global environment.</p>
<p>For example, running the code below from the REPL should result in the
environment structure shown in the picture that follows:</p>
<pre><code class="nohighlight">in&gt; (:= x 3)
  out&gt; 3

in&gt; (:= y 4)
  out&gt; 4
</code></pre>
<center>
<img src="./Lab 8_ LISP Interpreter_files/env_example.png" style="width: 2.5in">
</center>
<p>Note that  when we look up any of the built-in variables from the global
environment, we end up finding them in the built-ins environment.</p>
<p><a class="anchor" name="catsoop_section_6_5"></a><a class="anchor" name="_evaluator_changes"></a></p><h3 class="cs_section_title">6.5) Evaluator Changes<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_evaluator_changes">§</a></h3><p></p>
<p>Now, we'll need to add support for variable definition and lookup to our
interpreter by implementing a Python structure for representing an environment
and modifying our interpreter so that it handles variables and the
<code>:=</code> keyword.</p>
<p><a class="anchor" name="catsoop_section_6_5_1"></a><a class="anchor" name="_changes_to_evaluate"></a></p><h4 class="cs_section_title">6.5.1) Changes to <code>evaluate</code><a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_changes_to_evaluate">§</a></h4><p></p>
<p>Beyond implementing a representation for environments, we will need to make
some modifications to our <code>evaluate</code> function.  We will need to:</p>
<ul>
<li>modify <code>evaluate</code> so that it takes a second (optional) argument: the
environment in which the expression should be evaluated.  If no environment
is passed in, an empty environment should be used, whose parent is an
environment containing all the bindings from the <code>carlae_builtins</code>
dictionary.</li>
<li>make sure that <code>evaluate</code> handles the <code>:=</code> keyword properly, evaluating
the given expression and storing the result in the environment that was
passed to <code>evaluate</code>.</li>
<li>modify the way symbols are handled in <code>evaluate</code>, so that if the symbol
exists as a key in the environment (or a parent environment), <code>evaluate</code>
returns the associated value.</li>
</ul>
<p><a class="anchor" name="catsoop_section_6_5_2"></a><a class="anchor" name="_examples_2"></a></p><h4 class="cs_section_title">6.5.2) Examples<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_examples_2">§</a></h4><p></p>
<p>Consider evaluating the following expressions in order from the same REPL
(i.e., in the same environment).  What is the result of evaluating each of
these expressions?</p>
<p>
<!--START question q000010 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000010" style="position: static">
<div id="q000010_rendered_question">
input: <code>(+ 3 2 4 (- 2 7 8))</code><br>output:<input id="q000010" name="q000010" size="50" type="text" value="">
</div><div>
<span id="q000010_buttons"></span>
<span id="q000010_loading_wrapper">
<span id="q000010_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000010_score_display"></span>
<div class="nsubmits_left" id="q000010_nsubmits_left"></div></div>
<div id="q000010_solution_container">
<div id="q000010_solution">
</div>
<div id="q000010_solution_explanation">
</div>
</div>
<div id="q000010_message"></div>
</div>
<!--END question q000010 -->
<p></p>
<p>
<!--START question q000011 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000011" style="position: static">
<div id="q000011_rendered_question">
input: <code>(:= x (+ 2 3))</code><br>output:<input id="q000011" name="q000011" size="50" type="text" value="">
</div><div>
<span id="q000011_buttons"></span>
<span id="q000011_loading_wrapper">
<span id="q000011_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000011_score_display"></span>
<div class="nsubmits_left" id="q000011_nsubmits_left"></div></div>
<div id="q000011_solution_container">
<div id="q000011_solution">
</div>
<div id="q000011_solution_explanation">
</div>
</div>
<div id="q000011_message"></div>
</div>
<!--END question q000011 -->
<p></p>
<p>
<!--START question q000012 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000012" style="position: static">
<div id="q000012_rendered_question">
input: <code>(:= x2 (* x x))</code><br>output:<input id="q000012" name="q000012" size="50" type="text" value="">
</div><div>
<span id="q000012_buttons"></span>
<span id="q000012_loading_wrapper">
<span id="q000012_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000012_score_display"></span>
<div class="nsubmits_left" id="q000012_nsubmits_left"></div></div>
<div id="q000012_solution_container">
<div id="q000012_solution">
</div>
<div id="q000012_solution_explanation">
</div>
</div>
<div id="q000012_message"></div>
</div>
<!--END question q000012 -->
<p></p>
<p>
<!--START question q000013 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000013" style="position: static">
<div id="q000013_rendered_question">
input: <code>(+ x2 x)</code><br>output:<input id="q000013" name="q000013" size="50" type="text" value="">
</div><div>
<span id="q000013_buttons"></span>
<span id="q000013_loading_wrapper">
<span id="q000013_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000013_score_display"></span>
<div class="nsubmits_left" id="q000013_nsubmits_left"></div></div>
<div id="q000013_solution_container">
<div id="q000013_solution">
</div>
<div id="q000013_solution_explanation">
</div>
</div>
<div id="q000013_message"></div>
</div>
<!--END question q000013 -->
<p></p>
<p><strong>These can make for some nice test cases when you implement your code!</strong>  You
may also wish to test some other similar examples in your REPL to make sure
things are working as expected.</p>
<p><a class="anchor" name="catsoop_section_6_6"></a><a class="anchor" name="_environments_test_cases_and_the_repl"></a></p><h3 class="cs_section_title">6.6) Environments, Test Cases, and the REPL<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_environments_test_cases_and_the_repl">§</a></h3><p></p>
<p>All of the tests from this point on involve using your interpreter to run
small programs by evaluating multiple expressions one after the other in the
same environment.</p>
<p>To make this kind of automatic checking possible, you should define a function
called <code>result_and_env</code> that takes the same arguments as <code>evaluate</code> but returns
a tuple with two elements: the result of the evaluation and the environment in
which the expression was evaluated.  <strong>Your code will not pass the tests
without this function.</strong>  Note also that this function should always return the
environment in which the expression was actually evaluated, <em>even if no
environment was explicitly passed to it</em>.  Note that the <code>result_and_env</code>
function only exists to help us with testing; it should probably not be a very
complicated function, and we should be careful to avoid duplicating logic
between <code>evaluate</code> and <code>result_and_env</code>.</p>
<p>All test cases moving forward will use this function to simulate, in some
sense, starting up a brand-new REPL and evaluating multiple expressions at
that REPL in order. We do this by:</p>
<ul>
<li>Calling <code>result_and_env</code> with the first expression and no environment
specified (so that you should create a brand-new one), and then</li>
<li>calling <code>result_and_env</code> for each subsequent expression, each time passing in
the environment that resulted from the previous call (so that they all work
in the same environment, which was created in the first call to
<code>result_and_env</code>).</li>
</ul>
<p>In order for this to work, we need <code>result_and_env</code> to behave as described
above:</p>
<ul>
<li>If an environment is given, the expression should be evaluated in that environment.</li>
<li>If no environment is given, you should make a <em>brand new</em> environment and
evaluate the expression in that environment.</li>
</ul>
<p>And in either case, we want to return the result, as well as the environment in
which that result was ultimately evaluated (either the value that was passed
in or a newly created environment).</p>
<p>It's in this way that we simulate evaluating multiple expressions in the same
environment.  If <code>result_and_env</code> isn't returning the right environments, we
might evaluate later expressions in a different environment from the one in
which we defined the variables on which that expression depends.</p>
<p>Another thing to be careful of here is making sure that you're always making a
brand-new, empty environment every time <code>result_and_env</code> (or <code>evaluate</code>) is
called with no second argument passed in, rather than sharing the same
environment in those cases.</p>
<div class="callout callout-note"><div class="callout-title">Real Programs in the Test Cases!</div>
<p>Note also that we are working with authentic programs here; and for each test
case moving forward, there is a corresponding file in the <code>carlae_code</code> directory
in the code distribution; these files contain the expressions that are
evaluated in the associated test cases, with one expression on each line.  A
good exercise if you are failing a test case would be to figure out by hand
what each expression should evaluate to and then try them by pasting one line
at a time into your REPL (note that you should be able to open these files in
your normal text editor).</p><p>If you are having trouble opening these files, or
trouble figuring out why a given expression evaluates the way it does, please
don't hesitate to ask for help in office hours or on the forum!</p>
</div>
<p><a class="anchor" name="catsoop_section_6_6_1"></a><a class="anchor" name="_repl"></a></p><h4 class="cs_section_title">6.6.1) REPL<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_repl">§</a></h4><p></p>
<p>Note that your REPL should also evaluate all of the expressions provided to it
in the same environment.  That is, we should create the kind of structure
described above (with a "global" environment that has the built-ins as its
parent) when the REPL first starts and then evaluate all given expressions in
that environment.</p>
<p>There are multiple different ways we could implement this behavior; you could
directly create such an environment, or you could try using your
<code>result_and_env</code> function to accomplish the same goal (mirroring the way the
test cases are implemented)</p>
<p><a class="anchor" name="catsoop_section_6_7"></a><a class="anchor" name="_adding_support_for_functions"></a></p><h3 class="cs_section_title">6.7) Adding Support for Functions<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_adding_support_for_functions">§</a></h3><p></p>
<p>So far, we have a pretty nice calculator, but there are a few things missing
before we can really call it a programming language.  One of those things is
<em>user-defined functions</em>.</p>
<p>Currently, the operations we can perform are limited to the functions in the
<code>carlae_builtins</code> dictionary.  We can really empower a user of the language by
allowing them to define functions of their own.  As we've seen throughout
6.009, the ability to define our own functions is a really powerful means of
abstraction, and so this step will add a lot of power to our little language.</p>
<p><a class="anchor" name="catsoop_section_6_7_1"></a><a class="anchor" name="_defining_functions"></a></p><h4 class="cs_section_title">6.7.1) Defining functions<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_defining_functions">§</a></h4><p></p>
<p>In order to be able to make use of functions, we first need a way for a user to
<em>define</em> a new function.  We will accomplish this via the <code>function</code> special
form.</p>
<p>A <code>function</code> expression takes the following form: <code>(function (PARAM1 PARAM2
...) EXPR)</code>.  The result of evaluating such an expression should be an object
representing that function (note that this expression represents a function
<em>definition</em>, not a function <em>call</em>).  Importantly, there are a few things we
need to keep track of with regard to functions.  We need to store:</p>
<ul>
<li>the code representing the body of the function (which, for now, is restricted
to a single expression representing the return value)</li>
<li>the names of the function's parameters</li>
<li>a pointer to the environment in which the function was defined (the function's enclosing environment)</li>
</ul>
<p><strong>You should define a class to represent your user-defined functions.</strong>  Once
again, it is up to you to determine exactly how to represent things inside
of these functions; but it is important that, however it is represented, it
stores the information above (and also that you are able to distinguish it from
the other types of objects we have seen so far)<a class="anchor" name="catsoop_footnote_ref_8"></a><a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_8"><sup>8</sup></a>.</p>
<div class="question"><b>Check Yourself:</b><p></p><p>What information should be stored as instance attributes of this class?  What
kind of methods should the class support?
</p><p></p><p><span id="queue_checkyourself_3"></span></p></div>
<p>For example, the result of evaluating <code>(function (x y) (+ x y))</code> in the global
environment should be an object that stores the following information:</p>
<ul>
<li>the function's parameters, in order, are called <code>x</code> and <code>y</code>.</li>
<li>the function's body is the expression <code>(+ x y)</code>.</li>
<li>the function was defined in the global environment.</li>
</ul>
<p><a class="anchor" name="catsoop_section_6_7_2"></a><a class="anchor" name="_calling_functions"></a></p><h4 class="cs_section_title">6.7.2) Calling Functions<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_calling_functions">§</a></h4><p></p>
<p>Defining functions is nice, but we also need a way to <em>call</em> these functions
after we've defined them.  When the first element in an S-expression evaluates
to a user-defined function, we will need to call the function by taking the
following steps:</p>
<ul>
<li>evaluate all of the arguments to the function in the current environment
(from which the function is being called).</li>
<li>make a new environment whose parent is the function's
enclosing environment (this is called <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scope_vs._dynamic_scope">lexical scoping</a>).</li>
<li>in that new environment, bind the function's parameters to the arguments that
are passed to it.</li>
<li>evaluate the body of the function in that new environment.</li>
</ul>
<p>If we try to call something that is not a function, or if we try to call a
function with the incorrect number of arguments passed in, a <code>CarlaeEvaluationError</code>
should be raised.</p>
<p>It is worth noting that these steps are very close, if not exactly the same, as the steps Python takes when it calls a function.  Several lectures and recitations contain examples of talking through this process; and the readings for 6.145 contain some additional explanation and examples (see sections 4-8 of <a href="https://hz.mit.edu/catsoop/6.145/assignment1.0/readings" target="_blank">Functions</a> and sections 1-2.5 of <a href="https://hz.mit.edu/catsoop/6.145/assignment1.1/readings" target="_blank">Functions 2</a>).</p>
<p><a class="anchor" name="catsoop_section_6_7_3"></a><a class="anchor" name="_examples_3"></a></p><h4 class="cs_section_title" id="catsoop_label_function_examples" label="function_examples">6.7.3) Examples<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_examples_3">§</a></h4><p></p>
<p>Here are two examples of calling functions and using <code>function</code>.  The first
associates a name with the function and calls the function using that name,
whereas the second calls the function directly without first giving it a name.</p>
<pre><code class="nohighlight">in&gt; (:= square (function (x) (* x x)))
    out&gt; function object

in&gt; (square 2)
    out&gt; 4
</code></pre>
<pre><code class="nohighlight">in&gt; ((function (x) (* x x)) 3)
    out&gt; 9
</code></pre>
<p>
<!--START question q000014 -->
</p><div class="question question-multiplechoice" id="cs_qdiv_q000014" style="position: static">
<div id="q000014_rendered_question">
After evaluating the above code, what is the value of the variable <code>x</code> in the global environment?<br>
<select id="q000014" name="q000014">
<option selected="" value="-1">--</option>
<option value="0">2</option>
<option value="1">3</option>
<option value="2">4</option>
<option value="3">x is not bound in the global environment.</option></select>
</div><div>
<span id="q000014_buttons"></span>
<span id="q000014_loading_wrapper">
<span id="q000014_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000014_score_display"></span>
<div class="nsubmits_left" id="q000014_nsubmits_left"></div></div>
<div id="q000014_solution_container">
<div id="q000014_solution">
</div>
<div id="q000014_solution_explanation">
</div>
</div>
<div id="q000014_message"></div>
</div>
<!--END question q000014 -->
<p></p>
<p>Here is another example of a more-complicated function.  Note that the result
of calling <code>(foo 3)</code> below is a <em>function</em>, which is then called with <code>2</code> as an
argument.  Note also that the value associated with the name <code>x</code> when we call
<code>(bar 2)</code> is the <code>3</code> from the environment in which that function was <em>created</em>,
not the <code>7</code> from the environment in which it was called.</p>
<pre><code class="nohighlight">in&gt; (:= x 7)
    out&gt; 7

in&gt; (:= foo (function (x) (function (y) (+ x y))))
    out&gt; function object

in&gt; (:= bar (foo 3))
    out&gt; function object

in&gt; (bar 2)
</code></pre>
<p>
<!--START question bar2 -->
</p><div class="question question-pythonic" id="cs_qdiv_bar2" style="position: static">
<div id="bar2_rendered_question">
What is the result when evaluating <code>(bar 2)</code> above?<br><input id="bar2" name="bar2" size="50" type="text" value="">
</div><div>
<span id="bar2_buttons"></span>
<span id="bar2_loading_wrapper">
<span id="bar2_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="bar2_score_display"></span>
<div class="nsubmits_left" id="bar2_nsubmits_left"></div></div>
<div id="bar2_solution_container">
<div id="bar2_solution">
</div>
<div id="bar2_solution_explanation">
</div>
</div>
<div id="bar2_message"></div>
</div>
<!--END question bar2 -->
<p></p>
<p>
<!--START question q000015 -->
</p><div class="question question-multiplechoice" id="cs_qdiv_q000015" style="position: static">
<div id="q000015_rendered_question">
After evaluating the above code, what is the value of the variable <code>x</code> in the global environment?<br>
<select id="q000015" name="q000015">
<option selected="" value="-1">--</option>
<option value="0">2</option>
<option value="1">3</option>
<option value="2">5</option>
<option value="3">7</option>
<option value="4">9</option>
<option value="5">x is not bound in the global environment.</option></select>
</div><div>
<span id="q000015_buttons"></span>
<span id="q000015_loading_wrapper">
<span id="q000015_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000015_score_display"></span>
<div class="nsubmits_left" id="q000015_nsubmits_left"></div></div>
<div id="q000015_solution_container">
<div id="q000015_solution">
</div>
<div id="q000015_solution_explanation">
</div>
</div>
<div id="q000015_message"></div>
</div>
<!--END question q000015 -->
<p></p>
<p>
<!--START question q000016 -->
</p><div class="question question-multiplechoice" id="cs_qdiv_q000016" style="position: static">
<div id="q000016_rendered_question">
After evaluating the above code, what is the value of the variable <code>y</code> in the global environment?<br>
<select id="q000016" name="q000016">
<option selected="" value="-1">--</option>
<option value="0">2</option>
<option value="1">3</option>
<option value="2">5</option>
<option value="3">7</option>
<option value="4">9</option>
<option value="5">y is not bound in the global environment.</option></select>
</div><div>
<span id="q000016_buttons"></span>
<span id="q000016_loading_wrapper">
<span id="q000016_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000016_score_display"></span>
<div class="nsubmits_left" id="q000016_nsubmits_left"></div></div>
<div id="q000016_solution_container">
<div id="q000016_solution">
</div>
<div id="q000016_solution_explanation">
</div>
</div>
<div id="q000016_message"></div>
</div>
<!--END question q000016 -->
<p></p>
<div class="question"><b>Check Yourself:</b><p></p><p>Why does <code>(bar 2)</code> not evaluate to <code>9</code>?
</p><div class="response"><details><summary class="btn btn-catsoop">Show/Hide</summary>
Even though it was called from the global environment, the function we are
referring to as <code>bar</code> was defined inside of an environment, call it <b>E</b>,
where <code>x</code> was bound to the value <code>3</code> (the environment that was created when we
evaluated <code>(foo 3)</code>).  When we call <code>(bar 2)</code>, the associated environment's
parent will be <b>E</b>, so looking up <code>x</code> finds the value <code>3</code> in <b>E</b>, rather
than the value <code>7</code> in the global environment.</details></div><p></p>
<p>It may also help to look at equivalent Python code:</p>
<pre><code class="language-py hljs python">x = <span class="hljs-number">7</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span> y: x+y
bar = foo(<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(bar(<span class="hljs-number">2</span>))  <span class="hljs-comment"># this prints 5!</span>
</code></pre>
<p></p><p><span id="queue_checkyourself_4"></span></p></div>
<p><a class="anchor" name="catsoop_section_6_7_4"></a><a class="anchor" name="_changes_to_evaluate_2"></a></p><h4 class="cs_section_title">6.7.4) Changes to <code>evaluate</code><a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_changes_to_evaluate_2">§</a></h4><p></p>
<p>We will also need to make sure that <code>evaluate</code> handles the <code>function</code> keyword
properly, by creating a new function object that stores the names of the
parameters, the expression representing the body of the function, and the
environment in which the function was defined.  We also need to modify <code>evaluate</code>
to handle <em>calling</em> user-defined functions.</p>
<p>From a high-level perspective, your evaluator should now work in the following
way, given an expression <code>e</code>:</p>
<ul>
<li>If <code>e</code> represents a number, it should evaluate to that number.</li>
<li>If <code>e</code> represents a variable name, it should evaluate to the value associated
with that variable in the given environment, or it should raise an
<code>CarlaeNameError</code> if a binding cannot be found according to the rules above.</li>
<li>If <code>e</code> represents a special form (such as <code>:=</code>), it should be evaluated
according to the rules for that special form.</li>
<li>Otherwise, <code>e</code> is a compound expression representing a function call.  Each
of the subexpressions should be evaluated in the given environment, and:
<ul>
<li>If the first subexpression is a built-in function, it should be called
with the remaining subexpressions as arguments (in order).</li>
<li>If the first subexpression is a user-defined function, it should be
called according to the rules given above.</li>
</ul>
</li>
</ul>
<p>If we try to call something that is not a function, or if we try to call a
function with the incorrect number of arguments passed in, a <code>CarlaeEvaluationError</code>
should be raised.</p>
<div class="callout callout-note"><div class="callout-title">Note</div>
<p>Note that in the case of an S-expression that
isn't a special form, evaluating the first element in the S-expression gives us
the function that is to be called, regardless of how it is specified (so your
evaluator code should not have additional logic based on the syntactic form of
that first element).</p>
</div>
<p>After you have made the changes above, try them out in the REPL using the
examples from <a href="https://py.mit.edu/spring22/labs/lab08#_examples_3">subsubsection 6.7.3</a>.  Once you are reasonably
certain that everything is working, try them with <code>test.py</code>.</p>
<div class="question"><b>Check Yourself:</b><p></p><p>How difficult was it to add the <code>function</code> special form?  And how much did it
complicate your code?  Next week, we will be adding several new special forms
to the language, so it is worth thinking ahead to see if there are ways of
reorganizing your code to make adding new special forms easier.
</p><p></p><p><span id="queue_checkyourself_5"></span></p></div>
<p><a class="anchor" name="catsoop_section_6_7_5"></a><a class="anchor" name="_easier_function_definitions"></a></p><h4 class="cs_section_title">6.7.5) Easier Function Definitions<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_easier_function_definitions">§</a></h4><p></p>
<p>Implementing user-defined functions has given a lot of power to our
interpreter!  But it is kind of a pain to type them out.  Implement a shorter
syntax for function definitions, so that, if the <code>NAME</code> in a <code>:=</code>
expression is itself an S-expression, it is implicitly translated to a function
definition before binding.  For example:</p>
<ul>
<li><code>(:= (five) (+ 2 3))</code> should be equivalent to <code>(:= five (function () (+ 2 3)))</code></li>
<li><code>(:= (square x) (* x x))</code> should be equivalent to <code>(:= square (function (x) (* x x)))</code></li>
<li><code>(:= (add2 x y) (+ x y))</code> should be equivalent to <code>(:= add2 (function (x y) (+ x y)))</code></li>
</ul>
<p>This is nice not only because it is easier to type but also because it makes
the definition of a function more closely mirror the syntax we will use when
calling the function.</p>
<p>Modify your <code>evaluate</code> function so that it handles this new form.  After
implementing this change, try it out in the REPL and then in <code>test.py</code>.  At
this point, your code should pass all the tests in <code>test.py</code>.</p>
<a class="anchor" name="catsoop_section_7"></a><a class="anchor" name="_endnotes"></a><h2 class="cs_section_title">7) Endnotes<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_endnotes">§</a></h2>
<p>At this point, we have a very nice start toward an interpreter for <em>carlae</em>, our little dialect of LISP.
We have the ability to create variables and to define and call functions.
Note also that recursion and closures come about naturally as a result of the
rules we have implemented for calling functions (we don't have to do any
additional work to get those features!).  And hopefully implementing it has
been an illuminating experience implementing the various pieces of the
environment model we've been discussing throughout the semester!</p>
<p>However, we still have some work to do before our language is complete.  In
particular, next week, we will add support for conditionals and lists, along
with a few other niceties.</p>
<a class="anchor" name="catsoop_section_8"></a><a class="anchor" name="_code_submission"></a><h2 class="cs_section_title">8) Code Submission<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_code_submission">§</a></h2>
<p>When you have tested your code sufficiently on your own machine, submit your
modified <code>lab.py</code> using the <code>submit-009-lab</code> script.  The following command
should submit the lab, assuming that the last argument <code>/path/to/lab.py</code> is
replaced by the location of your <code>lab.py</code> file:</p>
<pre><code class="language-nohighlight">$ submit-009-lab -a lab08 /path/to/lab.py
</code></pre>
<p>Running that script should submit your file to be checked, and it should also
provide some information about how and where to get feedback about your
submission.  Reloading this page after submitting will also show some
additional information:</p>
<div class="callout callout-note">You have not yet made any submissions to this assignment.</div>
<a class="anchor" name="catsoop_section_9"></a><a class="anchor" name="_checkoff"></a><h2 class="cs_section_title">9) Checkoff<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab08#_checkoff">§</a></h2>
<p>Once you are finished with the code, please come to office hours
and add yourself to the queue asking for a checkoff.  <strong>You must be
ready to discuss your code and test cases in detail before asking for a checkoff.</strong></p>
<p>You should be prepared to demonstrate your code (which should be
well-commented, should avoid repetition, and should make good use of helper
functions).  In particular:</p>
<ul>
<li>Briefly describe your implementation of <code>tokenize</code> and <code>parse</code></li>
<li>Briefly describe the structure of your class for representing environments.  What attributes and methods did you define, and how are those use?  How else could you have structured this part of your code?</li>
<li>Briefly describe how your environment representation handles <em>arbitrary</em> variable names.</li>
<li>Briefly describe how you set up and use environments in <code>evaluate</code> and <code>result_and_env</code>, including how you guarantee that a brand-new empty environment is created each time none is specified.</li>
<li>Briefly describe the structure of your class for representing user-defined functions.  What attributes and methods did you define, and how are they used?  How else could you have structured this part of your code?</li>
<li>Briefly describe how user-defined functions are called (including setting up the proper new environments)</li>
<li>Show a brief demonstration of your REPL (including shared environment, exiting on demand, staying alive after errors, and correctly evaluating input expressions)</li>
</ul>
<div class="response"><i>You have not yet received this checkoff.</i></div>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
catsoop.all_questions = ['q000000', 'tokenize2', 'q000001', 'parse2', 'parse3', 'parse4', 'q000002', 'q000003', 'q000004', 'q000005', 'q000006', 'q000007', 'q000008', 'q000009', 'q000010', 'q000011', 'q000012', 'q000013', 'q000014', 'bar2', 'q000015', 'q000016'];
catsoop.username = null;
catsoop.this_path = 'https://py.mit.edu/spring22/labs/lab08';
catsoop.path_info = ['spring22', 'labs', 'lab08'];
catsoop.course = 'spring22';
catsoop.url_root = 'https://py.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

// @license-end</script>
<br>&nbsp;<hr><b name="cs_footnotes">Footnotes</b><p><a class="anchor" name="catsoop_footnote_1"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">1</sup>The book associated with this subject, <a href="https://mitpress.mit.edu/sites/default/files/sicp/index.html" target="_blank">Structure and Interpretation of Computer Programs</a>, is considered by many to be one of the best books ever written on the topic of programming. <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_1"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_2"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">2</sup>Note that this first element can be an arbitrary expression.  That is, it does not need to be a single name; it could be a more complicated expression that evaluates to a function object. <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_2"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_3"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">3</sup>Note that lines are separated by a special character <code>'\n'</code>. <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_3"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_4"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">4</sup>Note that we pass these arguments to the function as a single list containing all arguments, rather than as separate arguments <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_4"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_5"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">5</sup>Note that when you raise an exception, you can include
an error message with details about the specifics of that error with the
following syntax: <code>raise CarlaeNameError("some error message here")</code>.  This can
help greatly with debugging, as it can help you locate the particular
<code>raise</code> statement an error came from (and, ultimately, the cause of the
exception). <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_5"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_6"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">6</sup>
Although we will not be explicitly testing for them, there are a few "edge cases" to consider when implementing these functions.  For multiplication, if we take the product of some numbers <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>0</mn></msub><mo>×</mo><msub><mi>a</mi><mn>1</mn></msub><mo>×</mo><msub><mi>a</mi><mn>2</mn></msub><mo>×</mo><mo>…</mo></mrow><annotation encoding="application/x-tex">a_0\times a_1\times a_2\times \ldots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.123em; vertical-align: 0em;"></span><span class="minner">…</span></span></span></span></span> and multiply it by the product of some numbers <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mn>0</mn></msub><mo>×</mo><msub><mi>b</mi><mn>1</mn></msub><mo>×</mo><msub><mi>b</mi><mn>2</mn></msub><mo>×</mo><mo>…</mo></mrow><annotation encoding="application/x-tex">b_0\times b_1\times b_2\times \ldots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.123em; vertical-align: 0em;"></span><span class="minner">…</span></span></span></span></span>, we should get the same result as if we multiplied <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>0</mn></msub><mo>×</mo><msub><mi>a</mi><mn>1</mn></msub><mo>×</mo><msub><mi>a</mi><mn>2</mn></msub><mo>×</mo><mo>…</mo><mo>×</mo><msub><mi>b</mi><mn>0</mn></msub><mo>×</mo><msub><mi>b</mi><mn>1</mn></msub><mo>×</mo><msub><mi>b</mi><mn>2</mn></msub><mo>×</mo><mo>…</mo></mrow><annotation encoding="application/x-tex">a_0\times a_1\times a_2\times \ldots \times b_0\times b_1\times b_2\times \ldots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.123em; vertical-align: 0em;"></span><span class="minner">…</span></span></span></span></span>.  This suggests:
</p><ul><li>Multiplication with 1 argument passed in should return that argument itself.
</li><li>Multiplication with no arguments should return 1.
</li></ul>
<p>(In that same vein, note that <code>(+)</code> evaluates to <code>0</code>, and <code>(+ 2)</code> evaluates to <code>2</code>)</p>
<p>For division, it's not clear that such a relationship exists.  But one set of rules that could make sense (and which is implemented in the MIT/GNU Scheme dialect of LISP) is:
</p><ul><li>Division with no arguments should raise an exception.
</li><li>Division with a single argument <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">x</span></span></span></span></span> should return <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">1/x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal">x</span></span></span></span></span>.
</li></ul>
<p></p> <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_6"><span class="noprint">(click to return to text)</span></a><p></p><p><a class="anchor" name="catsoop_footnote_7"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">7</sup>Note that this is equivalent to Python's "<a href="https://www.python.org/dev/peps/pep-0572/">walrus operator</a>", which was new in Python 3.8. <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_7"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_8"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">8</sup>If you want to, you
can implement the <code>__call__</code> "dunder" method to make instances of your class be
callable like regular Python functions. <a href="https://py.mit.edu/spring22/labs/lab08#catsoop_footnote_ref_8"><span class="noprint">(click to return to text)</span></a></p>
</div>
</div>
<div class="cs_right_menu"></div>
</main>
<footer>
<div class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation"><span class="line"><a href="https://py.mit.edu/spring22">Home</a></span> <span class="cs_nav_separator">/</span> <span class="line"><a href="https://py.mit.edu/spring22/labs/lab08">Lab 8: LISP Interpreter <img alt="🐍" aria-label="snake" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTExLjg0IDcuNjM0Yy0uNzE5IDAtMi4yOTUgMi4yNDMtMy41NjcgMS4wMjktLjQ0LS40MTkgMS44MTgtMS4yNzggMS43MjctMi4wMTctLjA3NS0uNjA3LTIuODQyLTEuNTItMS44NzUtMi4wOTkuOTY3LS41NzggMi40MTguODQxIDMuNTEzLjg2NiAyLjM4Mi4wNTUgNC4yMTItLjg1MyA0LjIzOC0uODY2LjU0MS0uMjc0IDEuMTk1LS4wNTIgMS40NjQuNDk2LjI3LjU0Ny4wNTEgMS4yMTMtLjQ4OCAxLjQ4Ni0uMTMxLjA2Ni0yLjIyNSAxLjEwNS01LjAxMiAxLjEwNXoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMjcuODE4IDM2Yy0zLjk2NyAwLTguMTgyLTIuOTEyLTguMTgyLTguMzA4IDAtMS4zNzQtLjg5LTEuNjYxLTEuNjM3LTEuNjYxLS43NDYgMC0xLjYzNi4yODctMS42MzYgMS42NjEgMCA1LjM5Ni00LjIxNiA4LjMwOC04LjE4MiA4LjMwOFMwIDMzLjIzIDAgMjcuNjkyQzAgMTQuNCAxNC4xODIgMTIuNTY1IDE0LjE4MiAxNC40YzAgMS44MzUtNy42MzYtMS4xMDctNy42MzYgMTIuMTg1IDAgMi4yMTUuODkgMi43NjkgMS42MzYgMi43NjkuNzQ3IDAgMS42MzctLjI4NyAxLjYzNy0xLjY2MSAwLTUuMzk1IDQuMjE1LTguMzA4IDguMTgyLTguMzA4IDMuOTY2IDAgOC4xODIgMi45MTIgOC4xODIgOC4zMDggMCAxLjM3NC44OSAxLjY2MSAxLjYzNyAxLjY2MXMxLjYzNi0uMjg3IDEuNjM2LTEuNjYxVjExLjA3N2MwLTMuODU1LTMuNDE3LTQuNDMxLTUuNDU0LTQuNDMxIDAgMC0zLjI3MiAxLjEwOC02LjU0NSAxLjEwOHMtNC4zNjQtMi41OTYtNC4zNjQtNC40MzFDMTMuMDkxIDEuNDg4IDE3LjQ1NSAwIDI0IDBjNi41NDYgMCAxMiA0LjQ1MSAxMiAxMS4wNzd2MTYuNjE1QzM2IDMzLjA4OCAzMS43ODQgMzYgMjcuODE4IDM2eiIvPjxjaXJjbGUgZmlsbD0iIzI5MkYzMyIgY3g9IjE5IiBjeT0iMyIgcj0iMSIvPjwvc3ZnPg==" title="snake"></a></span></div>
<div class="cs_footer">
      This page was last updated on Monday April 18, 2022 at 01:13:20 PM (revision <code>fe5863f5f</code>).<br>&nbsp;<br>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.mit.edu/" target="_blank">CAT-SOOP</a> v2022.2.0.dev19 "Highlander" (development snapshot).<br>
      CAT-SOOP is <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>, available under the terms<br>of the <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
<a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a><br>
<a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</div>
</footer>



</body></html>