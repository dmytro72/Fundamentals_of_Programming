<!DOCTYPE html>
<!-- saved from url=(0038)https://py.mit.edu/spring22/labs/lab01 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP 2022.2.0.dev19.  miau. -->

<title>Lab 1: Image Processing | 6.009 Spring 2022</title>
<link href="./Lab 1_ Image Processing_files/logo.gif" rel="icon" type="image/gif">
<!-- include catsoop base css -->
<link href="./Lab 1_ Image Processing_files/base.css" rel="stylesheet" type="text/css">
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    window.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu){
       menu.children[1].checked = false;
    }
    // @license-end
    </script>
<!-- load in katex and CAT-SOOP-specific math rendering  -->
<script src="./Lab 1_ Image Processing_files/katex.min.js.stažený soubor" type="text/javascript"></script>
<link href="./Lab 1_ Image Processing_files/katex.min.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.katex_macros = {};
    catsoop.render_math = function (elt) {
        var tex = elt.innerText; // TeX Source
        var display = elt.classList.contains('cs_displaymath');
        try {
            katex.render(tex, elt, {displayMode: display, macros: catsoop.katex_macros});
        }catch(e) {
            console.log(e);
            elt.innerHTML = "<font color='red'><b>Could not parse math:</b> <tt>" + tex + "</tt></font>";
        }
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function (elt){
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while(mathelts.length > 0){
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
          catsoop.render_all_math(document);
    });
    // @license-end
    </script>
<!-- load in diagram stuff -->
<script src="./Lab 1_ Image Processing_files/cs_diagrams.js.stažený soubor" type="text/javascript"></script>
<script type="text/javascript">
        catsoop.diagram_sources = {};
    </script>
<!-- Syntax Highlighting -->
<script src="./Lab 1_ Image Processing_files/highlight.min.js.stažený soubor" type="text/javascript"></script>
<script src="./Lab 1_ Image Processing_files/highlightjs-line-numbers.js.stažený soubor" type="text/javascript"></script><style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    hljs.initHighlightingOnLoad();
    window.addEventListener('DOMContentLoaded', function(){
        document.querySelectorAll('.hl code').forEach((block) => {
            hljs.highlightBlock(block);
        });
        document.querySelectorAll('code.highlight-lines').forEach(function(b){
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0){
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
        });
    });
    // @license-end
    </script>
<style>
      :root {
        --cs-base-bg-color: #039bba;
        --cs-light-bg-color: #62d5ed;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<style>
.cs_top_menu_item {
  font-size: 0.88rem;
}
div.dropdown {
  -moz-transform: translateY(-1px);
}
</style>
<script src="./Lab 1_ Image Processing_files/cs_ajax.js.stažený soubor" type="text/javascript"></script>
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body style="margin: 0px;">
<header id="cs_header">
<div class="nav-container">
<div class="cs_header_text"><a href="https://py.mit.edu/spring22"><img src="./Lab 1_ Image Processing_files/logo.gif">&nbsp;6.009</a></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_84494260bb2b4bc1ef74fe697ea810e0">Information<span class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox" id="cs_menu_84494260bb2b4bc1ef74fe697ea810e0" type="checkbox">
<div class="dropdown-content">
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/basics">Basic Information</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/help">Getting Help</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/grading">Grading Policies</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/academic_integrity">Academic Integrity</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/infrastructure">Infrastructure</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/notes">Course Notes</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/info/staff">Staff List</a></div></div>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/queue/">Help Queue</a>
<a class="cs_top_menu_item" href="https://discourse6009.mit.edu/">Forum</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/progress">Progress</a>
<a class="cs_top_menu_item" href="https://py.mit.edu/spring22/labs/lab01?loginaction=login">Log In</a><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<div class="cs_navigation cs_top_navigation" id="cs_top_navigation"><span class="line"><a href="https://py.mit.edu/spring22">Home</a></span> <span class="cs_nav_separator">/</span> <span class="line"><a href="https://py.mit.edu/spring22/labs/lab01">Lab 1: Image Processing</a></span></div>
<main class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<div class="cs_page_body">
<center><h1 class="cs_content_header">Lab 1: Image Processing</h1></center>
<div class="response" id="catsoop_login_box">
<b><center>You are not logged in.</center></b><br>
If you are a current student, please <a href="https://py.mit.edu/spring22/labs/lab01?loginaction=login">Log
In</a> for full access to the web site.<br>Note that this link will take you to
an external site (<tt>https://shimmer.mit.edu</tt>) to authenticate, and then you will be redirected
back to this page.
</div>
<h2>Table of Contents</h2><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_preparation">1) Preparation</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_introduction">2) Introduction</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_digital_image_representation_and_color_encoding">2.1) Digital Image Representation and Color Encoding</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_loading_saving_and_displaying_images">2.2) Loading, Saving, and Displaying Images</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_image_filtering_via_per_pixel_transformations">3) Image Filtering via Per-Pixel Transformations</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_adding_a_test_case">3.1) Adding a Test Case</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_lambda_and_higher_order_functions">3.2) <code>lambda</code> and Higher-Order Functions</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_debugging">3.3) Debugging</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_image_filtering_via_correlation">4) Image Filtering via Correlation</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_edge_effects">4.1) Edge Effects</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_correlation">4.2) Correlation</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_example_kernels" label="examples">4.3) Example Kernels</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_identity">4.3.1) Identity</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_translation">4.3.2) Translation</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_average">4.3.3) Average</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_check_your_results">4.4) Check Your Results</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_blurring_and_sharpening">5) Blurring and Sharpening</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_blurring">5.1) Blurring</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_2">5.1.1) Check Your Results</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_sharpening">5.2) Sharpening</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_3">5.2.1) Check Your Results</a></li></ul></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_edge_detection">6) Edge Detection</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_4">6.1) Check Your Results</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_reviewing_representation">7) Reviewing Representation</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_representing_color">8) Representing Color</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_filters_on_color_images">9) Filters on Color Images</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_5">9.1) Check Your Results</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_other_kinds_of_filters">9.2) Other Kinds of Filters</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_6">9.3) Check Your Results</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_cascade_of_filters">10) Cascade of Filters</a></li><ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_7">10.1) Check Your Results</a></li></ul><li><a href="https://py.mit.edu/spring22/labs/lab01#_something_of_your_own">11) Something of Your Own</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_code_submission">12) Code Submission</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_checkoff">13) Checkoff</a></li><li><a href="https://py.mit.edu/spring22/labs/lab01#_what_comes_next">14) What Comes Next?</a></li></ul>
<a class="anchor" name="catsoop_section_1"></a><a class="anchor" name="_preparation"></a><h2 class="cs_section_title">1) Preparation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_preparation">§</a></h2>
<p>This lab assumes you have Python 3.6 or later installed on your machine (3.10
recommended).</p>
<p>This lab will also use the <a href="https://python-pillow.org/"><code>pillow</code></a> library,
which we'll use for loading and saving images.  See <a href="https://pillow.readthedocs.io/en/stable/installation.html">this
page</a> for instructions
for installing pillow (note that, depending on your setup, you may need to run
<code>pip3</code> instead of <code>pip</code>).  If you have any trouble installing, just ask, and
we'll be happy to help you get set up.</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="lab01.zip" href="https://py.mit.edu/spring22/lab_distribution.zip?path=%5B%22spring22%22%2C+%22labs%22%2C+%22lab01%22%5D"><tt>lab01.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit at the
end of this lab.  Importantly, you should not add any imports to the file, nor
should you use the <code>pillow</code> module for anything other than loading and saving
images (which are already implemented for you).</p>
<p>You can also see and participate in online discussion about this lab in the <a href="https://py.mit.edu/forum/c/labs" target="_blank">"Labs"
Category</a> in the forum.</p>
<p>This lab is worth a total of 4 points.  Your score for the lab is based on:</p>
<ul>
<li>correctly answering the questions throughout this page (1 point)</li>
<li>passing the tests in <code>test.py</code> (1 point), and</li>
<li>a brief "checkoff" conversation with a staff member to discuss your code (2 points).</li>
</ul>
<p><strong>All questions on this page (including your code submission) are due at
5pm Eastern time on Friday, 11 February.  Checkoffs are due at 10pm Eastern
time on Wednesday, 16 February.</strong></p>
<a class="anchor" name="catsoop_section_2"></a><a class="anchor" name="_introduction"></a><h2 class="cs_section_title">2) Introduction<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_introduction">§</a></h2>
<p>In this lab, you will build a few tools for manipulating digital images, akin
to those found in image-manipulation toolkits like
<a href="http://www.photoshop.com/products/photoshop">Photoshop</a> and
<a href="http://www.gimp.org/">GIMP</a>.  Interestingly, many classic image filters are
implemented using the same ideas we'll develop over the course of this lab.</p>
<p>We will start with manipulating grayscale images first, then move on to working
with color images.</p>
<p><a class="anchor" name="catsoop_section_2_1"></a><a class="anchor" name="_digital_image_representation_and_color_encoding"></a></p><h3 class="cs_section_title">2.1) Digital Image Representation and Color Encoding<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_digital_image_representation_and_color_encoding">§</a></h3><p></p>
<p>Before we can get to <em>manipulating</em> images, we first need a way to <em>represent</em>
images in Python.  While digital images can be represented in myriad ways, the
most common has endured the test of time: a rectangular mosaic of
<em>pixels</em> -- colored dots, which together make up the image.  An image,
therefore, can be defined by specifying a <em>width</em>, a <em>height</em>, and an array of
<em>pixels</em>, each of which is a color value.  This representation emerged from the
early days of analog television and has survived many technology changes.
While individual file formats employ different encodings, compression, and
other tricks, the pixel-array representation remains central to most digital
images.</p>
<p>For this lab, we will simplify things a bit by focusing on grayscale images.
Each pixel's brightness is encoded as a single integer in the range <code>[0,255]</code>
(1 byte could contain 256 different values), <code>0</code> being the deepest black, and
<code>255</code> being the brightest white we can represent.  The full range is shown
below:</p>
<center>
<p><code>0</code> <img alt="image_gradient" src="./Lab 1_ Image Processing_files/gradient.png"> <code>255</code></p>
</center>
<p>For this lab, we'll represent an image using a Python dictionary with three keys:</p>
<ul>
<li><code>width</code>: the width of the image (in pixels),</li>
<li><code>height</code>: the height of the image (in pixels), and</li>
<li><code>pixels</code>: a Python list of pixel brightnesses stored in
<a href="https://en.wikipedia.org/wiki/Row-major_order">row-major order</a>
(listing the top row left-to-right, then the next row, and so on)</li>
</ul>
<p>For example, consider this <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span></span></span></span></span> image (enlarged here for clarity):</p>
<center>
<p><img alt="image_sample" src="./Lab 1_ Image Processing_files/sample.png"></p>
</center>
<p>This image would be encoded as the following instance:</p>
<pre><code class="nohighlight">i = {'height': 3, 'width': 2, 'pixels': [0, 50, 50, 100, 100, 255]}
</code></pre>
<p><a class="anchor" name="catsoop_section_2_2"></a><a class="anchor" name="_loading_saving_and_displaying_images"></a></p><h3 class="cs_section_title">2.2) Loading, Saving, and Displaying Images<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_loading_saving_and_displaying_images">§</a></h3><p></p>
<p>We have provided two helper functions in <code>lab.py</code> which may be helpful for
debugging: <code>load_greyscale_image</code> and <code>save_greyscale_image</code>.  Each of these
functions is explained via a <a href="https://py.mit.edu/spring22/notes/style#_docstrings">docstring</a>.</p>
<p>You do not need to dig deeply into the actual code in those functions, but it
is worth taking a look at those docstrings and trying to use the functions to:</p>
<ul>
<li>load an image, and</li>
<li>save it under a different filename.</li>
</ul>
<p>You can then use an image viewer on your computer to open the new image to
make sure it was saved correctly.</p>
<p>There are several example images in the <code>test_images</code> directory inside the
lab's code distribution, or you are welcome to use images of your own to test,
as well.</p>
<p>As you implement the various filters described below, these functions can
provide a way to visualize your output, which can help with debugging, and they
also make it easy to show off your cool results to friends and family.</p>
<p>Note that you can add code for loading, manipulating, and saving images under
the <code>if __name__ == '__main__':</code> block in <code>lab.py</code>, which will be executed when
you run <code>lab.py</code> directly (but not when it is imported by the test suite).  As
such, it is a good idea to get into the habit of writing code containing test
cases of your own design within that block, rather than in the main body of the
<code>lab.py</code> file.</p>
<a class="anchor" name="catsoop_section_3"></a><a class="anchor" name="_image_filtering_via_per_pixel_transformations"></a><h2 class="cs_section_title">3) Image Filtering via Per-Pixel Transformations<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_image_filtering_via_per_pixel_transformations">§</a></h2>
<p>As our first task in manipulating images, we will look at an <em>inversion</em>
filter, which reflects pixels about the middle gray value (<code>0</code> black becomes
<code>255</code> white and vice versa).  For example, here is a photograph of Adam's cat,
Stronger.  On the left side is the original image, and on the right is an
inverted version.</p>
<center>
<p><img alt="Stronger the cat" src="./Lab 1_ Image Processing_files/stronger.jpg"></p>
</center>
<p>Most of the implementation of the inversion filter has been completed for you
(it is invoked by calling the function called <code>inverted</code> on an image), but some
pieces have not been implemented correctly.  Your task in this part of the lab
is to fix the implementation of the inversion filter.</p>
<p>Before you do that, however, let's add a small test case to <code>test.py</code>.
We'll start by figuring out (by hand) what output we should expect in response
to a given input and writing a corresponding test case.  Eventually, when we
have working code for our inversion filter, this test case should pass!</p>
<p>Let's start with a <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">4 \times 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span> image that is defined with the following parameters:</p>
<ul>
<li>height: <code>1</code></li>
<li>width: <code>4</code></li>
<li>pixels: <code>[20, 78, 133, 220]</code></li>
</ul>
<p>
<!--START question q000000 -->
</p><div class="question question-pythonliteral" id="cs_qdiv_q000000" style="position: static">
<div id="q000000_rendered_question">
If we were to run this image through a working inversion filter, what would the
expected output be?  Compute this result by hand.  Then, in the box below,
enter a Python list representing the expected value associated with the
<code>pixels</code> key in the resulting image:<br><input id="q000000" name="q000000" size="50" type="text" value="">
</div><div>
<span id="q000000_buttons"></span>
<span id="q000000_loading_wrapper">
<span id="q000000_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000000_score_display"></span>
<div class="nsubmits_left" id="q000000_nsubmits_left"></div></div>
<div id="q000000_solution_container">
<div id="q000000_solution">
</div>
<div id="q000000_solution_explanation">
</div>
</div>
<div id="q000000_message"></div>
</div>
<!--END question q000000 -->
<p></p>
<p><a class="anchor" name="catsoop_section_3_1"></a><a class="anchor" name="_adding_a_test_case"></a></p><h3 class="cs_section_title">3.1) Adding a Test Case<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_adding_a_test_case">§</a></h3><p></p>
<p>While we could just add some code using <code>print</code> statements to check that things
are working, we'll also use this as an opportunity to familiarize ourselves a bit
with the testing framework we are using in 6.009.</p>
<p>Let's try adding this test case to the lab's regular tests so that it is run
when we execute <code>test.py</code>.  If you open <code>test.py</code> in a text editor, you will see
that it is a Python file that makes use of the Python package
<a href="https://docs.pytest.org/en/stable/"><code>pytest</code></a> for unit testing.</p>
<p>Each function that has a name starting with <code>test</code> in <code>test.py</code> represents a
particular test case.</p>
<p>Running <code>test.py</code> through <code>pytest</code> will cause Python to run and report on <em>all</em>
of the tests in the file.</p>
<p>However, you can make Python run only a subset of the tests by
running, for example, the following command from a terminal<a class="anchor" name="catsoop_footnote_ref_1"></a><a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_1"><sup>1</sup></a> (not
including the dollar sign):</p>
<pre><code class="nohighlight">$ pytest test.py -k load
</code></pre>
<p>This will run any test with "load" in its name (in this case, the long test
defined in the <code>test_load</code> function).  If you run this command, you should get
a brief report indicating that the lone test case passed.  By modifying that
last argument (<code>load</code> in the example above), you can run different subsets of
tests.</p>
<p>You can add a test case by adding a new function to the <code>test.py</code> file.
Importantly, for it to be recognized as a test case, its name must begin with
the word <code>test</code><a class="anchor" name="catsoop_footnote_ref_2"></a><a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_2"><sup>2</sup></a>.</p>
<p>In the skeleton you were given, there is a trivial test case called
<code>test_inverted_2</code>.  Modify this method so that it implements the test from above
(inverting the small <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">4\times 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span> image).  Within that test case, you can define
the expected result as an instance of the hard-coded dictionary, and you can
compare it against the result from calling the <code>inverted</code> method of the original
image. To compare two images, you may use our <code>compare_images</code> function (you can
look at some of the other test cases to get a sense of how to use it).</p>
<p>For now, we should also expect this test case to fail, but we can expect it to
pass once all the bugs in the inversion filter have been fixed.  In that way,
it can serve as a useful means of guiding our bug-finding process.</p>
<p>Throughout the lab, you are welcome to (and may find it useful to) add your own
test cases for other parts of the code as you are debugging <code>lab.py</code> and any
extensions or utility functions you write.</p>
<p><a class="anchor" name="catsoop_section_3_2"></a><a class="anchor" name="_lambda_and_higher_order_functions"></a></p><h3 class="cs_section_title">3.2) <code>lambda</code> and Higher-Order Functions<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_lambda_and_higher_order_functions">§</a></h3><p></p>
<p>As you read through the provided code, you will encounter some features of
Python that you may not be familiar with. One such feature is the <code>lambda</code>
keyword.</p>
<p>In Python, <code>lambda</code> is a convenient shorthand for defining small,
nameless functions.</p>
<p>For instance, in the provided code you will see:</p>
<pre><code class="language-python hljs"><span class="hljs-keyword">lambda</span> c: <span class="hljs-number">256</span>-c
</code></pre>
<p>This expression creates a function object that takes a single argument (<code>c</code>)
and returns the value <code>256-c</code>.  It is worth noting that we could have instead
used <code>def</code> to create a similar function object, using code like the following:</p>
<pre><code class="language-py hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">subtract_from_256</span>(<span class="hljs-params">c</span>):</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">256</span>-c
</code></pre>
<p>(the main difference being that <code>def</code> will both create a function object <em>and</em>
bind that object to a name, whereas <code>lambda</code> will only create a function object)</p>
<p>If we had defined our function this way (with <code>def</code>), we could still provide
that function as an argument to <code>apply_per_pixel</code>, but we would have to refer
to the function by name: <code>apply_per_pixel(image, subtract_from_256)</code></p>
<p><a class="anchor" name="catsoop_section_3_3"></a><a class="anchor" name="_debugging"></a></p><h3 class="cs_section_title">3.3) Debugging<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_debugging">§</a></h3><p></p>
<p>Now, work through the process of finding and fixing the errors in the code for
the inversion filter.  Happy debugging!</p>
<p>When you are done and your code passes the <code>test_inverted_1</code> and
<code>test_inverted_2</code> test cases, run your inversion filter on the
<code>test_images/bluegill.png</code> image, save the result as a PNG image, and upload it
below (choose the appropriate file and click "Submit").  If your image is
correct, you will see a green check mark; if not, you will see a red X.</p>
<p>
<!--START question q000001 -->
</p><div class="question question-fileupload" id="cs_qdiv_q000001" style="position: static">
<div id="q000001_rendered_question">
Inverted <code>bluegill.png</code>:<br><input id="q000001" name="q000001" style="display: none" type="file"><button class="btn btn-catsoop" id="q000001_select_button">Select File</button>&nbsp;<tt><span id="q000001_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('q000001_select_button').addEventListener('click', function (){
    document.getElementById("q000001").click();
});
document.getElementById('q000001').onchange = function (){
    document.getElementById('q000001_selected_file').innerText = document.getElementById('q000001').value;
};
dnd_q000001 = document.getElementById('cs_qdiv_q000001');
dnd_q000001.ondragover = dnd_q000001.ondragenter = function(e){e.preventDefault();};
dnd_q000001.ondrop = function(e){
    document.getElementById("q000001").files = e.dataTransfer.files;
    document.getElementById('q000001').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="q000001_buttons"></span>
<span id="q000001_loading_wrapper">
<span id="q000001_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000001_score_display"></span>
<div class="nsubmits_left" id="q000001_nsubmits_left"></div></div>
<div id="q000001_solution_container">
<div id="q000001_solution">
</div>
<div id="q000001_solution_explanation">
</div>
</div>
<div id="q000001_message"></div>
</div>
<!--END question q000001 -->
<p></p>
<a class="anchor" name="catsoop_section_4"></a><a class="anchor" name="_image_filtering_via_correlation"></a><h2 class="cs_section_title">4) Image Filtering via Correlation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_image_filtering_via_correlation">§</a></h2>
<p>Next, we'll explore some slightly more advanced image processing techniques
involving an operation called <em>correlation</em> (which is very closely related to
the convolution operation we implemented in lab 0).</p>
<p>Given an input image <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span></span></span></span></span> and a kernel <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span></span></span></span></span>, applying <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span></span></span></span></span> to <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span></span></span></span></span> yields
a new image <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi></mrow><annotation encoding="application/x-tex">O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span></span></span></span></span> (perhaps with non-integer, out-of-range pixels), equal
in height and width to <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span></span></span></span></span>, the pixels of which are calculated
according to the rules described by <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span></span></span></span></span>.</p>
<p>The process of applying a kernel <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span></span></span></span></span> to an image <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span></span></span></span></span> is performed as a
<em>correlation</em>: the brightness of the pixel at position <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span></span></span></span></span> in the output
image, which we'll denote as <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">O_{x,y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span> (with <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mrow><mn>0</mn><mo separator="true">,</mo><mn>0</mn></mrow></msub></mrow><annotation encoding="application/x-tex">O_{0,0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span> being the upper-left
corner), is expressed as a linear combination of the brightnesses of the pixels
around position <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span></span></span></span></span> in the input image, where the weights are given by the
kernel <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span></span></span></span></span>.</p>
<p>As an example, let's start by considering a <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span></span></span></span></span> kernel:</p>
<center>
<p><img alt="image_convolution" src="./Lab 1_ Image Processing_files/kernel1.png"></p>
</center>
<p>When we apply this kernel to an image <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span></span></span></span></span>, the brightness of each output pixel
<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">O_{x,y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span> is a linear combination of the brightnesses of the 9 pixels nearest
to <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span></span></span></span></span> in <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span></span></span></span></span>, where each input pixel's value is multiplied by the
associated value in the kernel:</p>
<center>
<p><img alt="image_convolution" src="./Lab 1_ Image Processing_files/convolution.png"></p>
</center>
<p>In particular, for a <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span></span></span></span></span> kernel <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span></span></span></span></span>, we have:</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.2500em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>O</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub><mo>=</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>I</mi><mrow><mi>x</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>0</mn><mo separator="true">,</mo><mn>0</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>1</mn><mo separator="true">,</mo><mn>0</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mrow><mi>x</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>2</mn><mo separator="true">,</mo><mn>0</mn></mrow></msub><mo>+</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>I</mi><mrow><mi>x</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>y</mi></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>1</mn><mo separator="true">,</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mrow><mi>x</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>y</mi></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>2</mn><mo separator="true">,</mo><mn>1</mn></mrow></msub><mo>+</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>I</mi><mrow><mi>x</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>0</mn><mo separator="true">,</mo><mn>2</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>1</mn><mo separator="true">,</mo><mn>2</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mrow><mi>x</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>×</mo><msub><mi>k</mi><mrow><mn>2</mn><mo separator="true">,</mo><mn>2</mn></mrow></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} O_{x,y} = &amp; I_{x-1, y-1} \times k_{0,0} + I_{x,y-1} \times k_{1,0} + I_{x+1,y-1} \times k_{2, 0} +\\ &amp; I_{x-1, y} \times k_{0,1} + I_{x,y} \times k_{1,1} + I_{x+1,y} \times k_{2, 1} +\\ &amp; I_{x-1, y+1} \times k_{0,2} + I_{x,y+1} \times k_{1,2} + I_{x+1,y+1} \times k_{2, 2} \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 4.5em; vertical-align: -2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord">+</span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord">+</span></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></div><p></p>
<p>
<!--START question q000002 -->
</p><div class="question question-pythonliteral" id="cs_qdiv_q000002" style="position: static">
<div id="q000002_rendered_question">
Consider one step of correlating an image with the following kernel:
<pre><code class="nohighlight"> 0.00  -0.07   0.00
-0.45   1.20  -0.25
 0.00  -0.12   0.00
</code></pre>
<p>Here is a portion of a sample image, with the specific luminosities for some pixels
given:</p>
<center><img src="./Lab 1_ Image Processing_files/conv_check.png"></center>
<p>What will be the value of the pixel in the output image at the location
indicated by the red highlight?  Enter a single number in the box below.
Note that, although our input brightnesses were all integers in the range <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>255</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,255]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">255</span><span class="mclose">]</span></span></span></span></span>,
this value will be a decimal number.</p><input id="q000002" name="q000002" size="50" type="text" value="">
</div><div>
<span id="q000002_buttons"></span>
<span id="q000002_loading_wrapper">
<span id="q000002_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000002_score_display"></span>
<div class="nsubmits_left" id="q000002_nsubmits_left"></div></div>
<div id="q000002_solution_container">
<div id="q000002_solution">
</div>
<div id="q000002_solution_explanation">
</div>
</div>
<div id="q000002_message"></div>
</div>
<!--END question q000002 -->
<p></p>
<p><a class="anchor" name="catsoop_section_4_1"></a><a class="anchor" name="_edge_effects"></a></p><h3 class="cs_section_title">4.1) Edge Effects<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_edge_effects">§</a></h3><p></p>
<p>When computing the pixels at the perimeter of <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi></mrow><annotation encoding="application/x-tex">O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span></span></span></span></span>, fewer than 9 input pixels
are available.  For a specific example, consider the top left pixel at position
<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0,0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span>.  In this case, all of the pixels to the top and left of <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0,0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span>
are out-of-bounds. We have several options for dealing with these edge effects:</p>
<ul>
<li>One option is to treat every out-of-bounds pixel as having a value of 0.</li>
<li>Another is to <em>extend</em> the input image beyond its boundaries, explained in
the next paragraph.</li>
<li>Yet another is to <em>wrap</em> the input image at its edges, explained in the
paragraph after that.</li>
</ul>
<p>If we want to consider these out-of-bounds pixels in terms of an <em>extended</em>
version of the input image, values to the left of the image should be
considered to have the values from column 0, values to the top of the image
should be considered to have the values from row 0, etc., as illustrated in the
following diagram, where the bolded pixels in the center represent the original
image, and the pixels outside that region represent the logical values in the
"extended" version of the image (and note that this process continues
infinitely in all directions, even though a finite number of pixels are shown
below:</p>
<p></p>
<center>
<img src="./Lab 1_ Image Processing_files/display_mpfig.svg">
</center>
<p>If we want to <em>wrap</em> the input image at its edges, that means trying to get
values beyond the left edge of the image should return values from the right
edge, but from the same row. Similarly, trying to get values beyond the top edge
of the image should return values from the bottom edge, but from the same
column. We can think of it as the image being 'tiled' in all four directions:</p>
<center>
<img src="./Lab 1_ Image Processing_files/display_mpfig(1).svg">
</center>
<p>The thick black square above indicates the original image, and the copies are an
illustration of the wrapping behavior (but they are not part of the actual
image). Note that this only shows one copy of the image in each direction but we
would like the wrapping to extend infinitely in all directions.</p>
<p>To accomplish the goal of switching between these different edge behaviors, you may wish to implement an alternative to <code>get_pixel</code> with
an additional parameter for the out-of-bounds behavior, which expects one of the
strings <code>"zero"</code>, <code>"wrap"</code>, or <code>"extend"</code>. The function would
return pixel values from within the image normally but handle
out-of-bounds pixels by returning appropriate values accordingly as discussed above rather
than raising an exception.  If you do this, other pieces of your code can make
use of that function and not have to worry themselves about whether pixels are
in-bounds or not.</p>
<p><a class="anchor" name="catsoop_section_4_2"></a><a class="anchor" name="_correlation"></a></p><h3 class="cs_section_title">4.2) Correlation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_correlation">§</a></h3><p></p>
<p>Throughout the remainder of this lab, we'll implement a few different filters,
all of which involve computing at least one correlation.  As such, we will want
to have a nice way to compute correlations in a general sense (for an arbitrary
image and an arbitrary kernel).</p>
<p>Note, though, that the output of a correlation need <strong>not</strong> be a legal 6.009
image (pixels may be outside the <code>[0,255]</code> range or may be floats [meaning they are not whole numbers]).  Since we
want our filters all to output valid images, the final step in every one of our
image-processing functions will be to <em>clip</em> negative pixel values to 0 and
values greater than  255 to 255, and to ensure that all values in the image are
integers.</p>
<p>Because these two things are common operations, we're going to recommend
writing a "helper" function for each (so that our filters can simply invoke
those functions rather than reimplementing the underlying behaviors multiple
times).</p>
<p>We have provided skeletons for these two helper functions (which we've called
<code>correlate</code> and <code>round_and_clip_image</code>, respectively) in <code>lab.py</code>.  For now,
read through the docstrings associated with these functions.</p>
<p>Note that we have not explicitly told you how to represent the kernel used in
correlation.  You are welcome to use any representation you like for kernels,
but you should document that change by modifying the docstring of the <code>correlate</code>
function, and you should be prepared to discuss your choice of representation
during your checkoff. You can
assume that kernels will always be square and that every kernel will have an odd number
of rows and columns.</p>
<p>Now that we have a sense of a reasonable structure for this code, it's time to
implement these two functions!</p>
<p>To help with debugging, you may wish to write a few test cases comprised of
correlating <code>test_images/centered_pixel.png</code> or another simple image with a few
different kernels.  You can use the kernels in <a href="https://py.mit.edu/spring22/labs/lab01#_example_kernels">subsection 4.3</a>, for
example, to help test that your code produces the expected results.</p>
<p>(You may also find it helpful to first implement correlation for 3x3 kernels
only, and then generalize to account for larger kernels.)</p>
<p><a class="anchor" name="catsoop_section_4_3"></a><a class="anchor" name="_example_kernels"></a></p><h3 class="cs_section_title" id="catsoop_label_examples" label="examples">4.3) Example Kernels<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_example_kernels">§</a></h3><p></p>
<p>Many different interesting operations can be expressed as image kernels (some
examples can be seen below), and many scientific programs also use this
pattern, so feel free to experiment.</p>
<p><a class="anchor" name="catsoop_section_4_3_1"></a><a class="anchor" name="_identity"></a></p><h4 class="cs_section_title">4.3.1) Identity<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_identity">§</a></h4><p></p>
<pre><code class="nohighlight">0 0 0
0 1 0
0 0 0
</code></pre>
<p>The above kernel represents an <em>identity</em> transformation: applying it to an image yields the input image, unchanged.</p>
<p><a class="anchor" name="catsoop_section_4_3_2"></a><a class="anchor" name="_translation"></a></p><h4 class="cs_section_title">4.3.2) Translation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_translation">§</a></h4><p></p>
<pre><code class="nohighlight">0 0 0 0 0
0 0 0 0 0
1 0 0 0 0
0 0 0 0 0
0 0 0 0 0
</code></pre>
<p>The above kernel shifts the input image two pixels to the <em>right</em>, discards the
rightmost two columns of pixels, and duplicates the leftmost column twice.</p>
<p><a class="anchor" name="catsoop_section_4_3_3"></a><a class="anchor" name="_average"></a></p><h4 class="cs_section_title">4.3.3) Average<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_average">§</a></h4><p></p>
<pre><code class="nohighlight">0.0 0.2 0.0
0.2 0.2 0.2
0.0 0.2 0.0
</code></pre>
<p>The above kernel results in an output image, each pixel of which is
the average of the 5 nearest pixels of the input.</p>
<p><a class="anchor" name="catsoop_section_4_4"></a><a class="anchor" name="_check_your_results"></a></p><h3 class="cs_section_title">4.4) Check Your Results<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_check_your_results">§</a></h3><p></p>
<p>When you have implemented your code and are confident that it is working, try
running it on <code>test_images/pigbird.png</code> with the following <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>13</mn><mo>×</mo><mn>13</mn></mrow><annotation encoding="application/x-tex">13 \times 13</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">13</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">13</span></span></span></span></span>
kernel (which is all zeros except for a single value):</p>
<pre><code class="nohighlight">0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
</code></pre>
<p>Run it once with each edge behavior (<code>'zero'</code>, <code>'extend'</code>, and <code>'wrap'</code>), and
save the results as PNG images.  Take a look at those images.  Do they match
your expectations?  How do the different edge effect behaviors manifest in the
output?</p>
<p>
<!--START question translate_pigbird_zero -->
</p><div class="question question-fileupload" id="cs_qdiv_translate_pigbird_zero" style="position: static">
<div id="translate_pigbird_zero_rendered_question">
Result with <code>'zero'</code> edge behavior:<br><input id="translate_pigbird_zero" name="translate_pigbird_zero" style="display: none" type="file"><button class="btn btn-catsoop" id="translate_pigbird_zero_select_button">Select File</button>&nbsp;<tt><span id="translate_pigbird_zero_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('translate_pigbird_zero_select_button').addEventListener('click', function (){
    document.getElementById("translate_pigbird_zero").click();
});
document.getElementById('translate_pigbird_zero').onchange = function (){
    document.getElementById('translate_pigbird_zero_selected_file').innerText = document.getElementById('translate_pigbird_zero').value;
};
dnd_translate_pigbird_zero = document.getElementById('cs_qdiv_translate_pigbird_zero');
dnd_translate_pigbird_zero.ondragover = dnd_translate_pigbird_zero.ondragenter = function(e){e.preventDefault();};
dnd_translate_pigbird_zero.ondrop = function(e){
    document.getElementById("translate_pigbird_zero").files = e.dataTransfer.files;
    document.getElementById('translate_pigbird_zero').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="translate_pigbird_zero_buttons"></span>
<span id="translate_pigbird_zero_loading_wrapper">
<span id="translate_pigbird_zero_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="translate_pigbird_zero_score_display"></span>
<div class="nsubmits_left" id="translate_pigbird_zero_nsubmits_left"></div></div>
<div id="translate_pigbird_zero_solution_container">
<div id="translate_pigbird_zero_solution">
</div>
<div id="translate_pigbird_zero_solution_explanation">
</div>
</div>
<div id="translate_pigbird_zero_message"></div>
</div>
<!--END question translate_pigbird_zero -->
<p></p>
<p>
<!--START question translate_pigbird_extend -->
</p><div class="question question-fileupload" id="cs_qdiv_translate_pigbird_extend" style="position: static">
<div id="translate_pigbird_extend_rendered_question">
Result with <code>'extend'</code> edge behavior:<br><input id="translate_pigbird_extend" name="translate_pigbird_extend" style="display: none" type="file"><button class="btn btn-catsoop" id="translate_pigbird_extend_select_button">Select File</button>&nbsp;<tt><span id="translate_pigbird_extend_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('translate_pigbird_extend_select_button').addEventListener('click', function (){
    document.getElementById("translate_pigbird_extend").click();
});
document.getElementById('translate_pigbird_extend').onchange = function (){
    document.getElementById('translate_pigbird_extend_selected_file').innerText = document.getElementById('translate_pigbird_extend').value;
};
dnd_translate_pigbird_extend = document.getElementById('cs_qdiv_translate_pigbird_extend');
dnd_translate_pigbird_extend.ondragover = dnd_translate_pigbird_extend.ondragenter = function(e){e.preventDefault();};
dnd_translate_pigbird_extend.ondrop = function(e){
    document.getElementById("translate_pigbird_extend").files = e.dataTransfer.files;
    document.getElementById('translate_pigbird_extend').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="translate_pigbird_extend_buttons"></span>
<span id="translate_pigbird_extend_loading_wrapper">
<span id="translate_pigbird_extend_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="translate_pigbird_extend_score_display"></span>
<div class="nsubmits_left" id="translate_pigbird_extend_nsubmits_left"></div></div>
<div id="translate_pigbird_extend_solution_container">
<div id="translate_pigbird_extend_solution">
</div>
<div id="translate_pigbird_extend_solution_explanation">
</div>
</div>
<div id="translate_pigbird_extend_message"></div>
</div>
<!--END question translate_pigbird_extend -->
<p></p>
<p>
<!--START question translate_pigbird_wrap -->
</p><div class="question question-fileupload" id="cs_qdiv_translate_pigbird_wrap" style="position: static">
<div id="translate_pigbird_wrap_rendered_question">
Result with <code>'wrap'</code> edge behavior:<br><input id="translate_pigbird_wrap" name="translate_pigbird_wrap" style="display: none" type="file"><button class="btn btn-catsoop" id="translate_pigbird_wrap_select_button">Select File</button>&nbsp;<tt><span id="translate_pigbird_wrap_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('translate_pigbird_wrap_select_button').addEventListener('click', function (){
    document.getElementById("translate_pigbird_wrap").click();
});
document.getElementById('translate_pigbird_wrap').onchange = function (){
    document.getElementById('translate_pigbird_wrap_selected_file').innerText = document.getElementById('translate_pigbird_wrap').value;
};
dnd_translate_pigbird_wrap = document.getElementById('cs_qdiv_translate_pigbird_wrap');
dnd_translate_pigbird_wrap.ondragover = dnd_translate_pigbird_wrap.ondragenter = function(e){e.preventDefault();};
dnd_translate_pigbird_wrap.ondrop = function(e){
    document.getElementById("translate_pigbird_wrap").files = e.dataTransfer.files;
    document.getElementById('translate_pigbird_wrap').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="translate_pigbird_wrap_buttons"></span>
<span id="translate_pigbird_wrap_loading_wrapper">
<span id="translate_pigbird_wrap_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="translate_pigbird_wrap_score_display"></span>
<div class="nsubmits_left" id="translate_pigbird_wrap_nsubmits_left"></div></div>
<div id="translate_pigbird_wrap_solution_container">
<div id="translate_pigbird_wrap_solution">
</div>
<div id="translate_pigbird_wrap_solution_explanation">
</div>
</div>
<div id="translate_pigbird_wrap_message"></div>
</div>
<!--END question translate_pigbird_wrap -->
<p></p>
<a class="anchor" name="catsoop_section_5"></a><a class="anchor" name="_blurring_and_sharpening"></a><h2 class="cs_section_title">5) Blurring and Sharpening<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_blurring_and_sharpening">§</a></h2>
<p><a class="anchor" name="catsoop_section_5_1"></a><a class="anchor" name="_blurring"></a></p><h3 class="cs_section_title">5.1) Blurring<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_blurring">§</a></h3><p></p>
<p>For this part of the lab, we will implement a <a href="https://en.wikipedia.org/wiki/Box_blur">box
blur</a>, which can be implemented via
correlation using the 'extend' behavior for out-of-bounds pixels
<a class="anchor" name="catsoop_footnote_ref_3"></a><a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_3"><sup>3</sup></a>. For a box blur, the kernel is an <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n\times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">n</span></span></span></span></span> square of identical
values that sum to 1.  Because you may be asked to experiment with different
values of <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">n</span></span></span></span></span>, you may wish to define a function that takes a single argument
<code>n</code> and returns an <code>n</code>-by-<code>n</code> box blur kernel.</p>
<p>Notice that we have provided an outline for a function called <code>blurred</code>
in the lab distribution.  Read the docstring and the outline for <code>blurred</code> to
get a sense for how it should behave.</p>
<p>Before implementing it, create two additional test cases by filling in the
definitions of <code>test_blurred_black_image</code> and <code>test_blurred_centered_pixel</code> with
the following tests:</p>
<ul>
<li>Box blurs of a <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mo>×</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">6 \times 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">6</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">5</span></span></span></span></span> image consisting entirely of black pixels, with
two different kernel sizes. The output is trivially identical to the input.</li>
<li>Box blurs for the <code>centered_pixel.png</code> image with two different kernel sizes.
You should be able to compute the output manually.</li>
</ul>
<p>These test cases can serve as a useful check as we implement the box blur.
<strong>Note</strong> that you will be expected to demonstrate and discuss these test cases
during a checkoff.</p>
<p>Finally, implement the box blur by filling in the body of the <code>blurred</code>
function.</p>
<p><a class="anchor" name="catsoop_section_5_1_1"></a><a class="anchor" name="_check_your_results_2"></a></p><h4 class="cs_section_title">5.1.1) Check Your Results<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_2">§</a></h4><p></p>
<p>When you are done and your code passes all the blur-related tests (including
the ones you just created), run your blur filter on the <code>test_images/cat.png</code>
image with a box blur kernel of size 13, save the result as a PNG image, and
upload it below to be checked for correctness:</p>
<p>
<!--START question blurry_cat -->
</p><div class="question question-fileupload" id="cs_qdiv_blurry_cat" style="position: static">
<div id="blurry_cat_rendered_question">
Blurred <code>cat.png</code>:<br><input id="blurry_cat" name="blurry_cat" style="display: none" type="file"><button class="btn btn-catsoop" id="blurry_cat_select_button">Select File</button>&nbsp;<tt><span id="blurry_cat_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('blurry_cat_select_button').addEventListener('click', function (){
    document.getElementById("blurry_cat").click();
});
document.getElementById('blurry_cat').onchange = function (){
    document.getElementById('blurry_cat_selected_file').innerText = document.getElementById('blurry_cat').value;
};
dnd_blurry_cat = document.getElementById('cs_qdiv_blurry_cat');
dnd_blurry_cat.ondragover = dnd_blurry_cat.ondragenter = function(e){e.preventDefault();};
dnd_blurry_cat.ondrop = function(e){
    document.getElementById("blurry_cat").files = e.dataTransfer.files;
    document.getElementById('blurry_cat').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="blurry_cat_buttons"></span>
<span id="blurry_cat_loading_wrapper">
<span id="blurry_cat_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="blurry_cat_score_display"></span>
<div class="nsubmits_left" id="blurry_cat_nsubmits_left"></div></div>
<div id="blurry_cat_solution_container">
<div id="blurry_cat_solution">
</div>
<div id="blurry_cat_solution_explanation">
</div>
</div>
<div id="blurry_cat_message"></div>
</div>
<!--END question blurry_cat -->
<p></p>
<p>Before moving on, though, let's try running this same filter with the other
correlation edge effects.  Generate an image using the <code>'zero'</code> boundary
behavior for the correlation in the blur filter, and then generate another
using the <code>'wrap'</code> behavior.  Look at those images; why do they look the way
they do?  When you're ready, upload them below.</p>
<p>
<!--START question blurry_cat_zero -->
</p><div class="question question-fileupload" id="cs_qdiv_blurry_cat_zero" style="position: static">
<div id="blurry_cat_zero_rendered_question">
Blurred <code>cat.png</code> using <code>'zero'</code>:<br><input id="blurry_cat_zero" name="blurry_cat_zero" style="display: none" type="file"><button class="btn btn-catsoop" id="blurry_cat_zero_select_button">Select File</button>&nbsp;<tt><span id="blurry_cat_zero_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('blurry_cat_zero_select_button').addEventListener('click', function (){
    document.getElementById("blurry_cat_zero").click();
});
document.getElementById('blurry_cat_zero').onchange = function (){
    document.getElementById('blurry_cat_zero_selected_file').innerText = document.getElementById('blurry_cat_zero').value;
};
dnd_blurry_cat_zero = document.getElementById('cs_qdiv_blurry_cat_zero');
dnd_blurry_cat_zero.ondragover = dnd_blurry_cat_zero.ondragenter = function(e){e.preventDefault();};
dnd_blurry_cat_zero.ondrop = function(e){
    document.getElementById("blurry_cat_zero").files = e.dataTransfer.files;
    document.getElementById('blurry_cat_zero').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="blurry_cat_zero_buttons"></span>
<span id="blurry_cat_zero_loading_wrapper">
<span id="blurry_cat_zero_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="blurry_cat_zero_score_display"></span>
<div class="nsubmits_left" id="blurry_cat_zero_nsubmits_left"></div></div>
<div id="blurry_cat_zero_solution_container">
<div id="blurry_cat_zero_solution">
</div>
<div id="blurry_cat_zero_solution_explanation">
</div>
</div>
<div id="blurry_cat_zero_message"></div>
</div>
<!--END question blurry_cat_zero -->
<p></p>
<p>
<!--START question blurry_cat_wrap -->
</p><div class="question question-fileupload" id="cs_qdiv_blurry_cat_wrap" style="position: static">
<div id="blurry_cat_wrap_rendered_question">
Blurred <code>cat.png</code> using <code>'wrap'</code>:<br><input id="blurry_cat_wrap" name="blurry_cat_wrap" style="display: none" type="file"><button class="btn btn-catsoop" id="blurry_cat_wrap_select_button">Select File</button>&nbsp;<tt><span id="blurry_cat_wrap_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('blurry_cat_wrap_select_button').addEventListener('click', function (){
    document.getElementById("blurry_cat_wrap").click();
});
document.getElementById('blurry_cat_wrap').onchange = function (){
    document.getElementById('blurry_cat_wrap_selected_file').innerText = document.getElementById('blurry_cat_wrap').value;
};
dnd_blurry_cat_wrap = document.getElementById('cs_qdiv_blurry_cat_wrap');
dnd_blurry_cat_wrap.ondragover = dnd_blurry_cat_wrap.ondragenter = function(e){e.preventDefault();};
dnd_blurry_cat_wrap.ondrop = function(e){
    document.getElementById("blurry_cat_wrap").files = e.dataTransfer.files;
    document.getElementById('blurry_cat_wrap').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="blurry_cat_wrap_buttons"></span>
<span id="blurry_cat_wrap_loading_wrapper">
<span id="blurry_cat_wrap_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="blurry_cat_wrap_score_display"></span>
<div class="nsubmits_left" id="blurry_cat_wrap_nsubmits_left"></div></div>
<div id="blurry_cat_wrap_solution_container">
<div id="blurry_cat_wrap_solution">
</div>
<div id="blurry_cat_wrap_solution_explanation">
</div>
</div>
<div id="blurry_cat_wrap_message"></div>
</div>
<!--END question blurry_cat_wrap -->
<p></p>
<div class="question"><b>Check Yourself:</b><p>Before moving on, make sure your <code>blurred</code> function has been set back to using
the <code>'extend'</code> edge behavior, which is what the tests (and the other filters
we'll implement in this lab) will expect.</p><p><span id="queue_checkyourself_1"></span></p></div>
<p><a class="anchor" name="catsoop_section_5_2"></a><a class="anchor" name="_sharpening"></a></p><h3 class="cs_section_title">5.2) Sharpening<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_sharpening">§</a></h3><p></p>
<p>Next, we'll implement the opposite operation, known as a <em>sharpen</em> filter.
The "sharpen" operation often goes by another name which is more suggestive of
what it means: it is often called an <em>unsharp mask</em> because it results from
subtracting an "unsharp" (blurred) version of the image from a scaled version
of the original image.</p>
<p>More specifically, if we have an image (<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span></span></span></span></span>) and a blurred version of that same
image (<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span></span></span></span></span>), the value of the sharpened image <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span></span></span> at a particular location is:</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>S</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub><mo>=</mo><mn>2</mn><msub><mi>I</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub><mo>−</mo><msub><mi>B</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">S_{x,y} = 2I_{x,y} - B_{x,y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.05017em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span></div><p></p>
<p>One way we could implement this operation is by computing a blurred version of
the image, and then, for each pixel, computing the value given by the equation
above.</p>
<p>While you are not required to do so, it is actually possible to perform this
operation with a single correlation (with an appropriately chosen kernel and
again using the 'extend' behavior for out-of-bounds pixels).</p>
<div class="question"><b>Check Yourself:</b><p></p><p>If we want to use a blurred version <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.05017em;">B</span></span></span></span></span> that was made with a <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span></span></span></span></span> blur
kernel, what kernel <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.03148em;">k</span></span></span></span></span> could we use to compute the entire sharpened image
with a single correlation?
</p><p></p><p><span id="queue_checkyourself_2"></span></p></div>
<p>Implement the <em>unsharp mask</em> as a function <code>sharpened(image, n)</code>, where <code>image</code> is an image
and <code>n</code> denotes the size of the blur kernel that should be used to generate the
blurred copy of the image.  You are welcome to implement this as a single
correlation or using an explicit subtraction, though if you use an explicit
subtraction, make sure that you do not do any rounding until the end (the
intermediate blurred version should not be rounded or clipped in any way).</p>
<p>Note that after computing the above, we'll still need to make sure that
<code>sharpened</code> ultimately returns a valid 6.009 image, which you can do
by making use of your helper function from earlier in the lab.</p>
<p>Note also that, unlike the functions above, we have not provided a skeleton for
this function inside of <code>lab.py</code>; you will need to implement it yourself.  And make sure to include an informative docstring for your new function!</p>
<p><a class="anchor" name="catsoop_section_5_2_1"></a><a class="anchor" name="_check_your_results_3"></a></p><h4 class="cs_section_title">5.2.1) Check Your Results<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_3">§</a></h4><p></p>
<p>When you are done and your code passes the tests related to sharpening, run your
sharpen filter on the <code>test_images/python.png</code> image with a box blur kernel of
size 11, save the result as a PNG image, and upload it below to be checked:</p>
<p>
<!--START question sharp_python -->
</p><div class="question question-fileupload" id="cs_qdiv_sharp_python" style="position: static">
<div id="sharp_python_rendered_question">
Sharpened <code>python.png</code>:<br><input id="sharp_python" name="sharp_python" style="display: none" type="file"><button class="btn btn-catsoop" id="sharp_python_select_button">Select File</button>&nbsp;<tt><span id="sharp_python_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('sharp_python_select_button').addEventListener('click', function (){
    document.getElementById("sharp_python").click();
});
document.getElementById('sharp_python').onchange = function (){
    document.getElementById('sharp_python_selected_file').innerText = document.getElementById('sharp_python').value;
};
dnd_sharp_python = document.getElementById('cs_qdiv_sharp_python');
dnd_sharp_python.ondragover = dnd_sharp_python.ondragenter = function(e){e.preventDefault();};
dnd_sharp_python.ondrop = function(e){
    document.getElementById("sharp_python").files = e.dataTransfer.files;
    document.getElementById('sharp_python').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="sharp_python_buttons"></span>
<span id="sharp_python_loading_wrapper">
<span id="sharp_python_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="sharp_python_score_display"></span>
<div class="nsubmits_left" id="sharp_python_nsubmits_left"></div></div>
<div id="sharp_python_solution_container">
<div id="sharp_python_solution">
</div>
<div id="sharp_python_solution_explanation">
</div>
</div>
<div id="sharp_python_message"></div>
</div>
<!--END question sharp_python -->
<p></p>
<a class="anchor" name="catsoop_section_6"></a><a class="anchor" name="_edge_detection"></a><h2 class="cs_section_title">6) Edge Detection<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_edge_detection">§</a></h2>
<p>Although we will continue working with images in the rest of the lab, our last task
for greyscale images will be to implement a really neat filter called a <a href="https://en.wikipedia.org/wiki/Sobel_operator">Sobel
operator</a>, which is useful for
detecting edges in images.</p>
<p>This edge detector is a bit more complicated than the filters above because it
involves <em>two</em> correlations<a class="anchor" name="catsoop_footnote_ref_4"></a><a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_4"><sup>4</sup></a>.  In particular, it involves kernels <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Kx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07153em;">K</span><span class="mord mathnormal">x</span></span></span></span></span>
and <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Ky</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">Ky</span></span></span></span></span>, which are shown below:</p>
<p><span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Kx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07153em;">K</span><span class="mord mathnormal">x</span></span></span></span></span>:</p>
<pre><code class="nohighlight">-1 0 1
-2 0 2
-1 0 1
</code></pre>
<p><span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Ky</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">Ky</span></span></span></span></span>:</p>
<pre><code class="nohighlight">-1 -2 -1
 0  0  0
 1  2  1
</code></pre>
<p>After computing <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Ox</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord mathnormal">x</span></span></span></span></span> and <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Oy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span></span></span></span></span> by correlating the input with <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Kx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.07153em;">K</span><span class="mord mathnormal">x</span></span></span></span></span> and <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Ky</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.03588em;">Ky</span></span></span></span></span>
respectively (using the 'extend' behavior for each correlation), each pixel of
the output <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi></mrow><annotation encoding="application/x-tex">O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span></span></span></span></span> is the square root of the sum of squares of corresponding pixels
in <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Ox</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord mathnormal">x</span></span></span></span></span> and <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Oy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span></span></span></span></span>:</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>O</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub><mo>=</mo><mtext>round</mtext><mrow><mo fence="true">(</mo><msqrt><mrow><mi>O</mi><msubsup><mi>x</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><mn>2</mn></msubsup><mo>+</mo><mi>O</mi><msubsup><mi>y</mi><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><mn>2</mn></msubsup></mrow></msqrt><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">O_{x,y} = \text{round}\left(\sqrt{Ox_{x,y}^2 + Oy_{x,y}^2}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.8624em; vertical-align: -0.65002em;"></span><span class="mord text"><span class="mord">round</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size2">(</span></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.21237em;"><span class="svg-align" style="top: -3.8em;"><span class="pstrut" style="height: 3.8em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.453em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.17237em;"><span class="pstrut" style="height: 3.8em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.88em;"><svg width="400em" height="1.8800000000000001em" viewBox="0 0 400000 1944" preserveAspectRatio="xMinYMin slice"><path d="M983 90
l0 -0
c4,-6.7,10,-10,18,-10 H400000v40
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.627625em;"><span class=""></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size2">)</span></span></span></span></span></span></span></div><p></p>
<p>As always, take care to ensure that the final image is made up of integer
pixels in range <code>[0,255]</code>.  But only clip the output after combining <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Ox</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord mathnormal">x</span></span></span></span></span> and
<span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Oy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span></span></span></span></span>.  If you clip the intermediate results, the combining calculation will be
incorrect.</p>
<div class="question"><b>Check Yourself:</b><p>What does each of the above kernels, on its own, do?  Try running, saving, and viewing the results of those intermediate correlations to get a sense of what is happening
here.</p><p><span id="queue_checkyourself_3"></span></p></div>
<p>Implement the edge detector as a function <code>edges(image)</code>, which takes an image as
input and returns a new image resulting from the above operations (where the
edges should be emphasized).</p>
<p>Also, create a new test case: edge detection on the <code>centered_pixel.png</code> image.
The correct result is a white ring around the center pixel that is 1 pixel
wide.</p>
<p>As with <code>sharpened</code>, you should add this code to <code>lab.py</code> yourself (and make sure to include an informative docstring); there is no
skeleton provided.</p>
<p>Note also that <code>math</code> has been imported for you, and you are welcome to use the <code>sqrt</code> function from it (though you can also compute square roots by raising numbers to the <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">1/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1/2</span></span></span></span></span> power if you want).</p>
<p><a class="anchor" name="catsoop_section_6_1"></a><a class="anchor" name="_check_your_results_4"></a></p><h3 class="cs_section_title">6.1) Check Your Results<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_4">§</a></h3><p></p>
<p>When you are done and your code passes the edge-detection tests (including the
one you just wrote), run your edge detector on the <code>test_images/construct.png</code>
image, save the result as a PNG image, and upload it below:</p>
<p>
<!--START question construction_edges -->
</p><div class="question question-fileupload" id="cs_qdiv_construction_edges" style="position: static">
<div id="construction_edges_rendered_question">
Edges of <code>construct.png</code>:<br><input id="construction_edges" name="construction_edges" style="display: none" type="file"><button class="btn btn-catsoop" id="construction_edges_select_button">Select File</button>&nbsp;<tt><span id="construction_edges_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('construction_edges_select_button').addEventListener('click', function (){
    document.getElementById("construction_edges").click();
});
document.getElementById('construction_edges').onchange = function (){
    document.getElementById('construction_edges_selected_file').innerText = document.getElementById('construction_edges').value;
};
dnd_construction_edges = document.getElementById('cs_qdiv_construction_edges');
dnd_construction_edges.ondragover = dnd_construction_edges.ondragenter = function(e){e.preventDefault();};
dnd_construction_edges.ondrop = function(e){
    document.getElementById("construction_edges").files = e.dataTransfer.files;
    document.getElementById('construction_edges').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="construction_edges_buttons"></span>
<span id="construction_edges_loading_wrapper">
<span id="construction_edges_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="construction_edges_score_display"></span>
<div class="nsubmits_left" id="construction_edges_nsubmits_left"></div></div>
<div id="construction_edges_solution_container">
<div id="construction_edges_solution">
</div>
<div id="construction_edges_solution_explanation">
</div>
</div>
<div id="construction_edges_message"></div>
</div>
<!--END question construction_edges -->
<p></p>
<a class="anchor" name="catsoop_section_7"></a><a class="anchor" name="_reviewing_representation"></a><h2 class="cs_section_title">7) Reviewing Representation<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_reviewing_representation">§</a></h2>
So far, we have introduced a representation for greyscale images, and we
implemented some neat filters to operate on images of that form.  So far,
we limited our attention to greyscale images, where we represented brightness
values as integers between 0 (the deepest black) and 255 (the brightest white).
<p>Our filters were represented as Python functions that operated on images (i.e.,
functions that took images as input and produced related images as output).</p>
<p>Before we get into the next part of the lab, answer the following question
about the small piece of code below, which implements a small
piece of functionality using our representations.</p>
<pre><code class="language-py hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_box</span>(<span class="hljs-params">color</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_image</span>(<span class="hljs-params">h, w</span>):</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'height'</span>: h,
            <span class="hljs-string">'width'</span>: w,
            <span class="hljs-string">'pixels'</span>: [color <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(h*w)],
        }
    <span class="hljs-keyword">return</span> create_image

maker = make_box(<span class="hljs-number">40</span>)
im = maker(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>)
</code></pre>
<p>
<!--START question pre_lecture -->
</p><div class="question question-multiplechoice" id="cs_qdiv_pre_lecture" style="position: static">
<div id="pre_lecture_rendered_question">
Which of the following are true statements about the code above?<table border="0">
<tbody><tr><td align="center"><input name="pre_lecture_opt0" type="checkbox" value="0"></td><td>This code has a syntax error.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt1" type="checkbox" value="1"></td><td>This code does not have a syntax error, but Python will raise an exception when this code is run.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt2" type="checkbox" value="2"></td><td>This code will run without error.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt3" type="checkbox" value="3"></td><td><code>make_box</code> is a function of a single argument.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt4" type="checkbox" value="4"></td><td><code>make_box</code> is a function of two arguments.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt5" type="checkbox" value="5"></td><td><code>make_box</code> is a dictionary.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt6" type="checkbox" value="6"></td><td><code>maker</code> is a function of a single argument.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt7" type="checkbox" value="7"></td><td><code>maker</code> is a function of two arguments.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt8" type="checkbox" value="8"></td><td><code>maker</code> is a dictionary.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt9" type="checkbox" value="9"></td><td><code>im</code> is a function of a single argument.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt10" type="checkbox" value="10"></td><td><code>im</code> is a function of two arguments.</td></tr>
<tr><td align="center"><input name="pre_lecture_opt11" type="checkbox" value="11"></td><td><code>im</code> is a dictionary.</td></tr>
</tbody></table><input id="pre_lecture" name="pre_lecture" type="hidden" value="{}">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
var pre_lecture_selected = {};
document.getElementById("pre_lecture").value = JSON.stringify(pre_lecture_selected);
document.querySelectorAll("input[type=checkbox][name^=pre_lecture_opt]").forEach(function(r){
    r.addEventListener("click", function(){
        pre_lecture_selected[this.getAttribute("name")] = this.checked;
    document.getElementById("pre_lecture").value = JSON.stringify(pre_lecture_selected);
    });
});
// @license-end
</script>
</div><div>
<span id="pre_lecture_buttons"></span>
<span id="pre_lecture_loading_wrapper">
<span id="pre_lecture_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="pre_lecture_score_display"></span>
<div class="nsubmits_left" id="pre_lecture_nsubmits_left"></div></div>
<div id="pre_lecture_solution_container">
<div id="pre_lecture_solution">
</div>
<div id="pre_lecture_solution_explanation">
</div>
</div>
<div id="pre_lecture_message"></div>
</div>
<!--END question pre_lecture -->
<p></p>
<a class="anchor" name="catsoop_section_8"></a><a class="anchor" name="_representing_color"></a><h2 class="cs_section_title">8) Representing Color<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_representing_color">§</a></h2>
<p>For the remainder of the lab, we'll turn our attention to color images.
And, as before, we'll need a way to represent these images in Python.
It turns out that the representation of digital
images and colors as data is a rich and interesting topic.  And although
there are many ways we could choose to represent color images, we will use
a tried-and-true representation, the <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB color model</a>,
which is used in a lot of common image formats.  In this representation, rather
than a single integer, we will represent the color of each pixel as a tuple of
three integers, representing the amount of red, green, and blue in the pixel,
respectively.  By combining red, green, and blue, we can represent a wide range
of colors.</p>
<p>For this lab, we'll represent a color image using a Python dictionary with three keys:</p>
<ul>
<li><code>width</code>: the width of the image (in pixels),</li>
<li><code>height</code>: the height of the image (in pixels), and</li>
<li><code>pixels</code>: a Python list of pixel values, each represented as a tuple of three integers, <code>(r, g, b)</code>, where <code>r</code>, <code>g</code>, and <code>b</code> are all in the range <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>255</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 255]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">255</span><span class="mclose">]</span></span></span></span></span>.  As with greyscale images, these values are stored in
<a href="https://en.wikipedia.org/wiki/Row-major_order">row-major order</a>
(listing the top row left-to-right, then the next row, and so on)</li>
</ul>
<p>For example, consider this <span class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span></span></span></span></span> image (enlarged here for clarity):</p>
<center>
<p><img alt="image_sample" src="./Lab 1_ Image Processing_files/sample_color.png"></p>
</center>
<p>This image would be encoded as the following dictionary:</p>
<pre><code class="language-py hljs python">i = {
    <span class="hljs-string">'height'</span>: <span class="hljs-number">3</span>,
    <span class="hljs-string">'width'</span>: <span class="hljs-number">2</span>,
    <span class="hljs-string">'pixels'</span>: [(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">39</span>, <span class="hljs-number">143</span>, <span class="hljs-number">230</span>), (<span class="hljs-number">255</span>, <span class="hljs-number">191</span>, <span class="hljs-number">0</span>),
               (<span class="hljs-number">0</span>, <span class="hljs-number">200</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>), (<span class="hljs-number">179</span>, <span class="hljs-number">0</span>, <span class="hljs-number">199</span>)],
}
</code></pre>
<a class="anchor" name="catsoop_section_9"></a><a class="anchor" name="_filters_on_color_images"></a><h2 class="cs_section_title">9) Filters on Color Images<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_filters_on_color_images">§</a></h2>
<p>In sections 3-6, we used Python function objects to represent filters: we
represented a filter as a function that took an image as input and
produced a related image as output.  We will continue with this representation:
a filter for color images is a Python function that takes a color
image as its input and produces a related color image as its output.</p>
<p>While there are certainly other things we can do with color images, it turns
out that we can think about implementing color versions of many of the filters
from previous sections of the lab by separating our color image into three separate greyscale
images (one for each channel: red, green, and blue), applying the same
'greyscale' filter to each one, and then recombining the results
together into a color image.</p>
<p>For example, we can think about a color version of our inversion filter as
working in the way illustrated in the diagram below:</p>
<center>
<img src="./Lab 1_ Image Processing_files/frog_process.png" style="max-width:100%">
</center>
<p>We can think about blurring or sharpening in similar ways: separate an image
into its three color components, apply a filter to each, and recombine them
together.</p>
<p>Given this common structure, it will be useful to have a common way to create
these kinds of color image filters from their greyscale counterparts.  As such,
your first task for this lab is to implement the
<code>color_filter_from_greyscale_filter</code> function in <code>lab.py</code>.  This function
should take as input <em>a Python function</em> representing a greyscale filter (i.e.,
a function that takes a greyscale image as input and produces a greyscale image
as its output).  Its return value should be a <em>new function</em> representing a color
image filter (i.e., a function that takes a color image as input and produces a
color image as its output).</p>
<p>This new filter should follow the pattern above: it should split the given
color image into its three components, apply the greyscale filter to each, and
recombine them into a new color image.</p>
<p>An example of its usage is given below:</p>
<pre><code class="language-py hljs python"><span class="hljs-comment"># if we have a greyscale filter called inverted that inverts a greyscale</span>
<span class="hljs-comment"># image...</span>
inverted_grey_frog = inverted(load_greyscale_image(<span class="hljs-string">'grey_frog.png'</span>))

<span class="hljs-comment"># then the following will create a color version of that filter</span>
color_inverted = color_filter_from_greyscale_filter(inverted)

<span class="hljs-comment"># that can then be applied to color images to invert them (note that this</span>
<span class="hljs-comment"># should make a new color image, rather than mutating its input)</span>
inverted_color_frog = color_inverted(load_color_image(<span class="hljs-string">'color_frog.png'</span>))
</code></pre>
<p>Implement the <code>color_filter_from_greyscale_filter</code> function in <code>lab.py</code>.  You
may find it helpful to define helper functions for splitting the color image
into three separate greyscale images (one for each color component) and for
recombining three greyscale images into a single new color image.</p>
<p><a class="anchor" name="catsoop_section_9_1"></a><a class="anchor" name="_check_your_results_5"></a></p><h3 class="cs_section_title">9.1) Check Your Results<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_5">§</a></h3><p></p>
<p>Use this function to create a color version of your inversion filter
and apply it to the <code>cat.png</code> image from the <code>test_images</code> directory.  Save
your result as a color PNG image and upload your image below to be checked:</p>
<p>
<!--START question cat_invert -->
</p><div class="question question-fileupload" id="cs_qdiv_cat_invert" style="position: static">
<div id="cat_invert_rendered_question">
Inverted <code>cat.png</code>:<br><input id="cat_invert" name="cat_invert" style="display: none" type="file"><button class="btn btn-catsoop" id="cat_invert_select_button">Select File</button>&nbsp;<tt><span id="cat_invert_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('cat_invert_select_button').addEventListener('click', function (){
    document.getElementById("cat_invert").click();
});
document.getElementById('cat_invert').onchange = function (){
    document.getElementById('cat_invert_selected_file').innerText = document.getElementById('cat_invert').value;
};
dnd_cat_invert = document.getElementById('cs_qdiv_cat_invert');
dnd_cat_invert.ondragover = dnd_cat_invert.ondragenter = function(e){e.preventDefault();};
dnd_cat_invert.ondrop = function(e){
    document.getElementById("cat_invert").files = e.dataTransfer.files;
    document.getElementById('cat_invert').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="cat_invert_buttons"></span>
<span id="cat_invert_loading_wrapper">
<span id="cat_invert_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="cat_invert_score_display"></span>
<div class="nsubmits_left" id="cat_invert_nsubmits_left"></div></div>
<div id="cat_invert_solution_container">
<div id="cat_invert_solution">
</div>
<div id="cat_invert_solution_explanation">
</div>
</div>
<div id="cat_invert_message"></div>
</div>
<!--END question cat_invert -->
<p></p>
<p><a class="anchor" name="catsoop_section_9_2"></a><a class="anchor" name="_other_kinds_of_filters"></a></p><h3 class="cs_section_title">9.2) Other Kinds of Filters<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_other_kinds_of_filters">§</a></h3><p></p>
<p>Note that the structure of the <code>color_filter_from_greyscale_filter</code> function
assumes a particular form for our greyscale filters: in particular, it expects
that the filters we pass to it as inputs are functions of <em>a single argument</em>.
However, some of our filters from sections 3-6 did not follow this pattern.  In
particular, our <code>blurred</code> and <code>sharpened</code> filters took both an image and an
additional parameter.  So how can we implement these functions in such a way
that they can work together with <code>color_filter_from_greyscale_filter</code>?</p>
<p>One strategy is to define, for example, a function <code>make_blur_filter</code> that takes
the parameter <code>n</code> and returns a blur filter (which takes a single image as
argument).  In this way, we can make a blur filter that is consistent with the
form expected by <code>color_filter_from_greyscale_filter</code>, for example:</p>
<pre><code class="language-py hljs python"><span class="hljs-comment"># from section 5, we could create a blurred greyscale image like follows:</span>
blurry = blurred(load_greyscale_image(<span class="hljs-string">'cat.png'</span>), <span class="hljs-number">3</span>)

<span class="hljs-comment"># we would like to make a function make_blur_filter that takes a single</span>
<span class="hljs-comment"># parameter and returns a filter.  the use of this function is illustrated</span>
<span class="hljs-comment"># below:</span>
blur_filter = make_blur_filter(<span class="hljs-number">3</span>)
blurry2 = blur_filter(load_greyscale_image(<span class="hljs-string">'cat.png'</span>))

<span class="hljs-comment"># note that make_blur_filter(3), for example, produces a filter of the</span>
<span class="hljs-comment"># appropriate form for use with color_filter_from_greyscale_filter, but</span>
<span class="hljs-comment"># that blurry and blurry2 are equivalent images.</span>

<span class="hljs-comment"># it is also not necessary to store the output of make_blur_filter in a</span>
<span class="hljs-comment"># variable before calling it.  for example, the following also produces an</span>
<span class="hljs-comment"># equivalent image:</span>
blurry3 = make_blur_filter(<span class="hljs-number">3</span>)(load_greyscale_image(<span class="hljs-string">'cat.png'</span>))
</code></pre>
<p>Implement <code>make_blur_filter</code> and <code>make_sharpen_filter</code> in your <code>lab.py</code>.  Each
one of these functions should take a single argument <code>n</code> and should return a
function appropriate for use with <code>color_filter_from_greyscale_filter</code>.</p>
<p>For the sake of avoiding repetitious code, you should try to make use of
<code>blurred</code> and <code>sharpened</code> within your code, rather than reimplementing that
behavior.</p>
<p><a class="anchor" name="catsoop_section_9_3"></a><a class="anchor" name="_check_your_results_6"></a></p><h3 class="cs_section_title">9.3) Check Your Results<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_6">§</a></h3><p></p>
<p>Use these functions in conjunction with <code>color_filter_from_greyscale_filter</code>
to produce the images described below, and upload them to be checked:</p>
<p>
<!--START question python_blur -->
</p><div class="question question-fileupload" id="cs_qdiv_python_blur" style="position: static">
<div id="python_blur_rendered_question">
Blurred <code>python.png</code>, with <code>n=9</code>:<br><input id="python_blur" name="python_blur" style="display: none" type="file"><button class="btn btn-catsoop" id="python_blur_select_button">Select File</button>&nbsp;<tt><span id="python_blur_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('python_blur_select_button').addEventListener('click', function (){
    document.getElementById("python_blur").click();
});
document.getElementById('python_blur').onchange = function (){
    document.getElementById('python_blur_selected_file').innerText = document.getElementById('python_blur').value;
};
dnd_python_blur = document.getElementById('cs_qdiv_python_blur');
dnd_python_blur.ondragover = dnd_python_blur.ondragenter = function(e){e.preventDefault();};
dnd_python_blur.ondrop = function(e){
    document.getElementById("python_blur").files = e.dataTransfer.files;
    document.getElementById('python_blur').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="python_blur_buttons"></span>
<span id="python_blur_loading_wrapper">
<span id="python_blur_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="python_blur_score_display"></span>
<div class="nsubmits_left" id="python_blur_nsubmits_left"></div></div>
<div id="python_blur_solution_container">
<div id="python_blur_solution">
</div>
<div id="python_blur_solution_explanation">
</div>
</div>
<div id="python_blur_message"></div>
</div>
<!--END question python_blur -->
<p></p>
<p>
<!--START question sparrow_sharp -->
</p><div class="question question-fileupload" id="cs_qdiv_sparrow_sharp" style="position: static">
<div id="sparrow_sharp_rendered_question">
Sharpened <code>sparrowchick.png</code>, with <code>n=7</code>:<br><input id="sparrow_sharp" name="sparrow_sharp" style="display: none" type="file"><button class="btn btn-catsoop" id="sparrow_sharp_select_button">Select File</button>&nbsp;<tt><span id="sparrow_sharp_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('sparrow_sharp_select_button').addEventListener('click', function (){
    document.getElementById("sparrow_sharp").click();
});
document.getElementById('sparrow_sharp').onchange = function (){
    document.getElementById('sparrow_sharp_selected_file').innerText = document.getElementById('sparrow_sharp').value;
};
dnd_sparrow_sharp = document.getElementById('cs_qdiv_sparrow_sharp');
dnd_sparrow_sharp.ondragover = dnd_sparrow_sharp.ondragenter = function(e){e.preventDefault();};
dnd_sparrow_sharp.ondrop = function(e){
    document.getElementById("sparrow_sharp").files = e.dataTransfer.files;
    document.getElementById('sparrow_sharp').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="sparrow_sharp_buttons"></span>
<span id="sparrow_sharp_loading_wrapper">
<span id="sparrow_sharp_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="sparrow_sharp_score_display"></span>
<div class="nsubmits_left" id="sparrow_sharp_nsubmits_left"></div></div>
<div id="sparrow_sharp_solution_container">
<div id="sparrow_sharp_solution">
</div>
<div id="sparrow_sharp_solution_explanation">
</div>
</div>
<div id="sparrow_sharp_message"></div>
</div>
<!--END question sparrow_sharp -->
<p></p>
<a class="anchor" name="catsoop_section_10"></a><a class="anchor" name="_cascade_of_filters"></a><h2 class="cs_section_title">10) Cascade of Filters<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_cascade_of_filters">§</a></h2>
<p>Next, we'll add support for chaining filters together in cascade (so that the
output of one filter is used as the input to another, and so on).  You should
implement a function called <code>filter_cascade</code> in your lab file to this end.
This function should take a list of filters (Python functions) as input, and
its output should be a function that, when called on an input image, produces
the equivalent of applying each of the given filters, in turn, to the input image.</p>
<p>For example, if we have three filters <code>f1</code>, <code>f2</code>, and <code>f3</code>, then the following
two images should be equivalent:</p>
<pre><code class="language-py hljs python">out1 = f3(f2(f1(image)))

c = filter_cascade([f1, f2, f3])
out2 = c(image)
</code></pre>
<div class="question"><b>Check Yourself:</b><p>Does it matter if <code>filters</code> contains color or greyscale filters?
Can <code>filters</code> contain both color and greyscale filters?</p><p><span id="queue_checkyourself_4"></span></p></div>
<p>Implement the <code>filter_cascade</code> function in your <code>lab.py</code>.</p>
<p><a class="anchor" name="catsoop_section_10_1"></a><a class="anchor" name="_check_your_results_7"></a></p><h3 class="cs_section_title">10.1) Check Your Results<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_check_your_results_7">§</a></h3><p></p>
<p>When you are confident that your function is working as expected, apply the
following filter to <code>test_images/frog.png</code>, save the result as a PNG image,
and upload it below for checking:</p>
<pre><code class="language-py hljs python">filter1 = color_filter_from_greyscale_filter(edges)
filter2 = color_filter_from_greyscale_filter(make_blur_filter(<span class="hljs-number">5</span>))
filt = filter_cascade([filter1, filter1, filter2, filter1])
</code></pre>
<p>
<!--START question frog_cascade -->
</p><div class="question question-fileupload" id="cs_qdiv_frog_cascade" style="position: static">
<div id="frog_cascade_rendered_question">
<code>frog.png</code> filtered by the filter given above:<br><input id="frog_cascade" name="frog_cascade" style="display: none" type="file"><button class="btn btn-catsoop" id="frog_cascade_select_button">Select File</button>&nbsp;<tt><span id="frog_cascade_selected_file">No file selected</span></tt><script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById('frog_cascade_select_button').addEventListener('click', function (){
    document.getElementById("frog_cascade").click();
});
document.getElementById('frog_cascade').onchange = function (){
    document.getElementById('frog_cascade_selected_file').innerText = document.getElementById('frog_cascade').value;
};
dnd_frog_cascade = document.getElementById('cs_qdiv_frog_cascade');
dnd_frog_cascade.ondragover = dnd_frog_cascade.ondragenter = function(e){e.preventDefault();};
dnd_frog_cascade.ondrop = function(e){
    document.getElementById("frog_cascade").files = e.dataTransfer.files;
    document.getElementById('frog_cascade').onchange();
    e.preventDefault();
};
// @license-end</script>
</div><div>
<span id="frog_cascade_buttons"></span>
<span id="frog_cascade_loading_wrapper">
<span id="frog_cascade_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="frog_cascade_score_display"></span>
<div class="nsubmits_left" id="frog_cascade_nsubmits_left"></div></div>
<div id="frog_cascade_solution_container">
<div id="frog_cascade_solution">
</div>
<div id="frog_cascade_solution_explanation">
</div>
</div>
<div id="frog_cascade_message"></div>
</div>
<!--END question frog_cascade -->
<p></p>
<a class="anchor" name="catsoop_section_11"></a><a class="anchor" name="_something_of_your_own"></a><h2 class="cs_section_title">11) Something of Your Own<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_something_of_your_own">§</a></h2>
<p>Finally, we would like for you to implement something new of your own choosing!
There are no test cases for this portion of the lab, which means that you will
not lose points if you complete it any time before your checkoff (even after
the code submission deadline). You are, however, expected to include your
creative addition in the code submission by the time of your checkoff, so that
it can be discussed during checkoff.</p>
<p>You are welcome to implement whatever you like here, and, unlike other portions
of the lab, you are welcome to import the <code>math</code> or <code>random</code> modules in this
section.  If you want to use other modules, that might be ok, but please ask us
first!</p>
<p>We encourage you to implement things that sound interesting to you!  If you are
having trouble thinking of what to do, here are some ideas that might help you
get started, and we're certainly happy to answer questions as you work through
things:</p>
<ul>
<li>
<p>You could implement some drawing primitives so that you can draw shapes on top
of images.  Maybe <code>circle(image, (r, g, b), x, y, radius)</code> draws a circle of
the given size at the given location.  You could implement multiple drawing
primitives and use them to draw a nice new picture (or to modify an existing
one!).</p>
</li>
<li>
<p>You could implement a "threshold" filter where, on each channel, values above
a certain threshold are replaced with 255 and values below that threshold are
replaced with 0.  You could implement this in such a way that <code>threshold</code> is a
function that takes a threshold value and returns a color filter (perhaps
created using <code>color_filter_from_greyscale_filter</code> from a greyscale version of
this filter).</p>
</li>
<li>
<p>You could implement some other new filters such as amplifying a certain color
or a <a href="https://en.wikipedia.org/wiki/Image_embossing">directional emboss</a>. You
could even combine them with some of the others using <code>filter_cascade</code> to make
a new effect.</p>
</li>
<li>
<p>You could add the equivalent of "pasting" smaller images on top of larger ones
(maybe also including a color that should be treated as transparent for
purposes of the copy/paste, so that pixels of that color in the pasted image
are not copied over).</p>
</li>
<li>
<p>You could implement a different kind of filter that takes spatial information
into account, in addition to color information, such as a
<a href="https://en.wikipedia.org/wiki/Vignetting">vignette</a> or a <a href="https://docs.gimp.org/2.8/en/plug-in-ripple.html">ripple
filter</a>.</p>
</li>
<li>
<p>You could implement the equivalent of <a href="https://www.gimp.org/tutorials/Basic_Color_Curves/">color
curves</a>, for example by
implementing something like described in <a href="http://www.practicepython.org/blog/2016/12/20/instagram-filters-python.html">this
article</a>.
Or, you could play around with the color content of images in other ways.</p>
</li>
</ul>
<p>Regardless of what you choose to implement here, you should be prepared to discuss
your code and demonstrate your results during your checkoff conversation.</p>
<a class="anchor" name="catsoop_section_12"></a><a class="anchor" name="_code_submission"></a><h2 class="cs_section_title">12) Code Submission<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_code_submission">§</a></h2>
<p>When you have tested your code sufficiently on your own machine, submit your
modified <code>lab.py</code> using the <code>submit-009-lab</code> script.  The following command
should submit the lab, assuming that the last argument <code>/path/to/lab.py</code> is
replaced by the location of your <code>lab.py</code> file:</p>
<pre><code class="language-python3">$ submit-009-lab -a lab01 /path/to/lab.py
</code></pre>
<p>Running that script should submit your file to be checked, and it should also
provide some information about how and where to get feedback about your
submission.  Reloading this page after submitting will also show some
additional information:</p>
<div class="callout callout-note">You have not yet made any submissions to this assignment.</div>
<a class="anchor" name="catsoop_section_13"></a><a class="anchor" name="_checkoff"></a><h2 class="cs_section_title">13) Checkoff<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_checkoff">§</a></h2>
<p>Once you are finished with the code, you will need to come to an office-hour
time and add yourself to the queue asking for a checkoff in order to receive
credit for the lab.  <strong>You must be ready to discuss your code and test cases in
detail before asking for a checkoff.</strong></p>
<p>You should be prepared to demonstrate your code (which should be
well-commented, should avoid repetition, and should make good use of helper
functions).  In particular, be prepared to discuss:</p>
<ul>
<li>The bugs you found with the original inversion filter.</li>
<li>The new test cases you added for inversion and blurring.</li>
<li>Your implementation of correlation, including your choice of representation for convolutional kernels.</li>
<li>Your implementation of blurring and sharpening.</li>
<li>Your implementation of edge detection.</li>
<li>Your implementation of <code>color_filter_from_greyscale_filter</code>.</li>
<li>Your implementation of <code>make_blur_filter</code>.</li>
<li>Your implementation of <code>filter_cascade</code>.</li>
<li>Your creative extension.</li>
</ul>
<div class="response"><i>You have not yet received this checkoff.</i></div>
<a class="anchor" name="catsoop_section_14"></a><a class="anchor" name="_what_comes_next"></a><h2 class="cs_section_title">14) What Comes Next?<a class="cs_permalink" href="https://py.mit.edu/spring22/labs/lab01#_what_comes_next">§</a></h2>
<p>There are a lot of interesting classes at MIT that explore ideas related to
this lab.  6.003 (Signal Processing) was already mentioned in lab 0's writeup,
but it is relevant here as well, as a way to get a different perspective and
a deeper understanding of how filters like these behave.
6.815 (Digital and Computational Photography) is another class that is worth
considering, perhaps later in your career, where you get an opportunity to
learn about (and implement) a number of other interesting image processing
applications.</p>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
catsoop.all_questions = ['q000000', 'q000001', 'q000002', 'translate_pigbird_zero', 'translate_pigbird_extend', 'translate_pigbird_wrap', 'blurry_cat', 'blurry_cat_zero', 'blurry_cat_wrap', 'sharp_python', 'construction_edges', 'pre_lecture', 'cat_invert', 'python_blur', 'sparrow_sharp', 'frog_cascade'];
catsoop.username = null;
catsoop.this_path = 'https://py.mit.edu/spring22/labs/lab01';
catsoop.path_info = ['spring22', 'labs', 'lab01'];
catsoop.course = 'spring22';
catsoop.url_root = 'https://py.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

// @license-end</script>
<br>&nbsp;<hr><b name="cs_footnotes">Footnotes</b><p><a class="anchor" name="catsoop_footnote_1"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">1</sup>Note that
you won't be able to run this command from within Python; rather, it should be
run from a terminal.  <a href="https://py.mit.edu/fall20/notes/command_line">Our notes</a>
on using the command line should get you started.  If you want to try it out and
you are having trouble, we're happy to help in office hours! <a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_ref_1"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_2"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">2</sup><code>pytest</code> has many other features, such as grouping
tests or creating test classes whose methods form a group of tests. Check out
its <a href="https://docs.pytest.org/en/reorganize-docs/contents.html">documentation</a> if
you are interested in learning about these features. <a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_ref_2"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_3"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">3</sup>Although you are welcome to try and see what happens with the other
out-of-bounds behaviors! <a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_ref_3"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_4"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">4</sup>It is for this reason, and specifically
since we want to compute these correlations <em>without rounding</em> before combining
the results together, that we suggested separating <code>correlate</code> and
<code>round_and_clip_image</code> rather than implementing a single function that
performed both operations. <a href="https://py.mit.edu/spring22/labs/lab01#catsoop_footnote_ref_4"><span class="noprint">(click to return to text)</span></a></p>
</div>
</div>
<div class="cs_right_menu"></div>
</main>
<footer>
<div class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation"><span class="line"><a href="https://py.mit.edu/spring22">Home</a></span> <span class="cs_nav_separator">/</span> <span class="line"><a href="https://py.mit.edu/spring22/labs/lab01">Lab 1: Image Processing</a></span></div>
<div class="cs_footer">
      This page was last updated on Sunday February 06, 2022 at 12:14:38 PM (revision <code>df85f972a</code>).<br>&nbsp;<br>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.mit.edu/" target="_blank">CAT-SOOP</a> v2022.2.0.dev19 "Highlander" (development snapshot).<br>
      CAT-SOOP is <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>, available under the terms<br>of the <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
<a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a><br>
<a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</div>
</footer>



</body></html>